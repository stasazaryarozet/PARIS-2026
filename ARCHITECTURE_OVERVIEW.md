# АРХИТЕКТУРА "ДЕЛ ВООБЩЕ": ПОЛНЫЙ ОБЗОР ДЛЯ AI AGENT

**Для AI Agent через Cloud Cursor**  
**Версия**: 1.0  
**Дата**: 2025-10-29

> **КРИТИЧНО**: Этот документ должен быть прочитан Agent'ом при старте работы над любым проектом в "Дел Вообще".

---

## КОНТЕКСТ: ГДЕ ВЫ НАХОДИТЕСЬ

**Вы работаете с проектом "Дел Вообще"** — иерархической системой проектов.

**Иерархия уровней**:
```
Дел Вообще (уровень 1)
  ↓
Ольга (уровень 2 — сфера)
  ↓
Дизайн-путешествия (уровень 3 — категория)
  ↓
PARIS 2026 (уровень 4 — конкретный проект)
```

**Принцип**: Каждая папка = отдельный Git репозиторий + Cursor проект

---

## ПОЛНАЯ СТРУКТУРА

### Уровень 1: Дел Вообще

**Расположение**: `~/Дела/`  
**Git репозиторий**: `дела-вообще` (или аналогичный)  
**Содержимое**: Обзор всех сфер, мета-информация, общие инструменты

**Компоненты**:
- `Ольга/` — сфера (submodule)
- `Telegram Bot/` — общий инструмент (submodule или часть репозитория)
- `ARCHITECTURE.md` — полная архитектура
- `ARCHITECTURE_OVERVIEW.md` — этот документ
- `README.md` — обзор

**Доступные ресурсы**:
- Обзор всех сфер и проектов
- Общие инструменты (Telegram Bot)
- Координация между сферами

---

### Уровень 2: Ольга

**Расположение**: `~/Дела/Ольга/`  
**Git репозиторий**: `Ольга` (или `olga-projects`)  
**Содержимое**: Категории проектов Ольги

**Компоненты**:
- `Дизайн-путешествия/` — категория (submodule)
- `README.md` — обзор проектов Ольги
- `.gitmodules` — ссылки на категории

**Связи**:
- **Родитель**: Дел Вообще
- **Дочерние**: Категории проектов (Дизайн-путешествия, другие)

---

### Уровень 3: Дизайн-путешествия

**Расположение**: `~/Дела/Ольга/Дизайн-путешествия/`  
**Git репозиторий**: `дизайн-путешествия` (или `design-travels`)  
**Содержимое**: Проекты туров + общие ресурсы

**Компоненты**:
- `PARIS 2026/` — конкретный проект (submodule)
- `Сентябрь 2025/` — архив (submodule или папка)
- `SHARED/` — общие ресурсы (часть репозитория, не submodule)
  - `contacts/` — общий список адресатов (ADDRESS_LIST.csv)
  - `templates/` — шаблоны проектов
  - `assets/` — общие изображения
- `README.md` — обзор туров
- `.gitmodules` — ссылки на проекты

**Связи**:
- **Родитель**: Ольга
- **Дочерние**: Конкретные проекты туров (PARIS 2026, другие)
- **Внутренние ресурсы**: SHARED/ (используются всеми турами)

**КРИТИЧНО**: SHARED/ — часть этого репозитория, не submodule. Это внутренние ресурсы категории.

---

### Уровень 4: PARIS 2026

**Расположение**: `~/Library/Mobile Documents/com~apple~CloudDocs/Дела/Ольга/Дизайн-путешествия/PARIS-2026/`  
**Git репозиторий**: `PARIS-2026` (существует: `stasazaryarozet/PARIS-2026`)  
**Содержимое**: Весь код, контент, документация конкретного тура

**Компоненты**:
- `index.html` — SPA
- `style.css` — стили
- `content.js` — автогенерируемый контент
- `build.py` — генератор content.js
- `WEBSITE_CONTENT.md` — источник правды (контент)
- `OPERATIONAL_MODEL_PROPOSAL_v7.md` — операционная модель AI
- `tools/` — скрипты проекта
- `server/` — backend (опционально)

**Связи**:
- **Родитель**: Дизайн-путешествия
- **Может использовать**: SHARED/contacts/, SHARED/templates/ (через импорт/синхронизацию)
- **Доступ к Telegram Bot**: Бот на уровне "Дел Вообще" (`stasazaryarozet/telegram-bot`)

**Доступ к Telegram Bot**:
Если нужна информация о данных, полученных Telegram Bot:
- Подключиться к репозиторию `stasazaryarozet/telegram-bot` через Cloud Cursor
- Проверить `data/` репозитория или `~/TelegramArchive/` (системное хранилище)
- Бот обрабатывает: видео, голосовые, фото, документы, текст (см. раздел "Telegram Bot" ниже)

---

### Уровень 1 (параллельно): Telegram Bot

**Расположение**: `~/Дела/Telegram Bot/`  
**Git репозиторий**: `telegram-bot` (существует: `stasazaryarozet/telegram-bot`)  
**Содержимое**: Многофункциональный Telegram бот для всех проектов

**Компоненты**:
- `tools/telegram_bot_setup.py` — основной код бота (daemon)
- `data/` — данные Telegram (videos, audio, photos, text, metadata, transcripts)
- `logs/` — логи бота
- Документация (TELEGRAM_*.md)

**Что обрабатывает бот**:
- Видео (`data/videos/`)
- Голосовые сообщения (`data/voice/`)
- Видео-заметки (`data/videos/`)
- Аудио (`data/audio/`)
- Фото (`data/photos/`)
- Документы (`data/documents/`)
- Текст (`data/text/`)
- Метаданные (`data/metadata/`)
- Транскрипты (`data/transcripts/`)

**Хранилище данных**:
- Репозиторий: `data/` в `stasazaryarozet/telegram-bot`
- Системное: `~/TelegramArchive/{chat_id}_{chat_name}/` (daemon сохраняет туда)

**Связи**:
- **Уровень**: На уровне "Дел Вообще" (не в сфере Ольга)
- **Использование**: Доступен всем проектам "Дел Вообще"
- **Доступ**: Подключиться к репозиторию `stasazaryarozet/telegram-bot` через Cloud Cursor

---

## ЗАВИСИМОСТИ И ИНТЕРАКЦИИ

### Принцип зависимостей

**Зависимости спускаются сверху вниз** (родитель → дочерний)

**Родительский проект знает о дочерних**:
- Через `.gitmodules` (Git submodules)
- Родитель содержит ссылки на дочерние репозитории

**Дочерний проект НЕ зависит от родительского напрямую**:
- Можно клонировать дочерний проект отдельно
- Дочерний проект работает независимо

**Пример**:
```
Дел Вообще/.gitmodules:
  [submodule "Ольга"]
    url = git@github.com:stasazaryarozet/Ольга.git

Ольга/.gitmodules:
  [submodule "Дизайн-путешествия"]
    url = git@github.com:stasazaryarozet/дизайн-путешествия.git

Дизайн-путешествия/.gitmodules:
  [submodule "PARIS 2026"]
    url = git@github.com:stasazaryarozet/PARIS-2026.git
```

---

### Интеракция между уровнями

#### 1. Подтягивание данных снизу вверх

**Сценарий**: Обновление обзоров родительских проектов

**Механизм**: Скрипты обновления в родительском репозитории

**Пример задачи для Agent на уровне "Дизайн-путешествия"**:
```
Обнови README.md: добавь информацию о всех активных проектах туров.
Прочитай README.md каждого проекта и обнови обзор.
```

**Пример задачи для Agent на уровне "Ольга"**:
```
Обнови README.md: добавь информацию о всех категориях проектов.
Прочитай README.md каждой категории и обнови обзор.
```

#### 2. Использование общих ресурсов (сверху вниз)

**Сценарий**: PARIS 2026 использует контакты из SHARED/

**Механизм A: Символические ссылки**
```bash
# В проекте PARIS 2026
ln -s ../../SHARED/contacts/ADDRESS_LIST.csv ./data/contacts.csv
```

**Механизм B: Скрипт синхронизации**
```bash
# В проекте PARIS 2026/tools/
./sync_contacts.sh
  → Копирует ADDRESS_LIST.csv из ../../SHARED/contacts/
  → Обновляет локальную копию
```

**Механизм C: Импорт в коде**
```python
# В build.py проекта PARIS 2026
contacts_path = Path(__file__).parent.parent.parent / "SHARED" / "contacts" / "ADDRESS_LIST.csv"
```

**Пример задачи для Agent на уровне "PARIS 2026"**:
```
Импортируй контакты из SHARED/contacts/ADDRESS_LIST.csv.
Создай скрипт синхронизации для обновления контактов перед билдом.
```

#### 3. Передача данных между проектами

**Сценарий**: Контакты из "Сентябрь 2025" переносятся в общий список

**Механизм**: Скрипт миграции на уровне категории

**Пример задачи для Agent на уровне "Дизайн-путешествия"**:
```
Создай скрипт migrate_contacts.sh:
  1. Читает контакты из Сентябрь 2025/
  2. Добавляет их в SHARED/contacts/ADDRESS_LIST.csv
  3. Обновляет статусы
```

#### 4. Координация между параллельными проектами

**Сценарий**: Несколько туров используют общие контакты

**Механизм**: Изменения в SHARED/, затем синхронизация в проекты

**Пример задачи для Agent на уровне "Дизайн-путешествия"**:
```
1. Обнови контакты в SHARED/contacts/ADDRESS_LIST.csv
2. Синхронизируй изменения во все активные проекты туров
3. Обнови статусы контактов после рассылки
```

---

## РАБОТА С РАЗНЫМИ УРОВНЯМИ

### Если вы подключены к уровню "Дел Вообще"

**Что видите**:
- Все сферы (Ольга, другие)
- Общие инструменты (Telegram Bot)
- Мета-документацию

**Что можете делать**:
- Координировать между сферами
- Обновлять общие обзоры
- Работать с общими инструментами

**Примеры задач**:
- "Обнови README.md: добавь информацию о новой сфере"
- "Создай скрипт для синхронизации данных между всеми сферами"

---

### Если вы подключены к уровню "Ольга"

**Что видите**:
- Категории проектов Ольги (Дизайн-путешествия, другие)
- Обзор проектов Ольги

**Что НЕ видите напрямую**:
- Другие сферы "Дел Вообще"
- Telegram Bot (он на уровне выше)

**Что можете делать**:
- Работать с категориями проектов
- Обновлять обзор проектов Ольги
- Координировать между категориями

**Примеры задач**:
- "Обнови README.md Ольги: добавь информацию о новом туре"
- "Создай новую категорию проектов"

---

### Если вы подключены к уровню "Дизайн-путешествия"

**Что видите**:
- Проекты туров (PARIS 2026, Сентябрь 2025)
- `SHARED/` — общие ресурсы (контакты, шаблоны, assets)
- Обзор туров

**Что НЕ видите напрямую**:
- Уровень "Ольга"
- Уровень "Дел Вообще"
- Другие категории Ольги

**Что можете делать**:
- Работать с SHARED ресурсами (обновлять контакты, шаблоны)
- Синхронизировать данные между турами
- Управлять проектами туров (через submodules)

**Примеры задач**:
- "Обнови контакты в SHARED/contacts/ADDRESS_LIST.csv"
- "Синхронизируй шаблоны из SHARED/templates/ во все активные туры"
- "Создай новый тур и добавь его как submodule"

---

### Если вы подключены к уровню "PARIS 2026"

**Что видите**:
- Весь код проекта (index.html, style.css, build.py)
- Контент (WEBSITE_CONTENT.md)
- Документацию проекта

**Что НЕ видите напрямую**:
- Родительские уровни
- Другие проекты
- SHARED ресурсы (если не импортированы)

**Что можете делать**:
- Работать с кодом проекта
- Обновлять контент
- Рефакторить код
- Исправлять баги
- Добавлять функциональность

**Примеры задач**:
- "Обнови WEBSITE_CONTENT.md: измени дату тура"
- "Исправь баг в форме бронирования"
- "Импортируй контакты из SHARED/contacts/"

**Доступ к Telegram Bot**:
Если нужна информация о данных, полученных Telegram Bot:
- Бот находится на уровне "Дел Вообще": `stasazaryarozet/telegram-bot`
- Данные хранятся в `data/` репозитория или в `~/TelegramArchive/`
- Для получения информации: подключиться к репозиторию `telegram-bot` или проверить `~/TelegramArchive/`

---

## ДОСТУП К РЕСУРСАМ ДРУГИХ УРОВНЕЙ

### Как получить доступ к SHARED ресурсам из проекта

**Если вы работаете с проектом PARIS 2026 и нужны контакты из SHARED/**:

**Вариант 1: Относительный путь** (если структура сохранена)
```python
# В build.py
contacts_path = Path(__file__).parent.parent.parent / "SHARED" / "contacts" / "ADDRESS_LIST.csv"
```

**Вариант 2: Скрипт синхронизации**
```bash
# tools/sync_contacts.sh
cp ../../SHARED/contacts/ADDRESS_LIST.csv ./data/contacts.csv
```

**Вариант 3: Задача на уровне категории**
```
Задача для Agent на уровне "Дизайн-путешествия":
"Синхронизируй контакты из SHARED/contacts/ во все активные проекты туров"
```

---

### Как получить доступ к данным Telegram Bot из проекта

**Если вы работаете с проектом PARIS 2026 и нужна информация о данных Telegram Bot**:

**Вариант 1: Подключение к репозиторию Telegram Bot**
```
Подключиться к репозиторию stasazaryarozet/telegram-bot через Cloud Cursor
→ Просмотреть data/ для получения информации о собранных данных
```

**Вариант 2: Проверка системного хранилища**
```
Проверить ~/TelegramArchive/{chat_id}_{chat_name}/
→ Бот сохраняет данные туда автоматически (daemon)
```

**Вариант 3: Символическая ссылка (если нужен постоянный доступ)**
```bash
# В проекте PARIS 2026
ln -s ~/TelegramArchive/{chat_id}_{chat_name} ./source_materials/telegram
```

**Пример задачи для Agent**:
```
"Какую информацию получил Telegram Bot?"
→ Подключиться к репозиторию stasazaryarozet/telegram-bot
→ Проверить data/ или README.md для информации о собранных данных
→ Или проверить ~/TelegramArchive/ для актуальных данных
```

---

### Как обновить обзор родительского проекта

**Если вы работаете с проектом PARIS 2026 и нужно обновить обзор категории**:

**Механизм**: Задача на уровне родителя

```
Задача для Agent на уровне "Дизайн-путешествия":
"Обнови README.md: добавь информацию о проекте PARIS 2026 на основе его README.md"
```

---

## СТАНДАРТНЫЕ ЗАДАЧИ ДЛЯ AI AGENT

### При старте работы на любом уровне

1. **Прочитать этот документ** (ARCHITECTURE_OVERVIEW.md)
2. **Прочитать README.md** текущего уровня
3. **Прочитать OPERATIONAL_MODEL_PROPOSAL_v7.md** (если есть)
4. **Определить текущий уровень** в иерархии
5. **Понять доступные ресурсы** на текущем уровне
6. **Понять связи** с родительскими/дочерними уровнями

---

### При работе с проектом

**Всегда**:
- Использовать относительные пути (не `/Users/...`)
- Обновлять документацию после изменений
- Следовать принципам OPERATIONAL_MODEL_PROPOSAL_v7.md

**Если нужно взаимодействовать с другими уровнями**:
- Создать скрипт синхронизации
- Или поставить задачу на соответствующем уровне

---

## ПРИНЦИПЫ АРХИТЕКТУРЫ

### q1: Можно ли без этого обойтись?

**Git submodules**: Только где есть реальная зависимость  
**Скрипты синхронизации**: Только для часто меняющихся данных  
**Символические ссылки**: Для статических ресурсов

### Изоляция vs Координация

**Изоляция**: Каждый проект независим (можно клонировать отдельно)  
**Координация**: Родительские проекты объединяют дочерние  
**Баланс**: Submodules обеспечивают изоляцию + координацию

### Зависимости

**Родитель → Дочерний**: Родитель знает о дочернем (через submodule)  
**Дочерний → Родитель**: Дочерний НЕ зависит от родителя напрямую  
**Почему**: Дочерний проект должен быть клонируем независимо

---

## КАРТА СВЯЗЕЙ

```
Дел Вообще
  ├── Ольга (submodule)
  │   └── Дизайн-путешествия (submodule)
  │       ├── PARIS 2026 (submodule)
  │       └── SHARED/ (внутренние ресурсы)
  │           ├── contacts/ADDRESS_LIST.csv
  │           ├── templates/
  │           └── assets/
  └── Telegram Bot (submodule или часть репозитория)
```

**Связи**:
- Solid line (─) = Git submodule (зависимость)
- Dotted line (└) = внутренние ресурсы (часть репозитория)
- Стрелки (→) = направление зависимости (родитель → дочерний)

---

## ЧЕКЛИСТ ДЛЯ AI AGENT

При получении задачи:

- [ ] Определен текущий уровень в иерархии?
- [ ] Понятны доступные ресурсы на текущем уровне?
- [ ] Понятны связи с другими уровнями?
- [ ] Если нужны ресурсы другого уровня — выбран механизм доступа?
- [ ] Используются относительные пути?
- [ ] Обновляется документация после изменений?

---

## ИТОГО

**Ключевые принципы**:

1. **Изоляция**: Каждый проект независим
2. **Координация**: Через родительские проекты и submodules
3. **Интеракция**: Через скрипты и задачи на нужных уровнях
4. **Зависимости**: Спускаются сверху вниз
5. **Минимум усилий**: Использовать только необходимое

**При работе с любым уровнем**: Agent понимает полную картину архитектуры и может эффективно работать с проектом.

---

**Архитектура наивысшего качества**: Изоляция + координация + понимание связей.

