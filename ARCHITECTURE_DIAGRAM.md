# Визуализация архитектуры системы

**Для создания диаграммы архитектуры**

---

## Текстовая диаграмма архитектуры

```
┌─────────────────────────────────────────────────────────┐
│                    FRONTEND LAYER                        │
│                                                           │
│  ┌──────────────────────────────────────────────┐       │
│  │         index.html                           │       │
│  │  ┌──────────────────────────────────────┐  │       │
│  │  │  Форма бронирования                   │  │       │
│  │  │  - name (обязательно)                 │  │       │
│  │  │  - contact (email/phone)              │  │       │
│  │  │  - consent (checkbox)                  │  │       │
│  │  │  + скрытые поля                        │  │       │
│  │  └──────────────────────────────────────┘  │       │
│  │              │                                │       │
│  │              │ POST (FormData)                │       │
│  │              ▼                                │       │
│  └──────────────┼──────────────────────────────┘       │
└──────────────────┼───────────────────────────────────────┘
                   │
                   │
         ┌─────────┴─────────┐
         │                    │
         ▼                    ▼
┌─────────────────┐  ┌──────────────────────┐
│  PRIMARY API    │  │  FALLBACK ENDPOINT    │
│                 │  │                      │
│ api.parisin     │  │  Formspree           │
│ january.ru/     │  │  formspree.io/f/     │
│ api/submit      │  │  xvgwnvkb            │
│                 │  │                      │
│ [Кастомный      │  │  [Текущий в коде]    │
│  backend]       │  │                      │
└────────┬────────┘  └──────────┬───────────┘
         │                      │
         │ Process             │ Webhook
         │ Validate            │ JSON
         │                      │
         └──────────┬───────────┘
                    │
                    ▼
         ┌──────────────────────┐
         │   TELEGRAM BOT API   │
         │                      │
         │  Получает данные:    │
         │  • name              │
         │  • contact           │
         │  • consent           │
         │  • _subject          │
         │  • timestamp (opt)   │
         │                      │
         │  Отправляет сообщение│
         │  в Telegram чат      │
         └──────────────────────┘
```

---

## Описание компонентов для визуализации

### 1. Frontend Layer (Синий)
- **Компонент**: Браузер пользователя
- **Файл**: `index.html`
- **Функция**: Форма бронирования собирает данные

### 2. Primary API (Зеленый - ожидаемый)
- **URL**: `api.parisinjanuary.ru/api/submit`
- **Статус**: По документации должен быть приоритетным
- **Функция**: Кастомный backend обработки

### 3. Fallback Endpoint (Желтый - текущий)
- **URL**: `formspree.io/f/xvgwnvkb`
- **Статус**: Используется в текущем коде
- **Функция**: Третья сторона, email + webhook

### 4. Telegram Bot API (Красный)
- **Функция**: Получает данные и отправляет уведомление
- **Данные**: name, contact, consent + метаданные

---

## Поток данных

### Шаг 1: Пользователь заполняет форму
```
name: "Иван Иванов"
contact: "test@example.com"
consent: "on"
```

### Шаг 2: Отправка данных
- **Текущий путь**: Прямо в Formspree
- **Ожидаемый путь**: Сначала Primary API, затем fallback

### Шаг 3: Обработка
- Валидация данных
- Подготовка уведомления

### Шаг 4: Telegram
- Получение данных в бот
- Формирование сообщения
- Отправка в чат

---

## Формат данных для Telegram

```json
{
  "name": "Иван Иванов",
  "contact": "test@example.com",
  "consent": "on",
  "_subject": "Париж январь 2026 — заявка",
  "timestamp": "2024-12-31T15:00:00Z",
  "source": "parisinjanuary.ru"
}
```

---

## Инструкция для создания изображения

**Рекомендуемый формат**: SVG или PNG с диаграммой

**Цветовая схема**:
- Синий (#4A90E2) - Frontend
- Зеленый (#50C878) - Primary API (ожидаемый)
- Желтый (#FFC107) - Fallback (текущий)
- Красный (#E31B1B) - Telegram Bot

**Стиль**: Прямоугольные блоки с стрелками, минимум текста

**Размер**: 1200x800px для документации

---

**Создано**: 31 декабря 2024  
**Версия**: 1.0
