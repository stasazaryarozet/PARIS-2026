# Документация Яндекс ID API

Источник: https://yandex.ru/dev/id/doc/ru/
Скачано файлов: 58

================================================================================


## access.html

--------------------------------------------------------------------------------

**Заголовок:** Получение OAuth-токена | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Получение OAuth-токена- [Подключение к API Яндекс ID](how-to.html)
- Этап 2. Получение OAuth-токена

# Получение OAuth-токена
Чтобы пользователь смог авторизоваться на вашем сайте или в сервисе, настройте работу с протоколом OAuth. Для этого необходимо получить OAuth-токен.

OAuth-токен позволяет обращаться к сервисам Яндекса от имени определенного пользователя, если он дает такое разрешение. Токен следует запрашивать для каждого нового пользователя, который входит через Яндекс в ваш сервис.

Выберите способ получения токена в зависимости от платформы вашего сервиса:

-
[Технология мгновенной авторизации](suggest-description.html) — используется для организации входа пользователя в веб-сервисы.

Технология мгновенной авторизации позволяет добавить на ваш сайт один из вариантов кнопки авторизации или виджет &quot;Мгновенный вход&quot;. Для этого нужно подключить на страницу JS-скрипт.
Воспользуйтесь интерактивным [конструктором кнопок](suggest/script-sdk-suggest.html#buttons-constructor), чтобы выбрать внешний вид кнопки авторизации и скопировать код скрипта с нужными параметрами для вставки на страницу.

-
[LoginSDK](mobileauthsdk/about.html) — используется для организации входа пользователя в приложения для мобильных устройств.

Библиотеки LoginSDK позволяют подключить OAuth-авторизацию пользователей через аккаунты на Яндексе для платформ iOS и Android.

Существуют также способы получения токена с помощью API-запросов, но они не являются предпочтительными:

-
[Запрос OAuth-токена при помощи кода подтверждения](codes/code-and-token.html) — позволяет подключить авторизацию на различных платформах, включая консольные приложения и устройства мультимедиа, например Smart TV. При помощи кода подтверждения пользователь разрешает доступ на получение данных, которые хранятся в его профиле Яндекс ID.

-
[Использование отладочного токена](tokens/debug-token.html) — способ, применяемый на этапе разработки или тестирования приложения. Для получения отладочного токена не требуется код подтверждения.

Полученный токен можно сохранить в приложении и использовать для запросов к API до истечения [времени его жизни](concepts/ya-oauth-intro.html#ttl). Токен должен быть доступен только вашему приложению, поэтому не рекомендуется сохранять его в браузере или открытых конфигурационных файлах.

Виджет &quot;Мгновенный вход&quot; — это всплывающее окно на вашем сайте, в котором пользователь сможет выполнить вход со своей учетной записью на Яндексе.

-
Если пользователь авторизован:

-
Если пользователь не авторизован:

Кнопка авторизации — это элемент для быстрого входа в Яндекс ID в виде кнопки.

Вы можете разместить разные варианты кнопки на странице вашего сайта:

-
Персональная кнопка.
Внешний вид персональной кнопки зависит от того, выполнил ли пользователь вход в аккаунт на Яндексе на текущем устройстве.

Если пользователь авторизован:

-
Если пользователь не авторизован:

-
Кнопка-иконка с логотипом Яндекса.
Используется, если для обычной кнопки нет места. Блок, в котором будет размещена кнопка-иконка, подпишите &quot;Войти с помощью&quot;.

### Была ли статья полезна?
ДаНет

## codes/code-and-token.html

--------------------------------------------------------------------------------

**Заголовок:** Запрос OAuth-токена при помощи кода подтверждения | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](code-and-token.html)
[Получение кода подтверждения из URL ](code-url.html)
- [Получение кода подтверждения от пользователя ](screen-code.html)
- [Ввод кода на странице авторизации Яндекс OAuth ](screen-code-oauth.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Запрос OAuth-токена при помощи кода подтверждения- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- Альтернативный способ с кодом подтверждения

# Запрос OAuth-токена при помощи кода подтверждения
Если для получения OAuth-токена вы используете код подтверждения от пользователя, авторизация в приложении должна быть реализована в два этапа:

-
Получение кода подтверждения от пользователя и передача кода в Яндекс OAuth.

-
Обмен кода подтверждения на OAuth-токен в зависимости от способа получения кода подтверждения.

Совет

Если вы разрабатываете или тестируете приложение, вы можете использовать [отладочный токен](../tokens/debug-token.html). Для получения отладочного токена не требуется код подтверждения.

## [](code-and-token.html#get-code)Как получить код подтверждения

Чтобы запросить код подтверждения для обмена на OAuth-токен, выберите один из способов:

-
Если в приложении можно настроить автоматическое получение сведений из URL, получите код подтверждения из URL перенаправления:
[Получение кода подтверждения из URL](code-url.html)

-
Если в приложении сложно получить доступ к URL, запросите вывод кода на странице в браузере. Способ подходит для консольных приложений, когда пользователь имеет доступ к браузеру и может ввести с клавиатуры полученный код:
[Получение кода подтверждения от пользователя](screen-code.html)

-
Если на устройстве нет возможности использовать браузер или сложно вводить код, попросите пользователя ввести код на странице авторизации Яндекс OAuth. Способ подходит для приложений, которые запускаются на мультимедийных устройствах, например Smart TV:
[Ввод кода на странице авторизации Яндекс OAuth](screen-code-oauth.html)

### Была ли статья полезна?
ДаНет

## codes/code-url.html

--------------------------------------------------------------------------------

**Заголовок:** Получение кода подтверждения из URL | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](code-and-token.html)
[Получение кода подтверждения из URL ](code-url.html)
- [Получение кода подтверждения от пользователя ](screen-code.html)
- [Ввод кода на странице авторизации Яндекс OAuth ](screen-code-oauth.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Получение кода подтверждения из URL
## В этой статье:

- [Запрос кода подтверждения](code-url.html#code)
- [Формат запроса](code-url.html#code-request)
- [Формат ответа](code-url.html#code-response)
- [Обмен кода подтверждения на OAuth-токен](code-url.html#token)
- [Формат запроса](code-url.html#token-request)
- [Формат ответа](code-url.html#token-response)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Альтернативный способ с кодом подтверждения](code-and-token.html)
- Получение кода подтверждения из URL

# Получение кода подтверждения из URL

- [Запрос кода подтверждения](code-url.html#code)
[Формат запроса](code-url.html#code-request)
- [Формат ответа](code-url.html#code-response)

- [Обмен кода подтверждения на OAuth-токен](code-url.html#token)
[Формат запроса](code-url.html#token-request)
- [Формат ответа](code-url.html#token-response)

-
Чтобы пользователь подтвердил доступ к своим данным, настройте в приложении переход на страницу Яндекс OAuth. Для этого используйте [запрос для получения кода подтверждения из URL](code-url.html#code).

Когда пользователь разрешает приложению доступ к своим данным, Яндекс OAuth перенаправляет его в приложение на адрес, указанный в поле Redirect URI при [регистрации приложения](../register-client.html#platforms).

-
Код подтверждения возвращается в [URL перенаправления](code-url.html#code-response). Чтобы обменять код подтверждения на OAuth-токен, приложение должно отправить [POST-запрос](code-url.html#token).

Полученный токен можно сохранить в приложении и использовать для запросов к API до истечения [времени его жизни](../concepts/ya-oauth-intro.html#ttl). Токен должен быть доступен только вашему приложению, поэтому не рекомендуется сохранять его в браузере или открытых конфигурационных файлах.

Для дополнительной защиты ваших данных при передаче в запросах можно использовать параметры, которые поддерживает расширение [PKCE](https://datatracker.ietf.org/doc/html/rfc7636#section-4) протокола OAuth 2.0: случайную строку code_verifier и преобразованную версию этой строки code_challenge, а также данные о методе преобразования — code_challenge_method.

## [](code-url.html#code)Запрос кода подтверждения

### [](code-url.html#code-request)Формат запроса

https://oauth.yandex.ru/authorize?response_type=code
&amp; client_id=&lt;идентификатор приложения&gt;
[&amp; device_id=&lt;идентификатор устройства&gt;]
[&amp; device_name=&lt;имя устройства&gt;]
[&amp; redirect_uri=&lt;адрес перенаправления&gt;]
[&amp; login_hint=&lt;имя пользователя или электронный адрес&gt;]
[&amp; scope=&lt;запрашиваемые необходимые права&gt;]
[&amp; optional_scope=&lt;запрашиваемые опциональные права&gt;]
[&amp; force_confirm=yes]
[&amp; state=&lt;произвольная строка&gt;]
[&amp; code_challenge=&lt;преобразованная верcия верификатора code_verifier&gt;]
[&amp; code_challenge_method=&lt;метод преобразования&gt;]

#### [](code-url.html#required)Обязательные параметры

Параметр

Описание

response_type

Требуемый ответ. При запросе кода подтверждения следует указать значение code.

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

#### [](code-url.html#optional)Дополнительные параметры

Параметр

Описание

device_id

Уникальный идентификатор устройства, для которого запрашивается токен. Чтобы обеспечить уникальность, достаточно один раз сгенерировать [UUID](https://ru.wikipedia.org/wiki/UUID) и использовать его при каждом запросе нового токена с данного устройства.

Идентификатор должен быть не короче 6 символов и не длиннее 50. Допускается использовать только печатаемые [ASCII](https://ru.wikipedia.org/wiki/ASCII)-символы (с кодами от 32 до 126).

Подробнее о работе с токенами для отдельных устройств читайте на странице [Отзыв токена для устройства](../tokens/token-invalidate.html#device-token).

Если параметр device_id передан без параметра device_name, в пользовательском интерфейсе токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

device_name

Имя устройства, которое следует показывать пользователям. Не длиннее 100 символов.

Для мобильных устройств рекомендуется передавать имя устройства, заданное пользователем. Если такого имени нет, его можно собрать из модели устройства, названия и версии ОС и т. д.

Если параметр device_name передан без параметра device_id, он будет проигнорирован. Яндекс OAuth сможет выдать только обычный токен, не привязанный к устройству.

redirect_uri

URL, на который нужно перенаправить пользователя после того, как он разрешил приложению доступ. По умолчанию используется первый Redirect URI, указанный в настройках приложения (Платформы → Веб-сервисы → Redirect URI).

В значении параметра допустимо указывать только те адреса, которые перечислены в настройках приложения. Если совпадение неточное, параметр игнорируется.

login_hint

Явное указание аккаунта, для которого запрашивается токен. В значении параметра можно передавать логин аккаунта на Яндексе, а также адрес Яндекс Почты или Яндекс Почты для домена.

Параметр позволяет помочь пользователю авторизоваться на Яндексе с тем аккаунтом, к которому нужен доступ приложению. Получив параметр, Яндекс OAuth проверяет авторизацию пользователя:

- Если пользователь уже авторизован с нужным аккаунтом, Яндекс OAuth просто запрашивает разрешение на доступ.

- Если пользователь не авторизован с нужным аккаунтом, он увидит форму входа на Яндекс, в которой поле логина заполнено значением параметра. Помните, что токен не обязательно будет запрошен для указанного аккаунта: пользователь может стереть предзаполненный логин и войти с любым другим.

Если параметр указывает на несуществующий аккаунт, Яндекс OAuth сможет только сообщить об этом пользователю. Приложению придется запрашивать токен заново.

scope

Список прав доступа, необходимых приложению. Значения в списке разделяются пробелами.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Если параметры scope и optional_scope не переданы, то токен будет выдан с правами, указанными при регистрации приложения.

optional_scope

Опциональные права запрашиваются в дополнение к правам, указанным в параметре scope.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Пользователь может выбрать, какие из опциональных прав предоставить. Токен будет выдан с правами, указанными в параметре scope, и правами, выбранными пользователем из указанных в параметре optional_scope.

Параметр можно использовать, например, если приложению нужна электронная почта для регистрации пользователя, а доступ к портрету желателен, но не обязателен.

Примечание

Права доступа, запрошенные одновременно через параметр scope и через параметр optional_scope, будут считаться опциональными.

force_confirm

Признак того, что у пользователя обязательно нужно запросить разрешение на доступ к аккаунту (даже если пользователь уже разрешил доступ данному приложению). Получив этот параметр, Яндекс OAuth предложит пользователю разрешить доступ приложению и выбрать нужный аккаунт Яндекса.

Параметр полезен, например, если пользователь вошел на сайт с одним аккаунтом Яндекса и хочет переключиться на другой аккаунт. Если параметр не использовать, пользователю придется явно менять аккаунт на каком-нибудь сервисе Яндекса или отзывать токен, выданный сайту.

Параметр обрабатывается, если для него указано значение yes, true или 1. При любом другом значении параметр игнорируется.

state

Строка состояния, которую Яндекс OAuth возвращает без изменения. Максимальная допустимая длина строки — 1024 символа. Можно использовать, например, для защиты от [CSRF-атак](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D0%BB%D0%BA%D0%B0_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0) или идентификации пользователя, для которого запрашивается токен.

code_challenge

Версия верификатора code_verifier, преобразованная с помощью code_challenge_method. Применяется при использовании расширения PKCE для защиты передаваемых данных. Генерируется приложением для последующей проверки, что запрос токена поступает от того же приложения, которое запросило авторизацию.

code_challenge_method

Метод преобразования code_verifier в code_challenge. Возможные значения: S256 (предпочтительное) и plain (для случаев, когда невозможно использовать S256).

### [](code-url.html#code-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

http://www.example.com/token?code=&lt;код подтверждения&gt;
[&amp; state=&lt;значение параметра state в запросе&gt;]

Параметры ответа:

Свойство

Описание

code

Код подтверждения, который можно обменять на OAuth-токен.

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

state

Строка состояния, которую Яндекс OAuth возвращает без изменения. Максимальная допустимая длина строки — 1024 символа. Можно использовать, например, для защиты от [CSRF-атак](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D0%BB%D0%BA%D0%B0_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0) или идентификации пользователя, для которого запрашивается токен.

Если код подтверждения выдать не удалось, то Яндекс OAuth указывает в URL код ошибки и ее описание.

http://www.example.com/token?error=&lt;код ошибки&gt;
&amp; error_description=&lt;описание ошибки&gt;
[&amp; state=&lt;значение параметра state в запросе&gt;]

Возможные коды ошибок:

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

## [](code-url.html#token)Обмен кода подтверждения на OAuth-токен

### [](code-url.html#token-request)Формат запроса

POST /token HTTP/1.1
Host: https://oauth.yandex.ru/
Content-type: application/x-www-form-urlencoded
Content-Length: &lt;длина тела запроса&gt;
[Authorization: Basic &lt;закодированная методом base64 строка `client_id:client_secret`&gt;]

grant_type=authorization_code
&amp; code=&lt;код подтверждения&gt;
[&amp; client_id=&lt;идентификатор приложения&gt;]
[&amp; client_secret=&lt;секретный ключ&gt;]
[&amp; device_id=&lt;идентификатор устройства&gt;]
[&amp; device_name=&lt;имя устройства&gt;]
[&amp; code_verifier=&lt;верификатор&gt;]

#### [](code-url.html#obyazatelnye-parametry)Обязательные параметры

Параметр

Описание

grant_type

Способ запроса OAuth-токена.

Если вы используете код подтверждения, укажите значение authorization_code.

code

Код подтверждения, полученный от Яндекс OAuth.

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

#### [](code-url.html#dopolnitelnye-parametry)Дополнительные параметры

Параметр

Описание

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](code-url.html#auth-header).

client_secret

Секретный ключ. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](code-url.html#auth-header).

Если для защиты данных применяется расширение PKCE и в запросе передается параметр code_verifier, то секретный ключ передавать не требуется.

device_id

Уникальный идентификатор устройства, для которого запрашивается токен. Чтобы обеспечить уникальность, достаточно один раз сгенерировать [UUID](https://ru.wikipedia.org/wiki/UUID) и использовать его при каждом запросе нового токена с данного устройства.

Идентификатор должен быть не короче 6 символов и не длиннее 50. Допускается использовать только печатаемые [ASCII](https://ru.wikipedia.org/wiki/ASCII)-символы (с кодами от 32 до 126).

Подробнее о работе с токенами для отдельных устройств читайте на странице [Отзыв токена для устройства](../tokens/token-invalidate.html#device-token).

Если параметр device_id передан без параметра device_name, в пользовательском интерфейсе токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

device_name

Имя устройства, которое следует показывать пользователям. Не длиннее 100 символов.

Для мобильных устройств рекомендуется передавать имя устройства, заданное пользователем. Если такого имени нет, его можно собрать из модели устройства, названия и версии ОС и т. д.

Если параметр device_name передан без параметра device_id, он будет проигнорирован. Яндекс OAuth сможет выдать только обычный токен, не привязанный к устройству.

code_verifier

Верификатор, обеспечивающий защиту передаваемых данных. Параметр применяется при использовании расширения PKCE. Представляет собой случайную строку, сгенерированную приложением, на основании которой формируется code_challenge. Сервер преобразует code_verifier методом code_challenge_method, полученным в [запросе на отправку кода подтверждения](code-url.html#code), и сверяет результат с code_challenge из того же запроса.

Параметры запроса должны передаваться в теле запроса и должны быть закодированы в urlencode.

Примечание

Чтобы передать идентификатор и секретный ключ в заголовке Authorization, закодируйте строку &lt;client_id&gt;:&lt;client_secret&gt; методом base64.

Если Яндекс OAuth получает заголовок Authorization, параметры client_id и client_secret в теле запроса игнорируются.

### [](code-url.html#token-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth возвращает OAuth-токен, refresh-токен и время их жизни в JSON-формате:

200 OK
Content-type: application/json

{
&quot;token_type&quot;: &quot;bearer&quot;,
&quot;access_token&quot;: &quot;AQAAAACy1C6ZAAAAfa6vDLuItEy8pg-iIpnDxIs&quot;,
&quot;expires_in&quot;: 124234123534,
&quot;refresh_token&quot;: &quot;1:GN686QVt0mmakDd9:A4pYuW9LGk0_UnlrMIWklkAuJkUWbq27loFekJVmSYrdfzdePBy7:A-2dHOmBxiXgajnD-kYOwQ&quot;,
&quot;scope&quot;: &quot;login:info login:email login:avatar&quot;
}

Параметры ответа:

Свойство

Описание

token_type

Тип выданного токена. Всегда принимает значение bearer.

access_token

OAuth-токен с правами, которые вы запросили или указали при [регистрации приложения](../register-client.html#access).

expires_in

[Время жизни](../concepts/ya-oauth-intro.html#ttl) токена в секундах.

refresh_token

Токен, который можно использовать для [продления срока жизни](../tokens/refresh-client.html) соответствующего OAuth-токена. [Время жизни](../concepts/ya-oauth-intro.html#ttl) refresh-токена совпадает с временем жизни OAuth-токена.

scope

Права, запрошенные разработчиком или указанные при [регистрации приложения](../register-client.html#access). Поле scope является дополнительным и возвращается, если OAuth предоставил токен с меньшим набором прав, чем было запрошено.

Если выдать токен не удалось, ответ содержит описание ошибки:

{
&quot;error_description&quot;: &quot;&lt;описание ошибки&gt;&quot;,
&quot;error&quot;: &quot;&lt;код ошибки&gt;&quot;
}

Возможные коды ошибок:

-
authorization_pending — пользователь еще не ввел код подтверждения.

-
bad_verification_code — переданное значение параметра code не является 7-значным числом.

-
invalid_client ― приложение с указанным идентификатором (параметр client_id) не найдено или заблокировано. Этот код также возвращается, если в параметре client_secret передан неверный секретный ключ.

-
invalid_grant — неверный или просроченный код подтверждения.

-
invalid_request ― неверный формат запроса (один из параметров не указан, указан дважды, или передан не в теле запроса).

-
invalid_scope — права приложения изменились после генерации кода подтверждения.

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

-
unsupported_grant_type ― недопустимое значение параметра grant_type.

-
Basic auth required — тип авторизации, указанный в заголовке Authorization, отличен от Basic.

-
Malformed Authorization header — заголовок Authorization не соответствует формату &lt;client_id&gt;:&lt;client_secret&gt;, или эта строка не закодирована методом base64.

### Была ли статья полезна?
ДаНет

## codes/screen-code-oauth.html

--------------------------------------------------------------------------------

**Заголовок:** Ввод кода на странице авторизации Яндекс OAuth | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](code-and-token.html)
[Получение кода подтверждения из URL ](code-url.html)
- [Получение кода подтверждения от пользователя ](screen-code.html)
- [Ввод кода на странице авторизации Яндекс OAuth ](screen-code-oauth.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Ввод кода на странице авторизации Яндекс OAuth
## В этой статье:

- [Запрос кодов подтверждения](screen-code-oauth.html#code)
- [Формат запроса](screen-code-oauth.html#code-request)
- [Формат ответа](screen-code-oauth.html#code-response)
- [Обмен кода подтверждения на OAuth-токен](screen-code-oauth.html#token)
- [Формат запроса](screen-code-oauth.html#token-request)
- [Формат ответа](screen-code-oauth.html#token-response)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Альтернативный способ с кодом подтверждения](code-and-token.html)
- Ввод кода на странице авторизации Яндекс OAuth

# Ввод кода на странице авторизации Яндекс OAuth

- [Запрос кодов подтверждения](screen-code-oauth.html#code)
[Формат запроса](screen-code-oauth.html#code-request)
- [Формат ответа](screen-code-oauth.html#code-response)

- [Обмен кода подтверждения на OAuth-токен](screen-code-oauth.html#token)
[Формат запроса](screen-code-oauth.html#token-request)
- [Формат ответа](screen-code-oauth.html#token-response)

На некоторых устройствах (например, на телевизорах) вводить код подтверждения в приложении может быть неудобно. В этом случае можно предложить пользователю ввести код на странице авторизации Яндекс OAuth:

-
Чтобы пользователь подтвердил доступ к своим данным, настройте в приложении запрос для двух кодов: device_code для устройства и user_code для пользователя. Для этого используйте [запрос кодов подтверждения](screen-code-oauth.html#code).

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

-
После [получения кодов](screen-code-oauth.html#code-response) приложение одновременно:

предлагает пользователю ввести user_code на странице [Авторизация на устройстве](https://oauth.yandex.ru/device);

-
начинает периодически [запрашивать OAuth-токен](screen-code-oauth.html#token), передавая device_code.

-
Если код введен корректно, Яндекс OAuth предложит разрешить или запретить доступ приложению. Яндекс OAuth возвращает токен в ответ на следующий запрос приложения.

## [](screen-code-oauth.html#code)Запрос кодов подтверждения

### [](screen-code-oauth.html#code-request)Формат запроса

Приложение должно запросить коды подтверждения с помощью HTTP-метода POST:

POST /device/code
Host: https://oauth.yandex.ru/

&amp; client_id=&lt;идентификатор приложения&gt;
[&amp; device_id=&lt;идентификатор устройства&gt;]
[&amp; device_name=&lt;имя устройства&gt;]
[&amp; scope=&lt;запрашиваемые необходимые права&gt;]
[&amp; optional_scope=&lt;запрашиваемые опциональные права&gt;]

#### [](screen-code-oauth.html#obyazatelnye-parametry)Обязательные параметры

Параметр

Описание

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

#### [](screen-code-oauth.html#dopolnitelnye-parametry)Дополнительные параметры

Параметр

Описание

device_id

Уникальный идентификатор устройства, для которого запрашивается токен. Чтобы обеспечить уникальность, достаточно один раз сгенерировать [UUID](https://ru.wikipedia.org/wiki/UUID) и использовать его при каждом запросе нового токена с данного устройства.

Идентификатор должен быть не короче 6 символов и не длиннее 50. Допускается использовать только печатаемые [ASCII](https://ru.wikipedia.org/wiki/ASCII)-символы (с кодами от 32 до 126).

Подробнее о работе с токенами для отдельных устройств читайте на странице [Отзыв токена для устройства](../tokens/token-invalidate.html#device-token).

Если параметр device_id передан без параметра device_name, в пользовательском интерфейсе токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

device_name

Имя устройства, которое следует показывать пользователям. Не длиннее 100 символов.

Для мобильных устройств рекомендуется передавать имя устройства, заданное пользователем. Если такого имени нет, его можно собрать из модели устройства, названия и версии ОС и т. д.

Если параметр device_name передан без параметра device_id, он будет проигнорирован. Яндекс OAuth сможет выдать только обычный токен, не привязанный к устройству.

scope

Список прав доступа, необходимых приложению. Значения в списке разделяются пробелами.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Если параметры scope и optional_scope не переданы, то токен будет выдан с правами, указанными при регистрации приложения.

optional_scope

Опциональные права запрашиваются в дополнение к правам, указанным в параметре scope.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Пользователь может выбрать, какие из опциональных прав предоставить. Токен будет выдан с правами, указанными в параметре scope, и правами, выбранными пользователем из указанных в параметре optional_scope.

Параметр можно использовать, например, если приложению нужна электронная почта для регистрации пользователя, а доступ к портрету желателен, но не обязателен.

Примечание

Права доступа, запрошенные одновременно через параметр scope и через параметр optional_scope, будут считаться опциональными.

### [](screen-code-oauth.html#code-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth возвращает код для пользователя и информацию для запроса токена:

200 OK

Content-type: application/json

{
&quot;device_code&quot;: &quot;3e2a5a5c0e02439aa78a23442721848c&quot;,
&quot;user_code&quot;: &quot;h5nbcr6c&quot;,
&quot;verification_url&quot;: &quot;https://oauth.yandex.ru/device&quot;,
&quot;interval&quot;: 5,
&quot;expires_in&quot;: 300
}

Параметры ответа:

Свойство

Описание

device_code

Код, с которым следует [запрашивать OAuth-токен](screen-code-oauth.html#token-request).

user_code

Код, который должен ввести пользователь, чтобы разрешить доступ к своим данным.

verification_url

Адрес страницы, на которой пользователь должен ввести код из свойства user_code: https://oauth.yandex.ru/device.

interval

Минимальный интервал в секундах, с которым приложение должно запрашивать OAuth-токен. Если запросы будут приходить чаще, Яндекс OAuth может ответить ошибкой.

expires_in

Срок действия пары кодов в секундах. По истечению этого срока получить токен для них будет невозможно — нужно будет начать процедуру сначала.

Если выдать токен не удалось, ответ содержит описание ошибки:

{
&quot;error_description&quot;: &quot;&lt;описание ошибки&gt;&quot;,
&quot;error&quot;: &quot;&lt;код ошибки&gt;&quot;
}

Возможные коды ошибок:

-
invalid_client ― приложение с указанным идентификатором (параметр client_id) не найдено или заблокировано. Этот код также возвращается, если в параметре client_secret передан неверный секретный ключ.

-
invalid_request ― неверный формат запроса (один из параметров не указан, указан дважды, или передан не в теле запроса).

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

-
Basic auth required — тип авторизации, указанный в заголовке Authorization, отличен от Basic.

-
Malformed Authorization header — заголовок Authorization не соответствует формату &lt;client_id&gt;:&lt;client_secret&gt;, или эта строка не закодирована методом base64.

## [](screen-code-oauth.html#token)Обмен кода подтверждения на OAuth-токен

### [](screen-code-oauth.html#token-request)Формат запроса

Приложение отправляет код устройства, а также свой идентификатор и пароль в POST-запросе.

POST /token HTTP/1.1
Host: https://oauth.yandex.ru/
Content-type: application/x-www-form-urlencoded
Content-Length: &lt;длина тела запроса&gt;
[Authorization: Basic &lt;закодированная строка `client_id:client_secret`&gt;]

grant_type=device_code
&amp; code=&lt;код устройства&gt;
[&amp; client_id=&lt;идентификатор приложения&gt;]
[&amp; client_secret=&lt;секретный ключ&gt;]

#### [](screen-code-oauth.html#obyazatelnye-parametry1)Обязательные параметры

Параметр

Описание

grant_type

Способ запроса OAuth-токена.

Если вы используете код подтверждения для устройства, укажите значение device_code.

code

Код из параметра device_code, полученный на этапе [запроса кодов подтверждения](screen-code-oauth.html#code-response).

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

#### [](screen-code-oauth.html#dopolnitelnye-parametry1)Дополнительные параметры

Параметр

Описание

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](screen-code-oauth.html#auth-header).

client_secret

Секретный ключ. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](screen-code-oauth.html#auth-header).

Параметры запроса должны передаваться в теле запроса и должны быть закодированы в urlencode.

Примечание

Чтобы передать идентификатор и секретный ключ в заголовке Authorization, закодируйте строку &lt;client_id&gt;:&lt;client_secret&gt; методом base64.

Если Яндекс OAuth получает заголовок Authorization, параметры client_id и client_secret в теле запроса игнорируются.

### [](screen-code-oauth.html#token-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth возвращает OAuth-токен, refresh-токен и время их жизни в JSON-формате:

200 OK
Content-type: application/json

{
&quot;token_type&quot;: &quot;bearer&quot;,
&quot;access_token&quot;: &quot;AQAAAACy1C6ZAAAAfa6vDLuItEy8pg-iIpnDxIs&quot;,
&quot;expires_in&quot;: 124234123534,
&quot;refresh_token&quot;: &quot;1:GN686QVt0mmakDd9:A4pYuW9LGk0_UnlrMIWklkAuJkUWbq27loFekJVmSYrdfzdePBy7:A-2dHOmBxiXgajnD-kYOwQ&quot;,
&quot;scope&quot;: &quot;login:info login:email login:avatar&quot;
}

Параметры ответа:

Свойство

Описание

token_type

Тип выданного токена. Всегда принимает значение bearer.

access_token

OAuth-токен с правами, которые вы запросили или указали при [регистрации приложения](../register-client.html#access).

expires_in

[Время жизни](../concepts/ya-oauth-intro.html#ttl) токена в секундах.

refresh_token

Токен, который можно использовать для [продления срока жизни](../tokens/refresh-client.html) соответствующего OAuth-токена. [Время жизни](../concepts/ya-oauth-intro.html#ttl) refresh-токена совпадает с временем жизни OAuth-токена.

scope

Права, запрошенные разработчиком или указанные при [регистрации приложения](../register-client.html#access). Поле scope является дополнительным и возвращается, если OAuth предоставил токен с меньшим набором прав, чем было запрошено.

Если выдать токен не удалось, ответ содержит описание ошибки:

{
&quot;error_description&quot;: &quot;&lt;описание ошибки&gt;&quot;,
&quot;error&quot;: &quot;&lt;код ошибки&gt;&quot;
}

Возможные коды ошибок:

-
authorization_pending — пользователь еще не ввел код подтверждения.

-
bad_verification_code — переданное значение параметра code не является 7-значным числом.

-
invalid_client ― приложение с указанным идентификатором (параметр client_id) не найдено или заблокировано. Этот код также возвращается, если в параметре client_secret передан неверный секретный ключ.

-
invalid_grant — неверный или просроченный код подтверждения.

-
invalid_request ― неверный формат запроса (один из параметров не указан, указан дважды, или передан не в теле запроса).

-
invalid_scope — права приложения изменились после генерации кода подтверждения.

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

-
unsupported_grant_type ― недопустимое значение параметра grant_type.

-
Basic auth required — тип авторизации, указанный в заголовке Authorization, отличен от Basic.

-
Malformed Authorization header — заголовок Authorization не соответствует формату &lt;client_id&gt;:&lt;client_secret&gt;, или эта строка не закодирована методом base64.

### Была ли статья полезна?
ДаНет

## codes/screen-code.html

--------------------------------------------------------------------------------

**Заголовок:** Получение кода подтверждения от пользователя | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](code-and-token.html)
[Получение кода подтверждения из URL ](code-url.html)
- [Получение кода подтверждения от пользователя ](screen-code.html)
- [Ввод кода на странице авторизации Яндекс OAuth ](screen-code-oauth.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Получение кода подтверждения от пользователя
## В этой статье:

- [Запрос кода подтверждения](screen-code.html#code)
- [Формат запроса](screen-code.html#code-request)
- [Формат ответа](screen-code.html#code-response)
- [Обмен кода подтверждения на OAuth-токен](screen-code.html#token)
- [Формат запроса](screen-code.html#token-request)
- [Формат ответа](screen-code.html#token-response)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Альтернативный способ с кодом подтверждения](code-and-token.html)
- Получение кода подтверждения от пользователя

# Получение кода подтверждения от пользователя

- [Запрос кода подтверждения](screen-code.html#code)
[Формат запроса](screen-code.html#code-request)
- [Формат ответа](screen-code.html#code-response)

- [Обмен кода подтверждения на OAuth-токен](screen-code.html#token)
[Формат запроса](screen-code.html#token-request)
- [Формат ответа](screen-code.html#token-response)

Некоторые приложения (например, консольные) не могут [получить код подтверждения из URL](code-url.html). В этом случае пользователь должен самостоятельно получить код от Яндекс OAuth и ввести его в приложении:

-
Чтобы пользователь подтвердил доступ к своим данным, настройте в приложении переход на страницу Яндекс OAuth. Для этого используйте [запрос для вывода кода подтверждения](screen-code.html#code).

Совет

Если на устройстве, где установлено приложение, недоступен браузер, пользователю придется перейти по нужному адресу на своем компьютере. Чтобы вводить адрес было удобнее, предоставьте пользователю QR-код или короткую ссылку.

-
Код подтверждения [отобразится в браузере](screen-code.html#code-response). Для этого в свойстве приложения Redirect URI при [регистрации приложения](../register-client.html#platforms) нужно указать адрес https://oauth.yandex.ru/verification_code.

-
Чтобы обменять код подтверждения на OAuth-токен, приложение должно отправить [POST-запрос](screen-code.html#token).

Полученный токен можно сохранить в приложении и использовать для запросов к API до истечения [времени его жизни](../concepts/ya-oauth-intro.html#ttl). Токен должен быть доступен только вашему приложению, поэтому не рекомендуется сохранять его в браузере или открытых конфигурационных файлах.

## [](screen-code.html#code)Запрос кода подтверждения

### [](screen-code.html#code-request)Формат запроса

https://oauth.yandex.ru/authorize?response_type=code
&amp; client_id=&lt;идентификатор приложения&gt;
[&amp; device_id=&lt;идентификатор устройства&gt;]
[&amp; device_name=&lt;имя устройства&gt;]
[&amp; redirect_uri=&lt;адрес перенаправления&gt;]
[&amp; login_hint=&lt;имя пользователя или электронный адрес&gt;]
[&amp; scope=&lt;запрашиваемые необходимые права&gt;]
[&amp; optional_scope=&lt;запрашиваемые опциональные права&gt;]
[&amp; force_confirm=yes]
[&amp; state=&lt;произвольная строка&gt;]
[&amp; code_challenge=&lt;преобразованная верcия верификатора code_verifier&gt;]
[&amp; code_challenge_method=&lt;метод преобразования&gt;]

#### [](screen-code.html#required)Обязательные параметры

Параметр

Описание

response_type

Требуемый ответ. При запросе кода подтверждения следует указать значение code.

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

#### [](screen-code.html#optional)Дополнительные параметры

Параметр

Описание

device_id

Уникальный идентификатор устройства, для которого запрашивается токен. Чтобы обеспечить уникальность, достаточно один раз сгенерировать [UUID](https://ru.wikipedia.org/wiki/UUID) и использовать его при каждом запросе нового токена с данного устройства.

Идентификатор должен быть не короче 6 символов и не длиннее 50. Допускается использовать только печатаемые [ASCII](https://ru.wikipedia.org/wiki/ASCII)-символы (с кодами от 32 до 126).

Подробнее о работе с токенами для отдельных устройств читайте на странице [Отзыв токена для устройства](../tokens/token-invalidate.html#device-token).

Если параметр device_id передан без параметра device_name, в пользовательском интерфейсе токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

device_name

Имя устройства, которое следует показывать пользователям. Не длиннее 100 символов.

Для мобильных устройств рекомендуется передавать имя устройства, заданное пользователем. Если такого имени нет, его можно собрать из модели устройства, названия и версии ОС и т. д.

Если параметр device_name передан без параметра device_id, он будет проигнорирован. Яндекс OAuth сможет выдать только обычный токен, не привязанный к устройству.

redirect_uri

URL, на который нужно перенаправить пользователя после того, как он разрешил приложению доступ. По умолчанию используется первый Redirect URI, указанный в настройках приложения (Платформы → Веб-сервисы → Redirect URI).

В значении параметра допустимо указывать только те адреса, которые перечислены в настройках приложения. Если совпадение неточное, параметр игнорируется.

login_hint

Явное указание аккаунта, для которого запрашивается токен. В значении параметра можно передавать логин аккаунта на Яндексе, а также адрес Яндекс Почты или Яндекс Почты для домена.

Параметр позволяет помочь пользователю авторизоваться на Яндексе с тем аккаунтом, к которому нужен доступ приложению. Получив параметр, Яндекс OAuth проверяет авторизацию пользователя:

- Если пользователь уже авторизован с нужным аккаунтом, Яндекс OAuth просто запрашивает разрешение на доступ.

- Если пользователь не авторизован с нужным аккаунтом, он увидит форму входа на Яндекс, в которой поле логина заполнено значением параметра. Помните, что токен не обязательно будет запрошен для указанного аккаунта: пользователь может стереть предзаполненный логин и войти с любым другим.

Если параметр указывает на несуществующий аккаунт, Яндекс OAuth сможет только сообщить об этом пользователю. Приложению придется запрашивать токен заново.

scope

Список прав доступа, необходимых приложению. Значения в списке разделяются пробелами.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Если параметры scope и optional_scope не переданы, то токен будет выдан с правами, указанными при регистрации приложения.

optional_scope

Опциональные права запрашиваются в дополнение к правам, указанным в параметре scope.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Пользователь может выбрать, какие из опциональных прав предоставить. Токен будет выдан с правами, указанными в параметре scope, и правами, выбранными пользователем из указанных в параметре optional_scope.

Параметр можно использовать, например, если приложению нужна электронная почта для регистрации пользователя, а доступ к портрету желателен, но не обязателен.

Примечание

Права доступа, запрошенные одновременно через параметр scope и через параметр optional_scope, будут считаться опциональными.

force_confirm

Признак того, что у пользователя обязательно нужно запросить разрешение на доступ к аккаунту (даже если пользователь уже разрешил доступ данному приложению). Получив этот параметр, Яндекс OAuth предложит пользователю разрешить доступ приложению и выбрать нужный аккаунт Яндекса.

Параметр полезен, например, если пользователь вошел на сайт с одним аккаунтом Яндекса и хочет переключиться на другой аккаунт. Если параметр не использовать, пользователю придется явно менять аккаунт на каком-нибудь сервисе Яндекса или отзывать токен, выданный сайту.

Параметр обрабатывается, если для него указано значение yes, true или 1. При любом другом значении параметр игнорируется.

state

Строка состояния, которую Яндекс OAuth возвращает без изменения. Максимальная допустимая длина строки — 1024 символа. Можно использовать, например, для защиты от [CSRF-атак](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B6%D1%81%D0%B0%D0%B9%D1%82%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BF%D0%BE%D0%B4%D0%B4%D0%B5%D0%BB%D0%BA%D0%B0_%D0%B7%D0%B0%D0%BF%D1%80%D0%BE%D1%81%D0%B0) или идентификации пользователя, для которого запрашивается токен.

code_challenge

Версия верификатора code_verifier, преобразованная с помощью code_challenge_method. Применяется при использовании расширения PKCE для защиты передаваемых данных. Генерируется приложением для последующей проверки, что запрос токена поступает от того же приложения, которое запросило авторизацию.

code_challenge_method

Метод преобразования code_verifier в code_challenge. Возможные значения: S256 (предпочтительное) и plain (для случаев, когда невозможно использовать S256).

### [](screen-code.html#code-response)Формат ответа

Когда пользователь разрешает доступ к своим данным, Яндекс OAuth отобразит код подтверждения:

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

## [](screen-code.html#token)Обмен кода подтверждения на OAuth-токен

### [](screen-code.html#token-request)Формат запроса

POST /token HTTP/1.1
Host: https://oauth.yandex.ru/
Content-type: application/x-www-form-urlencoded
Content-Length: &lt;длина тела запроса&gt;
[Authorization: Basic &lt;закодированная методом base64 строка `client_id:client_secret`&gt;]

grant_type=authorization_code
&amp; code=&lt;код подтверждения&gt;
[&amp; client_id=&lt;идентификатор приложения&gt;]
[&amp; client_secret=&lt;секретный ключ&gt;]
[&amp; device_id=&lt;идентификатор устройства&gt;]
[&amp; device_name=&lt;имя устройства&gt;]
[&amp; code_verifier=&lt;верификатор&gt;]

#### [](screen-code.html#obyazatelnye-parametry)Обязательные параметры

Параметр

Описание

grant_type

Способ запроса OAuth-токена.

Если вы используете код подтверждения, укажите значение authorization_code.

code

Код подтверждения, полученный от Яндекс OAuth.

Время жизни предоставленного кода — 10 минут. По истечении этого времени код нужно запросить заново.

#### [](screen-code.html#dopolnitelnye-parametry)Дополнительные параметры

Параметр

Описание

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](screen-code.html#auth-header).

client_secret

Секретный ключ. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](screen-code.html#auth-header).

Если для защиты данных применяется расширение PKCE и в запросе передается параметр code_verifier, то секретный ключ передавать не требуется.

device_id

Уникальный идентификатор устройства, для которого запрашивается токен. Чтобы обеспечить уникальность, достаточно один раз сгенерировать [UUID](https://ru.wikipedia.org/wiki/UUID) и использовать его при каждом запросе нового токена с данного устройства.

Идентификатор должен быть не короче 6 символов и не длиннее 50. Допускается использовать только печатаемые [ASCII](https://ru.wikipedia.org/wiki/ASCII)-символы (с кодами от 32 до 126).

Подробнее о работе с токенами для отдельных устройств читайте на странице [Отзыв токена для устройства](../tokens/token-invalidate.html#device-token).

Если параметр device_id передан без параметра device_name, в пользовательском интерфейсе токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

device_name

Имя устройства, которое следует показывать пользователям. Не длиннее 100 символов.

Для мобильных устройств рекомендуется передавать имя устройства, заданное пользователем. Если такого имени нет, его можно собрать из модели устройства, названия и версии ОС и т. д.

Если параметр device_name передан без параметра device_id, он будет проигнорирован. Яндекс OAuth сможет выдать только обычный токен, не привязанный к устройству.

code_verifier

Верификатор, обеспечивающий защиту передаваемых данных. Параметр применяется при использовании расширения PKCE. Представляет собой случайную строку, сгенерированную приложением, на основании которой формируется code_challenge. Сервер преобразует code_verifier методом code_challenge_method, полученным в [запросе на отправку кода подтверждения](code-url.html#code), и сверяет результат с code_challenge из того же запроса.

Параметры запроса должны передаваться в теле запроса и должны быть закодированы в urlencode.

Примечание

Чтобы передать идентификатор и секретный ключ в заголовке Authorization, закодируйте строку &lt;client_id&gt;:&lt;client_secret&gt; методом base64.

Если Яндекс OAuth получает заголовок Authorization, параметры client_id и client_secret в теле запроса игнорируются.

### [](screen-code.html#token-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth возвращает OAuth-токен, refresh-токен и время их жизни в JSON-формате:

200 OK
Content-type: application/json

{
&quot;token_type&quot;: &quot;bearer&quot;,
&quot;access_token&quot;: &quot;AQAAAACy1C6ZAAAAfa6vDLuItEy8pg-iIpnDxIs&quot;,
&quot;expires_in&quot;: 124234123534,
&quot;refresh_token&quot;: &quot;1:GN686QVt0mmakDd9:A4pYuW9LGk0_UnlrMIWklkAuJkUWbq27loFekJVmSYrdfzdePBy7:A-2dHOmBxiXgajnD-kYOwQ&quot;,
&quot;scope&quot;: &quot;login:info login:email login:avatar&quot;
}

Параметры ответа:

Свойство

Описание

token_type

Тип выданного токена. Всегда принимает значение bearer.

access_token

OAuth-токен с правами, которые вы запросили или указали при [регистрации приложения](../register-client.html#access).

expires_in

[Время жизни](../concepts/ya-oauth-intro.html#ttl) токена в секундах.

refresh_token

Токен, который можно использовать для [продления срока жизни](../tokens/refresh-client.html) соответствующего OAuth-токена. [Время жизни](../concepts/ya-oauth-intro.html#ttl) refresh-токена совпадает с временем жизни OAuth-токена.

scope

Права, запрошенные разработчиком или указанные при [регистрации приложения](../register-client.html#access). Поле scope является дополнительным и возвращается, если OAuth предоставил токен с меньшим набором прав, чем было запрошено.

Если выдать токен не удалось, ответ содержит описание ошибки:

{
&quot;error_description&quot;: &quot;&lt;описание ошибки&gt;&quot;,
&quot;error&quot;: &quot;&lt;код ошибки&gt;&quot;
}

Возможные коды ошибок:

-
authorization_pending — пользователь еще не ввел код подтверждения.

-
bad_verification_code — переданное значение параметра code не является 7-значным числом.

-
invalid_client ― приложение с указанным идентификатором (параметр client_id) не найдено или заблокировано. Этот код также возвращается, если в параметре client_secret передан неверный секретный ключ.

-
invalid_grant — неверный или просроченный код подтверждения.

-
invalid_request ― неверный формат запроса (один из параметров не указан, указан дважды, или передан не в теле запроса).

-
invalid_scope — права приложения изменились после генерации кода подтверждения.

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

-
unsupported_grant_type ― недопустимое значение параметра grant_type.

-
Basic auth required — тип авторизации, указанный в заголовке Authorization, отличен от Basic.

-
Malformed Authorization header — заголовок Authorization не соответствует формату &lt;client_id&gt;:&lt;client_secret&gt;, или эта строка не закодирована методом base64.

### Была ли статья полезна?
ДаНет

## concepts/glossary.html

--------------------------------------------------------------------------------

**Заголовок:** Термины | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](ya-oauth-intro.html)
- [Глоссарий ](glossary.html)
- [Обратная связь ](../feedback.html)

Термины
## В этой статье:

- [В](glossary.html#v)
- [З](glossary.html#z)
- [К](glossary.html#k)
- [М](glossary.html#m)
- [О](glossary.html#o)
- [C](glossary.html#c)
- [H](glossary.html#h)
- [L](glossary.html#l)
- [O](glossary.html#o1)
- [R](glossary.html#r)

# Термины

- [В](glossary.html#v)
- [З](glossary.html#z)
- [К](glossary.html#k)
- [М](glossary.html#m)
- [О](glossary.html#o)
- [C](glossary.html#c)
- [H](glossary.html#h)
- [L](glossary.html#l)
- [O](glossary.html#o1)
- [R](glossary.html#r)

## [](glossary.html#v)В

#### [](glossary.html#verifikaciya-servisa)Верификация сервиса

Подтверждение вашего аккаунта на Госуслугах. Если ваш аккаунт не подтвержден, пользователи вашего сервиса увидят уведомление об этом, прежде чем дать сервису доступ к своим данным.

Подтвержденный аккаунт дает следующие преимущества:

- Доступ к [технической поддержке Яндекс OAuth](../feedback.html).

- Возможность [регистрации](../register-client.html) более 5 приложений.

- Доступ к дополнительной информации о пользователе.

- Возможность подключиться к другим API Яндекса.

## [](glossary.html#z)З

#### [](glossary.html#scopes)Запрашиваемые права

Действие или набор действий от имени пользователя, которые доступны по протоколу OAuth.

Яндекс OAuth всегда указывает в токенах права, выбранные разработчиком при [регистрации](../register-client.html#access) или настройке приложения. Для одного и того же OAuth-приложения нельзя одновременно получить два работающих токена с различными правами.

## [](glossary.html#k)К

#### [](glossary.html#kod-dlya-polucheniya-tokena)[Код для получения токена](../codes/code-and-token.html)

Строка из 16 символов, получаемая от пользователя и обмениваемая на OAuth-токен для авторизации. Подробнее о протоколе OAuth 2.0 читайте [по ссылке](https://datatracker.ietf.org/doc/html/rfc6749).

## [](glossary.html#m)М

#### [](glossary.html#mgnovennaya-avtorizaciya)[Мгновенная авторизация](../suggest-description.html)

Технология авторизации, позволяющая войти в приложение с помощью аккаунта на Яндексе:

- Если пользователь уже выполнил вход в аккаунт на Яндексе на текущем устройстве, виджет или кнопка отобразит его портрет и имя, чтобы продолжить авторизацию на вашем сайте с помощью аккаунта на Яндексе через виджет или кастомную кнопку.

- Если пользователь еще не выполнил вход в аккаунт на Яндексе, он сможет авторизоваться при переходе по кнопке или виджету.

## [](glossary.html#o)О

#### [](glossary.html#otladochnyj-token)[Отладочный токен](../tokens/debug-token.html)

Токен, позволяющий проверить работу приложения. Его можно получить, открыв [Яндекс OAuth](https://oauth.yandex.ru/) в браузере с нужными параметрами. Отладочный токен можно отозвать.

## [](glossary.html#c)C

#### [](glossary.html#client-id)Client ID

Уникальный идентификатор приложения. Идентификатор нельзя изменить.

#### [](glossary.html#client-secret)Client Secret

Секретный ключ приложения, которым будет подписан [jwt-токен](../tokens/jwt.html) с информацией о пользователе.

Чтобы получить новое значение секретного ключа, нажмите кнопку Обновить Client secret в личном кабинете OAuth. Вы можете использовать функцию обновления ключа, если необходимо ограничить доступ к приложению в Яндекс OAuth: после обновления старый ключ перестанет работать.

## [](glossary.html#h)H

#### [](glossary.html#hostname)Hostname

Адрес страницы, на которой размещается кнопка или виджет.

## [](glossary.html#l)L

#### [](glossary.html#loginsdk)LoginSDK

Библиотеки для платформ iOS и Android, позволяющие сторонним мобильным приложениям подключить OAuth-авторизацию пользователей через аккаунты на Яндексе.

## [](glossary.html#o1)O

#### [](glossary.html#oauth-20)[OAuth 2.0](https://datatracker.ietf.org/doc/html/rfc6749)

Протокол авторизации, который позволяет шифровать ID пользователя, ID [приложения](glossary.html#app) и набор прав в виде [токена](glossary.html#token) (последовательности символов).

#### [](glossary.html#app)OAuth-приложение

Программа, мобильное приложение или веб-сервис, [зарегистрированный](../register-client.html) в Яндекс OAuth.

#### [](glossary.html#token)OAuth-токен

Строка, которая позволяет приложению [обращаться](../access.html) к сервисам Яндекса от имени определенного пользователя. В контексте использования протокола OAuth-токен может сокращаться до токен.

Каждый OAuth-токен обязательно содержит:

-
идентификатор учетной записи, к которой разрешен доступ;

-
идентификатор приложения, которому разрешен доступ;

-
набор прав (действий, доступных приложению).

Таким образом, токен показывает, что может делать данное приложение от имени определенного аккаунта.

## [](glossary.html#r)R

#### [](glossary.html#redirect-uri)Redirect URI

Адрес страницы, на которую пользователь будет перенаправлен после авторизации. Страница по указанному адресу тоже будет принимать OAuth-токен.

Приложение может иметь несколько адресов Redirect URI. Разные адреса могут быть использованы, если сайт позволяет выполнять авторизацию при помощи разных сценариев. Например, при необходимости настройки нескольких видов окружения или при наличии экосистемы продуктов, что позволяет использовать один client_id для разных приложений.

#### [](glossary.html#refresh-token)Refresh-токен

Дополнительная строка, которая выдается вместе с OAuth-токеном. Refresh-токен используется для [обновления OAuth-токена](../tokens/refresh-client.html). Время жизни OAuth-токена истекает, если нужно обновить данные о пользователе или запросить недостающие разрешения, которые были добавлены.

### Была ли статья полезна?
ДаНет

## concepts/ya-oauth-intro.html

--------------------------------------------------------------------------------

**Заголовок:** Реализация OAuth в Яндексе | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](ya-oauth-intro.html)
[Стандарт JSON Web Token ](../tokens/jwt.html)
- [Получение токена вручную ](../tokens/debug-token.html)
- [Отзыв токенов ](../tokens/token-invalidate.html)
- [Обновление токена ](../tokens/refresh-client.html)

- [Глоссарий ](glossary.html)
- [Обратная связь ](../feedback.html)

Реализация OAuth в Яндексе
## В этой статье:

- [Процедура авторизации](ya-oauth-intro.html#authorization-scheme)
- [Время жизни токена](ya-oauth-intro.html#ttl)
- [Отзыв токена](ya-oauth-intro.html#token-recall)
- [Пользовательский интерфейс](ya-oauth-intro.html#interface)

# Реализация OAuth в Яндексе

- [Процедура авторизации](ya-oauth-intro.html#authorization-scheme)
- [Время жизни токена](ya-oauth-intro.html#ttl)
- [Отзыв токена](ya-oauth-intro.html#token-recall)
- [Пользовательский интерфейс](ya-oauth-intro.html#interface)

Сервисы Яндекса авторизуют приложения по токенам по протоколу [OAuth 2.0](http://tools.ietf.org/html/rfc6749#section-4.4). Каждый токен — это цифро-буквенная последовательность, в которой зашифрована следующая информация:

-
идентификатор учетной записи, к которой разрешен доступ;

-
идентификатор приложения, которому разрешен доступ;

-
набор прав (действий, доступных приложению).

Ниже описаны общие правила использования OAuth-токенов Яндекса.

## [](ya-oauth-intro.html#authorization-scheme)Процедура авторизации

Приложения запрашивают токены по следующей схеме:

-

Приложение направляет пользователя на OAuth-сервер. На открывшейся странице он может разрешить приложению доступ к запрошенным данным своей учетной записи. Приложение может запросить права доступа, указанные при [регистрации приложения](../register-client.html#access):

Все права доступа, указанные при регистрации приложения. В этом случае пользователь может разрешить или запретить только все запрошенные доступы сразу.

- Только необходимые в данный момент права доступа из перечня, определенного при регистрации приложения. В этом случае пользователь также может разрешить или запретить только все запрошенные доступы сразу.

- Необходимые в данный момент права доступа из перечня, определенного при регистрации приложения, и опциональные права из того же перечня, без которых можно обойтись. Опциональным может являться, например, доступ к портрету. В этом случае пользователь может разрешить все запрошенные необходимые доступы сразу и выбрать, какие из запрошенных опциональных доступов разрешить.

-
Пользователь разрешает доступ к своим данным, и OAuth-сервер перенаправляет его на выбранный разработчиком адрес — [Redirect URI](../register-client.html).

Выданный [токен](../access.html) или [код](../codes/code-and-token.html) для его получения включается в URL перенаправления. Если произошла ошибка, в URL включается описание ошибки.

-
Приложение включает полученный токен в запрос к сервису Яндекса, который поддерживает OAuth.

Полученный токен можно сохранить в приложении и использовать для запросов до истечения времени его жизни.

## [](ya-oauth-intro.html#ttl)Время жизни токена

Время жизни токена — это срок, в течение которого токен можно использовать для авторизации. Максимальное время жизни зависит от прав, выбранных при [регистрации приложения](../register-client.html#access):

Продлеваемый токен

Устаревает после нескольких месяцев, но продлевается при каждой авторизации с этим токеном.

При регистрации приложения отображается минимальное время жизни, например, не менее, чем 1 год.

Ограниченный токен

Устаревает по истечении времени, установленного для соответствующих прав доступа.

Если при регистрации приложения было выбрано несколько таких прав, для токена выбирается наименьшее ограничение времени жизни.

## [](ya-oauth-intro.html#token-recall)Отзыв токена

Пользователь может отзывать любые OAuth-токены, выданные для его аккаунта:

- Чтобы отозвать токены, когда-либо выданные для учетной записи, пользователь может сменить пароль или [выйти на всех компьютерах](https://yandex.ru/support/id/profile.html).

- Чтобы отозвать токены, выданные определенному приложению, пользователь может запретить доступ для него на странице [Доступы к данным](https://id.yandex.ru/personal/data-access).

Приложение может отозвать собственный токен, если он был выдан [для определенного устройства](../tokens/token-invalidate.html#device-token).

Все случаи отзыва токенов перечислены на странице [Отзыв токенов](../tokens/token-invalidate.html).

## [](ya-oauth-intro.html#interface)Пользовательский интерфейс

Страница, на которой пользователь может разрешить доступ приложению ([первый шаг](ya-oauth-intro.html#step-1) авторизации), содержит название приложения и список запрашиваемых прав:

Когда пользователь подтверждает вход, OAuth-сервер перенаправляет его на адрес, указанный в качестве [Redirect URI](../register-client.html).

### Была ли статья полезна?
ДаНет

## confirm-account.html

--------------------------------------------------------------------------------

**Заголовок:** Верификация сервиса | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Верификация сервиса
## В этой статье:

- [Какие преимущества дает верификация?](confirm-account.html#pros)
- [Как пройти верификацию](confirm-account.html#how-to)

# Верификация сервиса

- [Какие преимущества дает верификация?](confirm-account.html#pros)
- [Как пройти верификацию](confirm-account.html#how-to)

Если вы хотите настроить интеграцию с [Яндекс OAuth](https://oauth.yandex.ru/), подтвердите свою личность через Госуслуги, чтобы верифицировать ваш сервис. Подтверждение означает, что аккаунт Яндекс ID действительно используется его законным владельцем. Если ваш аккаунт не подтвержден, пользователи увидят уведомление перед тем, как дать доступ вашему сервису к своим данным (1 шаг [сценария](concepts/ya-oauth-intro.html#authorization-scheme)):

## [](confirm-account.html#pros)Какие преимущества дает верификация?

Подтвержденный аккаунт делает ваш сервис более надежным в глазах пользователей, снижая их сомнения при авторизации. Кроме того, верификация аккаунта Яндекс ID обеспечивает следующие преимущества:

- Доступ к [технической поддержке Яндекс OAuth](feedback.html).

- Возможность [регистрации](register-client.html) более 5 приложений.

- Доступ к дополнительной информации о пользователе.

Примечание

Если ваш сервис не верифицирован, вы все равно можете обратиться в техническую поддержку, например чтобы подтвердить данные, если у вас нет гражданства РФ. В других случаях вы можете получить отказ в оказании поддержки.

## [](confirm-account.html#how-to)Как пройти верификацию

Чтобы подтвердить данные аккаунта через Госуслуги:

-
Авторизуйтесь в сервисе [Яндекс OAuth](https://oauth.yandex.ru/) через ваш аккаунт на Яндексе, с помощью которого вы будете разрабатывать сервис.

-
На главной странице Яндекс OAuth нажмите Снимите ограничения. Подтвердите аккаунт через Госуслуги.

-
В появившемся окне нажмите Продолжить через Госуслуги и следуйте инструкциям на сайте Госуслуг.

Выполнив все инструкции, вы увидите сообщение об успешной верификации вашего аккаунта.

Как подтвердить данные, не имея гражданства РФ?

Обратитесь в [техническую поддержку](feedback.html) и укажите в обращении, что у вас нет гражданства РФ.

### Была ли статья полезна?
ДаНет

## feedback.html

--------------------------------------------------------------------------------

**Заголовок:** Форма обратной связи | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Форма обратной связи
# Форма обратной связи
Если вы не нашли ответ на свой вопрос в документации, задайте его нам.

Если вы столкнулись с какой-то проблемой, подробно опишите ее.

### Была ли статья полезна?
ДаНет

## how-to.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение к API Яндекс ID | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Подключение к API Яндекс ID
# Подключение к API Яндекс ID
API Яндекс ID позволяет автоматически подтягивать данные пользователя из его аккаунта в Яндексе. Благодаря этому вход на ваш сайт станет проще: пользователю не придется заводить новую учетную запись и заполнять дополнительные формы.

Чтобы настроить авторизацию при помощи API Яндекс ID, подготовьте ваше приложение для работы с [протоколом OAuth 2.0](concepts/ya-oauth-intro.html):

-
[Зарегистрируйте приложение](register-client.html) в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

-
Настройте доступ приложения к Яндекс ID. Для этого получите согласие пользователя для работы с приложением и [запросите OAuth-токен](access.html). Токен следует запрашивать для каждого нового пользователя, который входит через Яндекс в ваш сервис.

-
Получите [информацию о пользователе](user-information.html) для дальнейшего использования в вашем приложении, например для настройки личного кабинета.

### Была ли статья полезна?
ДаНет

## index.html

--------------------------------------------------------------------------------

**Заголовок:** О сервисе | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

О сервисе
## В этой статье:

- [Как это работает](index.html#how-it-works)
- [Полезные ссылки](index.html#useful-links)

# О сервисе

- [Как это работает](index.html#how-it-works)
- [Полезные ссылки](index.html#useful-links)

[Яндекс ID](https://yandex.ru/support/id/index.html) — это единый аккаунт на Яндексе. API Яндекс ID позволяет настроить авторизацию пользователя при помощи [протокола OAuth 2.0](concepts/ya-oauth-intro.html) на вашем сайте или в мобильном приложении.

API Яндекс ID поможет упростить взаимодействие с вашим сайтом:

- Посетители смогут авторизоваться с помощью аккаунта на Яндексе. Им не придется заводить новую учетную запись и заполнять дополнительные формы.

- Разработчики получат возможность идентифицировать такого пользователя и использовать информацию из его аккаунта на Яндексе, чтобы персонализировать контент и интерфейс приложения. Доступ каждого приложения ограничивается правами, которые разработчик задал при его [регистрации](register-client.html).

- Вход можно реализовать при помощи [технологии мгновенной авторизации](suggest-description.html) для сайта или [библиотеки LoginSDK](mobileauthsdk/about.html) для мобильных устройств.

О базовых принципах OAuth и об особенностях работы протокола в Яндексе читайте в разделе [Реализация OAuth в Яндексе](concepts/ya-oauth-intro.html).

Совет

Чтобы сделать ваш сервис более надежным в глазах пользователей, [подтвердите свой аккаунт на Госуслугах](confirm-account.html).

## [](index.html#how-it-works)Как это работает

- При авторизации в вашем приложении пользователь выбирает вход при помощи аккаунта на Яндексе.

Как выглядит

- Приложение, [которое подключено к API Яндекс ID](how-to.html), перенаправляет пользователя в Яндекс OAuth и запрашивает доступ к данным его аккаунта на Яндексе. Пользователь подтверждает вход с аккаунтом на Яндексе и разрешает доступ к своим данным.

Как выглядит

-
Приложение [получает OAuth-токен](access.html) с правами доступа к API Яндекс ID. API Яндекс ID позволяет запросить данные пользователя:

Логин, имя и фамилия, пол;

- Портрет пользователя;

- Адрес электронной почты;

- Номер телефона;

- Дата рождения.

-
Приложение отправляет запрос к API Яндекс ID, указывая полученный OAuth-токен, и получает [уникальный идентификатор пользователя и его данные](user-information.html).

-
Приложение авторизует пользователя, используя настройки и контент, привязанные к полученному идентификатору. Таким образом пользователь Яндекса получает аккаунт в вашем приложении, не заводя новую учетную запись.

## [](index.html#useful-links)Полезные ссылки

- [Реализация OAuth в Яндексе](concepts/ya-oauth-intro.html)

- [Подключение к API Яндекс ID](how-to.html)

- [LoginSDK для мобильных приложений](mobileauthsdk/about.html)

- [Условия использования сервиса](https://yandex.ru/legal/authid_api/)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/about.html

--------------------------------------------------------------------------------

**Заголовок:** LoginSDK для мобильных приложений | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](about.html)
[iOS (версия SDK 3.0.0) ](ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

LoginSDK для мобильных приложений
## В этой статье:

- [Авторизация с использованием LoginSDK](about.html#web-view)
- [Типы выдаваемых токенов](about.html#token-types)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- Мобильные приложения — LoginSDK

# LoginSDK для мобильных приложений

- [Авторизация с использованием LoginSDK](about.html#web-view)
- [Типы выдаваемых токенов](about.html#token-types)

LoginSDK — это библиотеки для платформ iOS и Android, позволяющие сторонним мобильным приложениям подключить OAuth-авторизацию пользователей через аккаунты на Яндексе.

## [](about.html#web-view)Авторизация с использованием LoginSDK

Если на устройстве пользователя установлены приложения Яндекса, можно использовать сохраненные в этих приложениях аккаунты или авторизоваться при помощи логина и пароля. Если приложений нет, для авторизации можно использовать webView или браузер устройства.

Подробнее о механизме авторизации:

- [Схема работы LoginSDK для iOS](ios/sdk-ios-main.html).

- [Схема работы LoginSDK для Android](android/3.1.3/sdk-android.html).

## [](about.html#token-types)Типы выдаваемых токенов

LoginSDK позволяет получить следующие токены:

- [OAuth-токен](../concepts/ya-oauth-intro.html) — используется в запросах к API сервисов Яндекса.

- [JSON Web Token](../tokens/jwt.html) — может быть использован для внутренней авторизации в вашем сервисе.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/3.1.3/sdk-android-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [Android (версия SDK 3.1.3)](sdk-android.html)
- Коды ошибок

# Коды ошибок

Код

Описание

CONNECTION_ERROR

Ошибка соединения.

SECURITY_ERROR

Ошибка безопасности. Возникает, если была обнаружена попытка перехвата или подделки запроса на авторизацию. При возникновении ошибки смените wi-fi сеть на более безопасную.

JWT_AUTHORIZATION_ERROR

Ошибка, возникающая при получении JSON Web Token с невалидным OAuth-токеном.

OAUTH_TOKEN_ERROR

OAuth-токен невалиден.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/3.1.3/sdk-android-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Подключение- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [Android (версия SDK 3.1.3)](sdk-android.html)
- Подключение

# Подключение
LoginSDK для Android подключается при помощи [Gradle](https://ru.wikipedia.org/wiki/Gradle):

-
Добавьте репозиторий:

mavenCentral()

-
Подключите зависимость:

implementation &quot;com.yandex.android:authsdk:3.1.3&quot;

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/3.1.3/sdk-android-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник функций | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Справочник функций
## В этой статье:

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
- [Свойства и функции](sdk-android-methods.html#yaloginsdk-methods)
- [Класс YandexAuthSdkContract](sdk-android-methods.html#yaloginsdkconfig)
- [Свойства и функции](sdk-android-methods.html#yaloginsdkconfig-methods)
- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
- [Свойства и функции](sdk-android-methods.html#yandexauthloginoptions-methods)
- [Интерфейс YandexAuthResult](sdk-android-methods.html#result)
- [Наследники](sdk-android-methods.html#result-instances)
- [Класс YandexAuthToken](sdk-android-methods.html#token)
- [Свойства и функции](sdk-android-methods.html#token-methods)

- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [Android (версия SDK 3.1.3)](sdk-android.html)
- Справочник функций

# Справочник функций

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
[Свойства и функции](sdk-android-methods.html#yaloginsdk-methods)

- [Класс YandexAuthSdkContract](sdk-android-methods.html#yaloginsdkconfig)
[Свойства и функции](sdk-android-methods.html#yaloginsdkconfig-methods)

- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
[Свойства и функции](sdk-android-methods.html#yandexauthloginoptions-methods)

- [Интерфейс YandexAuthResult](sdk-android-methods.html#result)
[Наследники](sdk-android-methods.html#result-instances)

- [Класс YandexAuthToken](sdk-android-methods.html#token)
[Свойства и функции](sdk-android-methods.html#token-methods)

## [](sdk-android-methods.html#yaloginsdk)Класс YandexAuthSdk

Класс авторизации.

### [](sdk-android-methods.html#yaloginsdk-methods)Свойства и функции

-
Контракт для запуска активити LoginSDK.

Предназначен для использования с функцией registerForActivityResult() согласно [документации](https://developer.android.com/training/basics/intents/result). В качестве входных параметров используется YandexAuthLoginOptions. В качестве результата возвращается Result&lt;YandexAuthToken?&gt;.

val contract: YandexAuthSdkContract

-
Получение [JSON Web Token](../../../tokens/jwt.html).

fun getJwt(token: YandexAuthToken): String

## [](sdk-android-methods.html#yaloginsdkconfig)Класс YandexAuthSdkContract

Класс настройки LoginSDK.

### [](sdk-android-methods.html#yaloginsdkconfig-methods)Свойства и функции

-
Создание конфигурации LoginSDK. Идентификатор клиентского приложения берется из build.gradle.

YandexAuthOptions(context: Context, loggingEnabled: Boolean = false)

где loggingEnabled — признак разрешенного логирования сообщений от LoginSDK.

-
Получение [идентификатора приложения](../../../register-client.html#app-params).

val clientId: String

-
Получение признака разрешенного логирования сообщений от LoginSDK.

val isLoggingEnabled: Boolean

## [](sdk-android-methods.html#yandexauthloginoptions)Класс YandexAuthLoginOptions

Класс параметров авторизации. Необходимо передавать экземпляр этого класса в метод launch() при запуске процесса авторизации.

### [](sdk-android-methods.html#yandexauthloginoptions-methods)Свойства и функции

-
Создание экземпляра класса YandexAuthLoginOptions.

YandexAuthLoginOptions(val loginType: LoginType = LoginType.NATIVE)

где LoginType определяет режим авторизации пользователя.

Возможные режимы:

NATIVE — авторизация будет происходить через приложение Яндекса, которое поддерживает авторизацию. Авторизация возможна через приложения:

Яндекс Браузер

- Яндекс Старт

- Яндекс — с Алисой

- Яндекс GO

- Яндекс Почта

- Яндекс Диск

- Яндекс Пэй

- Яндекс Ключ

Если ни одно приложение из списка не установлено, при авторизации откроется Chrome Tab браузера, который установлен в системе на устройстве. Если браузер по умолчанию не поддерживает Chrome Tab, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
CHROME_TAB — авторизация будет происходить через Chrome tab браузера, который установлен по умолчанию на устройстве. Если бразуер по умолчанию не поддерживает Chrome Tab, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
WEBVIEW — авторизация будет происходить через [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
Получение режима авторизации пользователя, переданного в конструкторе.

val loginType: LoginType

## [](sdk-android-methods.html#result)Интерфейс YandexAuthResult

Результат, возвращающийся от LoginSDK после авторизации. Представляет собой sealed interface, который имеет три возможных наследника.

### [](sdk-android-methods.html#result-instances)Наследники

-
Успешная авторизация.

data class Success(val token: YandexAuthToken) : YandexAuthResult

где token — токен, выданный в результате успешной авторизация.

-
Неуспешная авторизация.

data class Failure(val exception: YandexAuthException) : YandexAuthResult

где exception — ошибка, возникшая в результате авторизации.

-
Отмена авторизации пользователем.

object Cancelled : YandexAuthResult

## [](sdk-android-methods.html#token)Класс YandexAuthToken

Класс, возвращающийся от LoginSDK после успешной авторизации.

### [](sdk-android-methods.html#token-methods)Свойства и функции

-
Создание токена и получение информации о нем: значение, тип и время активности токена.

class YandexAuthToken(val value: String, val expiresIn: Long)

-
Получение значения токена.

val value: String

-
Получение времени жизни токена.

val expiresIn: Long

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/3.1.3/sdk-android-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Использование
## В этой статье:

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [Android (версия SDK 3.1.3)](sdk-android.html)
- Использование

# Использование

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

Для получения токенов выполните следующие действия:

## [](sdk-android-use.html#initialisation)Шаг 1. Инициализация

-
В build.gradle вашего приложения добавьте код:

android {
defaultConfig {
manifestPlaceholders = [YANDEX_CLIENT_ID:&quot;&lt;идентификатор приложения_clientID&gt;&quot;]
}
}

Идентификатор приложения Client ID доступен в [свойствах приложения](../../../register-client.html#app-params).

-
Для инициализации используйте код:

Kotlin
Java

val sdk = YandexAuthSdk.create(YandexAuthOptions(requireContext()))

YandexAuthSdk sdk = YandexAuthSdk.create(new YandexAuthOptions(requireContext()));

## [](sdk-android-use.html#authorization)Шаг 2. Авторизация

-
Запустите авторизацию:

Kotlin
Java

val sdk = YandexAuthSdk.create(YandexAuthOptions(requireContext()))
val launcher = registerForActivityResult(sdk.contract) { result -&gt; handleResult(result) }
val loginOptions = YandexAuthLoginOptions()
launcher.launch(loginOptions)

YandexAuthSdk sdk = YandexAuthSdk.create(new YandexAuthOptions(requireContext()));
ActivityResultLauncher&lt;YandexAuthLoginOptions&gt; launcher =
registerForActivityResult(sdk.getContract(), result -&gt; handleResult(result));
YandexAuthLoginOptions loginOptions = new YandexAuthLoginOptions();
launcher.launch(loginOptions);

-
Для обработки событий авторизации используйте код вида:

Kotlin
Java

private fun handleResult(result: YandexAuthResult) {
when (result) {
is YandexAuthResult.Success -&gt; onSuccessAuth(result.token)
is YandexAuthResult.Failure -&gt; onProccessError(result.exception)
YandexAuthResult.Cancelled -&gt; onCancelled()
}
}

private void handleResult(YandexAuthResult result) {
if (result instanceof YandexAuthResult.Success) {
onSuccessAuth(((YandexAuthResult.Success) result).getToken());
} else if (result instanceof YandexAuthResult.Failure) {
onProccessError(((YandexAuthResult.Failure) result).getException());
} else {
onCancelled();
}
}

## [](sdk-android-use.html#jwt)Шаг 3. Получение JSON Web Token

Для получения [JSON Web Token](../../../tokens/jwt.html) используйте метод:

Kotlin
Java

sdk.getJwt(yandexAuthToken)

sdk.getJwt(yandexAuthToken);

## [](sdk-android-use.html#user-info)Шаг 4. Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../user-information.html).

## [](sdk-android-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../user-information.html)

- [Справочник функций](sdk-android-methods.html)

- [Коды ошибок](sdk-android-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/3.1.3/sdk-android.html

--------------------------------------------------------------------------------

**Заголовок:** Схема работы | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Схема работы- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- Android (версия SDK 3.1.3)
- Схема работы

# Схема работы
Чтобы настроить в вашем сервисе авторизацию при помощи LoginSDK, выполните шаги:

-
[Зарегистрируйте](../../../register-client.html) приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

В разделе Платформы выберите Android-приложение и укажите параметры вашего сервиса:

Android package name. Название пакета приложения — поле applicationId в файле build.gradle вашего модуля. Подробнее про идентификаторы Android-приложений читайте в [документации Android](https://developer.android.com/studio/build/application-id.html).

-
Android Google Play URL. Ссылка на приложение в Google Play.

-
SHA256 Fingerprints. Отпечаток сертификата вашего приложения. О том, как сгенерировать такой отпечаток, читайте в [документации Android](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report).

Для настройки LoginSDK вам понадобится [параметр Client ID](../../../register-client.html#app-params) приложения.

-
[Добавьте репозиторий и подключите зависимости](sdk-android-install.html).

-
[Настройте](sdk-android-use.html) ваш сервис для работы с токенами.

-
Получите [информацию о пользователе](../../../user-information.html).

Совет

По завершении работы LoginSDK для Android не сохраняет полученные токены на устройстве пользователя из соображений безопасности.

Схема работы LoginSDK для Android:

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/2.5.1/sdk-android-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник методов ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 2.5.1)](sdk-android.html)
- Коды ошибок

# Коды ошибок

Код

Описание

CONNECTION_ERROR

Ошибка соединения.

SECURITY_ERROR

Ошибка безопасности. Возникает, если была обнаружена попытка перехвата или подделки запроса на авторизацию. При возникновении ошибки смените wi-fi сеть на более безопасную.

JWT_AUTHORIZATION_ERROR

Ошибка, возникающая при получении JSON Web Token с невалидным OAuth-токеном.

OAUTH_TOKEN_ERROR

OAuth-токен невалиден.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/2.5.1/sdk-android-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник методов ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Подключение- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 2.5.1)](sdk-android.html)
- Подключение

# Подключение
LoginSDK для Android подключается при помощи [Gradle](https://ru.wikipedia.org/wiki/Gradle):

-
Добавьте репозиторий:

mavenCentral()

-
Подключите зависимость:

implementation &quot;com.yandex.android:authsdk:2.5.1&quot;

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/2.5.1/sdk-android-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник методов | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник методов ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Справочник методов
## В этой статье:

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
- [Методы](sdk-android-methods.html#yaloginsdk-methods)
- [Класс YandexAuthOptions](sdk-android-methods.html#yaloginsdkconfig)
- [Методы](sdk-android-methods.html#yaloginsdkconfig-methods)
- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
- [Класс YandexAuthLoginOptions.Builder](sdk-android-methods.html#yandexauthloginoptions-builder)
- [Методы](sdk-android-methods.html#yandexauthloginoptions-builder-methods)
- [Класс YandexAuthToken](sdk-android-methods.html#token)
- [Методы](sdk-android-methods.html#token-methods)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 2.5.1)](sdk-android.html)
- Справочник методов

# Справочник методов

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
[Методы](sdk-android-methods.html#yaloginsdk-methods)

- [Класс YandexAuthOptions](sdk-android-methods.html#yaloginsdkconfig)
[Методы](sdk-android-methods.html#yaloginsdkconfig-methods)

- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
- [Класс YandexAuthLoginOptions.Builder](sdk-android-methods.html#yandexauthloginoptions-builder)
[Методы](sdk-android-methods.html#yandexauthloginoptions-builder-methods)

- [Класс YandexAuthToken](sdk-android-methods.html#token)
[Методы](sdk-android-methods.html#token-methods)

## [](sdk-android-methods.html#yaloginsdk)Класс YandexAuthSdk

Класс авторизации.

### [](sdk-android-methods.html#yaloginsdk-methods)Методы

-
Создание Intent для запуска процесса авторизации.

@NonNull
public Intent createLoginIntent(
@NonNull final YandexAuthLoginOptions loginOptions
)

loginOptions — параметры для запуска авторизации.

-
Обработка результата авторизации.

public YandexAuthToken extractToken(final int resultCode, @Nullable final Intent data) throws YandexAuthException

Описание:

-
Получение [JSON Web Token](../../../../tokens/jwt.html).

public String getJwt(@NonNull final YandexAuthToken token) throws YandexAuthException

## [](sdk-android-methods.html#yaloginsdkconfig)Класс YandexAuthOptions

Класс настройки LoginSDK.

### [](sdk-android-methods.html#yaloginsdkconfig-methods)Методы

-
Создание конфигурации LoginSDK. Идентификатор клиентского приложения берется из build.gradle.

public YandexAuthOptions(@NonNull final Context context, final boolean loggingEnabled)

loggingEnabled — признак разрешенного логирования сообщений от LoginSDK.

-
Получение [идентификатора приложения](../../../../register-client.html#app-params).

public String clientId()

-
Получение признака разрешенного логирования сообщений от LoginSDK.

public boolean isLoggingEnabled()

## [](sdk-android-methods.html#yandexauthloginoptions)Класс YandexAuthLoginOptions

Класс параметров авторизации. Непосредственно использовать экземпляры класса не нужно: необходимо создавать их с помощью YandexAuthLoginOptions.Builder.build() и без изменений передавать в метод [createLoginIntent](sdk-android-methods.html#yaloginsdk).

## [](sdk-android-methods.html#yandexauthloginoptions-builder)Класс YandexAuthLoginOptions.Builder

Класс для создания наборов параметров авторизации. Создав экземпляр этого класса, следует задать параметры авторизации и сконструировать экземпляр YandexAuthLoginOptions.

### [](sdk-android-methods.html#yandexauthloginoptions-builder-methods)Методы

-
Создание экземпляра класса YandexAuthLoginOptions. Перед
вызовом build() следует установить нужные параметры авторизации с
помощью методов, перечисленных выше.

public YandexAuthLoginOptions build()

-
Определение прав доступа, которые необходимо получить.

public setScopes(List&lt;String&gt; scopes)

-
Выбор режима авторизации пользователя.

public setLoginType(LoginType.&lt;режим авторизации&gt;).build()

NATIVE — авторизация будет происходить через приложение Яндекса, которое поддерживает авторизацию. На устройствах с Android версии 11 и выше авторизация возможна через приложения:

Яндекс Браузер

- Яндекс Старт

- Яндекс — с Алисой

- Яндекс GO

- Яндекс Музыка

- Яндекс Карты

- Яндекс Еда

- Яндекс Почта

- Яндекс Диск

Если ни одно приложение из списка не установлено, при авторизации откроется браузер Chrome. Если Chrome не установлен на устройстве, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
BROWSER — авторизация будет происходить через браузер Chrome. Если Chrome не установлен на устройстве, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
WEBVIEW — авторизация будет происходить через [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

## [](sdk-android-methods.html#token)Класс YandexAuthToken

Класс, возвращающийся от LoginSDK после успешной авторизации.

### [](sdk-android-methods.html#token-methods)Методы

-
Создание токена и получение информации о нем: значение, тип и время активности токена.

public YandexAuthToken(@NonNull final String value, final long expiresIn)

-
Получение значения токена.

public String getValue()

-
Получение времени жизни токена.

public long expiresIn()

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/2.5.1/sdk-android-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник методов ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Использование
## В этой статье:

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 2.5.1)](sdk-android.html)
- Использование

# Использование

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

Для получения токенов выполните следующие действия:

## [](sdk-android-use.html#initialisation)Шаг 1. Инициализация

-
В build.gradle вашего приложения добавьте код:

android {
defaultConfig {
manifestPlaceholders = [YANDEX_CLIENT_ID:&quot;&lt;идентификатор приложения_clientID&gt;&quot;]
}
}

Идентификатор приложения Client ID доступен в [свойствах приложения](../../../../register-client.html#app-params).

-
Для инициализации используйте код:

final YandexAuthSdk sdk = new YandexAuthSdk(requireContext(), new YandexAuthOptions(requireContext()));

## [](sdk-android-use.html#authorization)Шаг 2. Авторизация

-
Для запуска авторизации используйте метод:

final YandexAuthLoginOptions.Builder loginOptionsBuilder =  new YandexAuthLoginOptions.Builder();
final Intent intent = sdk.createLoginIntent(loginOptionsBuilder.build());

-
Чтобы получать события авторизации, переопределите метод:

@Override
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
if (requestCode == REQUEST_LOGIN_SDK) {
try {
final YandexAuthToken yandexAuthToken = sdk.extractToken(resultCode, data);
if (yandexAuthToken != null) {
// Success auth
}
} catch (YandexAuthException e) {
// Process error
}
return;
}
super.onActivityResult(requestCode, resultCode, data);
}

## [](sdk-android-use.html#jwt)Шаг 3. Получение JSON Web Token

Для получения [JSON Web Token](../../../../tokens/jwt.html) используйте метод:

sdk.getJwt(yandexAuthToken);

## [](sdk-android-use.html#user-info)Шаг 4. Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../../user-information.html).

## [](sdk-android-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../../user-information.html)

- [Справочник методов](sdk-android-methods.html)

- [Коды ошибок](sdk-android-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/2.5.1/sdk-android.html

--------------------------------------------------------------------------------

**Заголовок:** Схема работы | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник методов ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Схема работы- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- Android (версия SDK 2.5.1)
- Схема работы

# Схема работы
Чтобы настроить в вашем сервисе авторизацию при помощи LoginSDK, выполните шаги:

-
[Зарегистрируйте](../../../../register-client.html) приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

В разделе Платформы выберите Android-приложение и укажите параметры вашего сервиса:

Android package name. Название пакета приложения — поле applicationId в файле build.gradle вашего модуля. Подробнее про идентификаторы Android-приложений читайте в [документации Android](https://developer.android.com/studio/build/application-id.html).

-
Android Google Play URL. Ссылка на приложение в Google Play.

-
SHA256 Fingerprints. Отпечаток сертификата вашего приложения. О том, как сгенерировать такой отпечаток, читайте в [документации Android](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report).

Для настройки LoginSDK вам понадобится [параметр Client ID](../../../../register-client.html#app-params) приложения.

-
[Добавьте репозиторий и подключите зависимости](sdk-android-install.html).

-
[Настройте](sdk-android-use.html) ваш сервис для работы с токенами.

-
Получите [информацию о пользователе](../../../../user-information.html).

Совет

По завершении работы LoginSDK для Android не сохраняет полученные токены на устройстве пользователя из соображений безопасности.

Схема работы LoginSDK для Android:

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/3.1.0/sdk-android-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 3.1.0)](sdk-android.html)
- Коды ошибок

# Коды ошибок

Код

Описание

CONNECTION_ERROR

Ошибка соединения.

SECURITY_ERROR

Ошибка безопасности. Возникает, если была обнаружена попытка перехвата или подделки запроса на авторизацию. При возникновении ошибки смените wi-fi сеть на более безопасную.

JWT_AUTHORIZATION_ERROR

Ошибка, возникающая при получении JSON Web Token с невалидным OAuth-токеном.

OAUTH_TOKEN_ERROR

OAuth-токен невалиден.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/3.1.0/sdk-android-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Подключение- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 3.1.0)](sdk-android.html)
- Подключение

# Подключение
LoginSDK для Android подключается при помощи [Gradle](https://ru.wikipedia.org/wiki/Gradle):

-
Добавьте репозиторий:

mavenCentral()

-
Подключите зависимость:

implementation &quot;com.yandex.android:authsdk:3.1.0&quot;

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/3.1.0/sdk-android-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник функций | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Справочник функций
## В этой статье:

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
- [Свойства и функции](sdk-android-methods.html#yaloginsdk-methods)
- [Класс YandexAuthSdkContract](sdk-android-methods.html#yaloginsdkconfig)
- [Свойства и функции](sdk-android-methods.html#yaloginsdkconfig-methods)
- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
- [Свойства и функции](sdk-android-methods.html#yandexauthloginoptions-methods)
- [Интерфейс YandexAuthResult](sdk-android-methods.html#result)
- [Наследники](sdk-android-methods.html#result-instances)
- [Класс YandexAuthToken](sdk-android-methods.html#token)
- [Свойства и функции](sdk-android-methods.html#token-methods)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 3.1.0)](sdk-android.html)
- Справочник функций

# Справочник функций

- [Класс YandexAuthSdk](sdk-android-methods.html#yaloginsdk)
[Свойства и функции](sdk-android-methods.html#yaloginsdk-methods)

- [Класс YandexAuthSdkContract](sdk-android-methods.html#yaloginsdkconfig)
[Свойства и функции](sdk-android-methods.html#yaloginsdkconfig-methods)

- [Класс YandexAuthLoginOptions](sdk-android-methods.html#yandexauthloginoptions)
[Свойства и функции](sdk-android-methods.html#yandexauthloginoptions-methods)

- [Интерфейс YandexAuthResult](sdk-android-methods.html#result)
[Наследники](sdk-android-methods.html#result-instances)

- [Класс YandexAuthToken](sdk-android-methods.html#token)
[Свойства и функции](sdk-android-methods.html#token-methods)

## [](sdk-android-methods.html#yaloginsdk)Класс YandexAuthSdk

Класс авторизации.

### [](sdk-android-methods.html#yaloginsdk-methods)Свойства и функции

-
Контракт для запуска активити LoginSDK.

Предназначен для использования с функцией registerForActivityResult() согласно [документации](https://developer.android.com/training/basics/intents/result). В качестве входных параметров используется YandexAuthLoginOptions. В качестве результата возвращается Result&lt;YandexAuthToken?&gt;.

val contract: YandexAuthSdkContract

-
Получение [JSON Web Token](../../../../tokens/jwt.html).

fun getJwt(token: YandexAuthToken): String

## [](sdk-android-methods.html#yaloginsdkconfig)Класс YandexAuthSdkContract

Класс настройки LoginSDK.

### [](sdk-android-methods.html#yaloginsdkconfig-methods)Свойства и функции

-
Создание конфигурации LoginSDK. Идентификатор клиентского приложения берется из build.gradle.

YandexAuthOptions(context: Context, loggingEnabled: Boolean = false)

где loggingEnabled — признак разрешенного логирования сообщений от LoginSDK.

-
Получение [идентификатора приложения](../../../../register-client.html#app-params).

val clientId: String

-
Получение признака разрешенного логирования сообщений от LoginSDK.

val isLoggingEnabled: Boolean

## [](sdk-android-methods.html#yandexauthloginoptions)Класс YandexAuthLoginOptions

Класс параметров авторизации. Необходимо передавать экземпляр этого класса в метод launch() при запуске процесса авторизации.

### [](sdk-android-methods.html#yandexauthloginoptions-methods)Свойства и функции

-
Создание экземпляра класса YandexAuthLoginOptions.

YandexAuthLoginOptions(val loginType: LoginType = LoginType.NATIVE)

где LoginType определяет режим авторизации пользователя.

Возможные режимы:

NATIVE — авторизация будет происходить через приложение Яндекса, которое поддерживает авторизацию. Авторизация возможна через приложения:

Яндекс Браузер

- Яндекс Старт

- Яндекс — с Алисой

- Яндекс GO

- Яндекс Почта

- Яндекс Диск

- Яндекс Пэй

- Яндекс Ключ

Если ни одно приложение из списка не установлено, при авторизации откроется Chrome Tab браузера, который установлен в системе на устройстве. Если браузер по умолчанию не поддерживает Chrome Tab, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
CHROME_TAB — авторизация будет происходить через Chrome tab браузера, который установлен по умолчанию на устройстве. Если бразуер по умолчанию не поддерживает Chrome Tab, откроется [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
WEBVIEW — авторизация будет происходить через [WebView](https://developer.android.com/develop/ui/views/layout/webapps/webview).

-
Получение режима авторизации пользователя, переданного в конструкторе.

val loginType: LoginType

## [](sdk-android-methods.html#result)Интерфейс YandexAuthResult

Результат, возвращающийся от LoginSDK после авторизации. Представляет собой sealed interface, который имеет три возможных наследника.

### [](sdk-android-methods.html#result-instances)Наследники

-
Успешная авторизация.

data class Success(val token: YandexAuthToken) : YandexAuthResult

где token — токен, выданный в результате успешной авторизация.

-
Неуспешная авторизация.

data class Failure(val exception: YandexAuthException) : YandexAuthResult

где exception — ошибка, возникшая в результате авторизации.

-
Отмена авторизации пользователем.

object Cancelled : YandexAuthResult

## [](sdk-android-methods.html#token)Класс YandexAuthToken

Класс, возвращающийся от LoginSDK после успешной авторизации.

### [](sdk-android-methods.html#token-methods)Свойства и функции

-
Создание токена и получение информации о нем: значение, тип и время активности токена.

class YandexAuthToken(val value: String, val expiresIn: Long)

-
Получение значения токена.

val value: String

-
Получение времени жизни токена.

val expiresIn: Long

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/3.1.0/sdk-android-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Использование
## В этой статье:

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [Android (версия SDK 3.1.0)](sdk-android.html)
- Использование

# Использование

- [Шаг 1. Инициализация](sdk-android-use.html#initialisation)
- [Шаг 2. Авторизация](sdk-android-use.html#authorization)
- [Шаг 3. Получение JSON Web Token](sdk-android-use.html#jwt)
- [Шаг 4. Получение информации о пользователе](sdk-android-use.html#user-info)
- [Полезные ссылки](sdk-android-use.html#useful-links)

Для получения токенов выполните следующие действия:

## [](sdk-android-use.html#initialisation)Шаг 1. Инициализация

-
В build.gradle вашего приложения добавьте код:

android {
defaultConfig {
manifestPlaceholders = [YANDEX_CLIENT_ID:&quot;&lt;идентификатор приложения_clientID&gt;&quot;]
}
}

Идентификатор приложения Client ID доступен в [свойствах приложения](../../../../register-client.html#app-params).

-
Для инициализации используйте код:

Kotlin
Java

val sdk = YandexAuthSdk.create(YandexAuthOptions(requireContext()))

YandexAuthSdk sdk = YandexAuthSdk.create(new YandexAuthOptions(requireContext()));

## [](sdk-android-use.html#authorization)Шаг 2. Авторизация

-
Запустите авторизацию:

Kotlin
Java

val sdk = YandexAuthSdk.create(YandexAuthOptions(requireContext()))
val launcher = registerForActivityResult(sdk.contract) { result -&gt; handleResult(result) }
val loginOptions = YandexAuthLoginOptions()
launcher.launch(loginOptions)

YandexAuthSdk sdk = YandexAuthSdk.create(new YandexAuthOptions(requireContext()));
ActivityResultLauncher&lt;YandexAuthLoginOptions&gt; launcher =
registerForActivityResult(sdk.getContract(), result -&gt; handleResult(result));
YandexAuthLoginOptions loginOptions = new YandexAuthLoginOptions();
launcher.launch(loginOptions);

-
Для обработки событий авторизации используйте код вида:

Kotlin
Java

private fun handleResult(result: YandexAuthResult) {
when (result) {
is YandexAuthResult.Success -&gt; onSuccessAuth(result.token)
is YandexAuthResult.Failure -&gt; onProccessError(result.exception)
YandexAuthResult.Cancelled -&gt; onCancelled()
}
}

private void handleResult(YandexAuthResult result) {
if (result instanceof YandexAuthResult.Success) {
onSuccessAuth(((YandexAuthResult.Success) result).getToken());
} else if (result instanceof YandexAuthResult.Failure) {
onProccessError(((YandexAuthResult.Failure) result).getException());
} else {
onCancelled();
}
}

## [](sdk-android-use.html#jwt)Шаг 3. Получение JSON Web Token

Для получения [JSON Web Token](../../../../tokens/jwt.html) используйте метод:

Kotlin
Java

sdk.getJwt(yandexAuthToken)

sdk.getJwt(yandexAuthToken);

## [](sdk-android-use.html#user-info)Шаг 4. Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../../user-information.html).

## [](sdk-android-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../../user-information.html)

- [Справочник функций](sdk-android-methods.html)

- [Коды ошибок](sdk-android-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/android/archive/3.1.0/sdk-android.html

--------------------------------------------------------------------------------

**Заголовок:** Схема работы | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../../ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
[Схема работы ](sdk-android.html)
- [Подключение ](sdk-android-install.html)
- [Использование ](sdk-android-use.html)
- [Справочник функций ](sdk-android-methods.html)
- [Коды ошибок ](sdk-android-errors.html)

- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Схема работы- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- Android (версия SDK 3.1.0)
- Схема работы

# Схема работы
Чтобы настроить в вашем сервисе авторизацию при помощи LoginSDK, выполните шаги:

-
[Зарегистрируйте](../../../../register-client.html) приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

В разделе Платформы выберите Android-приложение и укажите параметры вашего сервиса:

Android package name. Название пакета приложения — поле applicationId в файле build.gradle вашего модуля. Подробнее про идентификаторы Android-приложений читайте в [документации Android](https://developer.android.com/studio/build/application-id.html).

-
Android Google Play URL. Ссылка на приложение в Google Play.

-
SHA256 Fingerprints. Отпечаток сертификата вашего приложения. О том, как сгенерировать такой отпечаток, читайте в [документации Android](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report).

Для настройки LoginSDK вам понадобится [параметр Client ID](../../../../register-client.html#app-params) приложения.

-
[Добавьте репозиторий и подключите зависимости](sdk-android-install.html).

-
[Настройте](sdk-android-use.html) ваш сервис для работы с токенами.

-
Получите [информацию о пользователе](../../../../user-information.html).

Совет

По завершении работы LoginSDK для Android не сохраняет полученные токены на устройстве пользователя из соображений безопасности.

Схема работы LoginSDK для Android:

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/2.1.1/sdk-ios-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../sdk-ios-main.html)
[Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [iOS (версия SDK 3.0.0)](../sdk-ios-main.html)
- Коды ошибок

# Коды ошибок

Код

Описание

YXLErrorCodeNotActivated

LoginSDK не был активирован.

YXLErrorCodeCancelled

Авторизационный контроллер был закрыт пользователем.

YXLErrorCodeDenied

Пользователь запретил авторизацию.

YXLErrorCodeInvalidClient

Был передан неверный [идентификатор приложения](../../../register-client.html).

YXLErrorCodeInvalidScope

При регистрации у приложения были указаны неверные [скоупы](../../../register-client.html#access).

YXLErrorCodeOther

Прочие ошибки.

YXLErrorCodeRequestError

Внутренняя ошибка HTTP-запроса.

YXLErrorCodeRequestConnectionError

Ошибка соединения.

YXLErrorCodeRequestSSLError

Ошибка SSL.

YXLErrorCodeRequestNetworkError

Прочие ошибки HTTP.

YXLErrorCodeRequestResponseError

Получен ответ об ошибке обработки HTTP-запроса (код ответа не в диапазоне 200..299).

YXLErrorCodeRequestEmptyDataError

Был получен пустой HTTP-ответ.

YXLErrorCodeRequestJwtError

Был возвращен некорректный ответ на JWT-запрос.

YXLErrorCodeRequestJwtInternalError

Внутренняя JWT-ошибка.

YXLErrorCodeInvalidState

Неверный параметр состояния.

YXLErrorCodeInvalidCode

Произошла ошибка при получении токена по [авторизационному коду](../../../codes/code-and-token.html).

YXLActivationErrorCodeNoAppId

Идентификатор приложения nil.

YXLActivationErrorCodeNoQuerySchemeInInfoPList

В Info.plist нет схемы yandexauth.

YXLActivationErrorCodeNoSchemeInInfoPList

В Info.plist нет схемы yx&lt;идентификатор клиентского приложения&gt;.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/2.1.1/sdk-ios-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../sdk-ios-main.html)
[Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Подключение
## В этой статье:

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [iOS (версия SDK 3.0.0)](../sdk-ios-main.html)
- Подключение

# Подключение

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

LoginSDK для iOS можно подключить:

- из репозитория CocoaPods [YandexLoginSDK](https://cocoapods.org/pods/yandexloginsdk);

- используя Swift Pakcage Manager через [GitHub](https://github.com/yandexmobile/yandex-login-sdk-ios).

## [](sdk-ios-install.html#podfile)Шаг 1. Настройка Podfile

Если для подключения LoginSDK вы используете Swift Package Manage, пропустите этот шаг и переходите сразу к [Шагу 2](sdk-ios-install.html#info-plist).

Для импорта LoginSDK из CocoaPods необходимо настроить [Podfile](http://guides.cocoapods.org/using/the-podfile.html) по инструкции:

-
Перейдите в каталог с Xcode-проектом и создайте текстовый файл Podfile одним из вариантов:

Обычным способом.

-
С помощью команды:

pod init

-
Откройте Podfile и добавьте зависимость:

pod &#x27;YandexLoginSDK&#x27;

-
Примените изменения командой:

$ pod install

## [](sdk-ios-install.html#info-plist)Шаг 2. Настройка Info.plist

В текстовом редакторе
В интерфейсе Xcode

Добавьте в файл Info.plist строки:

&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;primaryyandexloginsdk&lt;/string&gt;
&lt;string&gt;secondaryyandexloginsdk&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;CFBundleURLTypes&lt;/key&gt;
&lt;array&gt;
&lt;dict&gt;
&lt;key&gt;CFBundleURLName&lt;/key&gt;
&lt;string&gt;YandexLoginSDK&lt;/string&gt;
&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;yx{Client ID}&lt;/string&gt;
&lt;/array&gt;
&lt;/dict&gt;
&lt;/array&gt;

В файле Info.plist добавьте следующие значения:

-
словарь Information Property List:

ключ Queried URL Schemes → массив строк:

первый элемент массива → строка «primaryyandexloginsdk»;

-
второй элемент массива → строка «secondaryyandexloginsdk»;

-
и т. д.;

-
ключ URL types → массив словарей:

один из элементов массива:

ключ URL identifier → строка «YandexLoginSDK»;

-
ключ URL Schemes → массив строк:

один из элементов массива → строка «yx{Client ID}».

- Идентификатор приложения Client ID доступен в [свойствах приложения](../../../register-client.html#app-params).

## [](sdk-ios-install.html#entitlements)Шаг 3. Настройка Entitlements

LoginSDK общается с приложениями Яндекса через [Universal Links](https://developer.apple.com/ios/universal-links/). Для их работы добавьте в Capability: Associated Domains строку:

applinks:yx{Client ID}.oauth.yandex.ru

Например, если идентификатор приложения [Client ID](../../../register-client.html#app-params) ABCD2e, добавляемая строка  выглядит так:

applinks:yxABCD2e.oauth.yandex.ru

## [](sdk-ios-install.html#lib-import)Шаг 4. Импорт заголовочных файлов

В файлы проекта, где задействован LoginSDK, добавьте заголовок:

import YandexLoginSDK

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/2.1.1/sdk-ios-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник методов | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../sdk-ios-main.html)
[Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Справочник методов
## В этой статье:

- [Класс YandexLoginSDK](sdk-ios-methods.html#yandexloginsdk)
- [Статические переменные](sdk-ios-methods.html#yandexloginsdk-statvars)
- [Методы](sdk-ios-methods.html#yandexloginsdk-methods)
- [Перечисление YandexLoginSDK.AuthorizationStrategy](sdk-ios-methods.html#authorizationstrategy)
- [Значения](sdk-ios-methods.html#authorizationstrategy-values)
- [Структура LoginResult](sdk-ios-methods.html#loginresult)
- [Переменные](sdk-ios-methods.html#loginresult-vars)
- [Протокол LoginSDKObserver](sdk-ios-methods.html#loginsdkobserver)
- [Методы](sdk-ios-methods.html#loginsdkobserver-methods)
- [Протокол YandexLoginSDKError](sdk-ios-methods.html#yandexloginsdkerror)
- [Переменные](sdk-ios-methods.html#yandexloginsdkerror-vars)

- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [iOS (версия SDK 3.0.0)](../sdk-ios-main.html)
- Справочник методов

# Справочник методов

- [Класс YandexLoginSDK](sdk-ios-methods.html#yandexloginsdk)
[Статические переменные](sdk-ios-methods.html#yandexloginsdk-statvars)
- [Методы](sdk-ios-methods.html#yandexloginsdk-methods)

- [Перечисление YandexLoginSDK.AuthorizationStrategy](sdk-ios-methods.html#authorizationstrategy)
[Значения](sdk-ios-methods.html#authorizationstrategy-values)

- [Структура LoginResult](sdk-ios-methods.html#loginresult)
[Переменные](sdk-ios-methods.html#loginresult-vars)

- [Протокол LoginSDKObserver](sdk-ios-methods.html#loginsdkobserver)
[Методы](sdk-ios-methods.html#loginsdkobserver-methods)

- [Протокол YandexLoginSDKError](sdk-ios-methods.html#yandexloginsdkerror)
[Переменные](sdk-ios-methods.html#yandexloginsdkerror-vars)

## [](sdk-ios-methods.html#yandexloginsdk)Класс YandexLoginSDK

Основной класс, через который идёт всё взаимодействие с SDK. Класс является реализацией паттерна Одиночка, единственный его экземпляр — это [статическая переменная shared](sdk-ios-methods.html#yandexloginsdk-statvars).

Для начала авторизации используется [метод authorize(with:customValues:authorizationStrategy:)](sdk-ios-methods.html#yandexloginsdk-methods-authorizationstrategy). В него необходимо передать родительский View Controller.

Чтобы получить результат авторизации, нужно подписаться наблюдателем LoginSDK через [метод add(observer:)](sdk-ios-methods.html#yandexloginsdk-methods-addobserver). Если получать уведомления от LoginSDK больше не нужно, от них можно отписаться через [метод remove(observer:)](sdk-ios-methods.html#yandexloginsdk-methods-removeobserver).

Если необходимо удалить сохранённые токены или провести повторную авторизацию пользователя, используется [метод logout()](sdk-ios-methods.html#yandexloginsdk-methods-removeobserver).

### [](sdk-ios-methods.html#yandexloginsdk-statvars)Статические переменные

-
Единственный экземпляр класса YandexLoginSDK:

static var shared: YandexLoginSDK { get }

Получать значения переменных и вызывать методы нужно именно со статической переменной shared.

-
Текущая версия LoginSDK:

static var version: String { get }

Соответствует формату семантического версионирования (SemVer).

### [](sdk-ios-methods.html#yandexloginsdk-methods)Методы

#### [](sdk-ios-methods.html#yandexloginsdk-methods-authorizationstrategy)

-
Активация LoginSDK:

func activate(with: String, authorizationStrategy: AuthorizationStrategy) throws

Методу необходимо передать [Client ID](../../../register-client.html#app-params) и желаемую [стратегию авторизации authorizationStrategy](sdk-ios-methods.html#authorizationstrategy) (значение по умолчанию .default). Перед активацией метод провалидирует конфигурацию приложения. Если валидация завершится неудачно, вызов метода закончится ошибкой.

-
Получение токена:

func handleUserActivity(NSUserActivity) throws

Метод обрабатывает аргумент [NSUserActivity](https://developer.apple.com/documentation/foundation/nsuseractivity/), пытается получить из него URL, который был передан приложению, а из него получить токены. В случае успеха у наблюдателей вызывается [метод didFinishLogin(with:)](sdk-ios-methods.html#loginsdkobserver-methods) с аргументом .success и ассоциированным значением типа [LoginResult](sdk-ios-methods.html#loginresult).

-
Обертка метода handleUserActivity(_:):

func tryHandleUserActivity(NSUserActivity) –&gt; Bool

Выполнение метода handleUserActivity(_:) может заканчиваться ошибкой, в то время как tryHandleUserActivity(_:) вызывает его в конструкции do-catch и возвращает false, если при выполнении возникла ошибка.

-
Получение кода авторизации:

func handleOpenURL(URL) throws

Метод обрабатывает переданный URL и пытается получить из него код авторизации, затем по полученному коду запрашивает токены. Если всё проходит успешно, у наблюдателей вызывается [метод didFinishLogin(with:)](sdk-ios-methods.html#loginsdkobserver-methods) с аргументом .success и ассоциированным значением типа [LoginResult](sdk-ios-methods.html#loginresult).

-
Обертка метода handleOpenURL(_:):

func tryHandleOpenURL(URL) –&gt; Bool

Выполнение метода handleOpenURL(_:) может заканчиваться ошибкой, в то время как tryHandleOpenURL(_:) вызывает его в конструкции do-catch и возвращает false, если при выполнении возникла ошибка.

-
Проверка URL:

func isURLRelatedToSDK(URL) –&gt; Bool

Метод проверяет, относится ли переданный URL к LoginSDK.

#### [](sdk-ios-methods.html#yandexloginsdk-methods-addobserver)

-
Добавление в список наблюдателей:

func add(observer: any LoginSDKObserver)

Метод добавляет переданный ему объект в список наблюдателей LoginSDK. Наблюдатель будет получать уведомления обо всех результатах работы SDK: об успешных авторизациях и о получении ошибок.

#### [](sdk-ios-methods.html#yandexloginsdk-methods-removeobserver)

-
Удаление из списка наблюдателей:

func remove(observer: any LoginSDKObserver)

Метод убирает переданный ему объект из списка наблюдателей LoginSDK.

-
Запуск процесса авторизации:

func authorize(with: UIViewController, customValues: [String: String]?, authorizationStrategy: AuthorizationStrategy) throws

Параметр [parentViewController](https://developer.apple.com/documentation/uikit/uiviewcontroller/) является обязательным, даже если выбрана [стратегия авторизации](sdk-ios-methods.html#authorizationstrategy) через приложения Яндекса, так как на устройстве пользователей этих приложений может не быть и тогда SDK перейдёт к авторизации через веб. Параметр customValues имеет значение по умолчанию nil.

#### [](sdk-ios-methods.html#yandexloginsdk-methods-logout)

-
Удаление токенов из хранилища:

func logout() throws

Метод может использоваться, если необходима повторная авторизация.

## [](sdk-ios-methods.html#authorizationstrategy)Перечисление YandexLoginSDK.AuthorizationStrategy

Перечисление (enum), определяющее стратегию авторизации пользователя в LoginSDK. В зависимости от установленного в [YandexLoginSDK](sdk-ios-methods.html#yandexloginsdk) значения свойства authorizationStrategy LoginSDK будет определять, авторизовывать ли пользователя через приложения Яндекса или через веб.

### [](sdk-ios-methods.html#authorizationstrategy-values)Значения

-
Стратегия по умолчанию:

case default

Если выбрана эта стратегия, LoginSDK попытается открыть приложение Яндекса, поддерживающее авторизацию, и авторизовать пользователя в нём. Если таких приложений нет, LoginSDK попробует авторизовать пользователя через веб.

-
Стратегия авторизации через веб:

case webOnly

Если необходимо авторизовать пользователя в веб, укажите это при активации приложения в методе [activate(with:authorizationStrategy:)](sdk-ios-methods.html#yandexloginsdk-methods-authorizationstrategy) экземпляра класса [YandexLoginSDK](sdk-ios-methods.html#yandexloginsdk). В этом случае активатор не будет требовать от приложения наличия схем для перехода в приложения Яндекса в Info.plist.

## [](sdk-ios-methods.html#loginresult)Структура LoginResult

Структура LoginResult хранит в себе токены, полученные в результате авторизации. Экземпляр этой структуры передаётся наблюдателям LoginSDK в случае успешной авторизации в [методе didFinishLogin(with:)](sdk-ios-methods.html#loginsdkobserver-methods).

### [](sdk-ios-methods.html#loginresult-vars)Переменные

-
OAuth-токен:

var token: String { get }

Используется в запросах к API сервисов Яндекса.

-
JSON Web Token:

var jwt: String { get }

Подробнее о [JSON Web Token](../../../tokens/jwt.html).

-
Представление структуры в виде словаря:

var asDictionary: [String: String] { get }

Ключами и значениями словаря являются строки. Ключом для OAuth-токена является строка “token“, для JSON Web Token — “jwt“.

-
Представление структуры в виде строки:

var asString: String { get }

## [](sdk-ios-methods.html#loginsdkobserver)Протокол LoginSDKObserver

Протокол LoginSDKObserver используется LoginSDK для уведомления наблюдателей о завершении авторизации. Реализовать протокол могут только классы.

Для подписки на изменение используется [метод addObserver(_:)](sdk-ios-methods.html#yandexloginsdk-methods-addobserver) класса YandexLoginSDK.

Для отписки от изменений используется [метод removeObserver(_:)](sdk-ios-methods.html#yandexloginsdk-methods-removeobserver) класса YandexLoginSDK.

### [](sdk-ios-methods.html#loginsdkobserver-methods)Методы

-
Завершение авторизации:

func didFinishLogin(with: Result&lt;LoginResult, any Error&gt;)

Метод вызывается в двух случаях:

LoginSDK успешно завершил авторизацию, получил OAuth-токен и JSON Web Token.

- LoginSDK столкнулся с ошибкой во время выполнения авторизации.

Случай неудачной авторизации будет иметь в качестве связанного значения ошибку с типом, соответствующим протоколу Error. В частности, эта ошибка может соответствовать протоколу YandexLoginSDKError.

## [](sdk-ios-methods.html#yandexloginsdkerror)Протокол YandexLoginSDKError

Протокол YandexLoginSDKError объединяет все ошибки, которые генерирует LoginSDK. Для любой такой ошибки можно получить строковое описание через переменную message.

### [](sdk-ios-methods.html#yandexloginsdkerror-vars)Переменные

-
Подробная информация об ошибке в виде строки:

var message: String { get }

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/2.1.1/sdk-ios-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../index.html)
- [Важные советы ](../../../tips.html)
- [Верификация сервиса ](../../../confirm-account.html)
- [Требования к Программам ](../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../suggest-description.html)
[Подключение ](../../../suggest-connection.html)
- [Конструктор кнопок ](../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../about.html)
[iOS (версия SDK 3.0.0) ](../sdk-ios-main.html)
[Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../user-information.html)

- [Токены ](../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../concepts/glossary.html)
- [Обратная связь ](../../../feedback.html)

Использование
## В этой статье:

- [Авторизация](sdk-ios-use.html#authorization)
- [Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../access.html)
- [Мобильные приложения — LoginSDK](../../about.html)
- [iOS (версия SDK 3.0.0)](../sdk-ios-main.html)
- Использование

# Использование

- [Авторизация](sdk-ios-use.html#authorization)
- [Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

## [](sdk-ios-use.html#authorization)Авторизация

Для запуска авторизации пользователя используйте метод YandexLoginSDK:

func authorize(with: UIViewController, customValues: [String: String]?, authorizationStrategy: AuthorizationStrategy) throws

- Параметр parentViewController является обязательным.

- Параметр customValues имеет значение по умолчанию nil.

- authorizationStrategy подробно описана в разделе [Справочник методов](sdk-ios-methods.html#authorizationstrategy).

Чтобы получить результат авторизации, нужно подписаться наблюдателем YandexLoginSDK через [метод add(observer:)](sdk-ios-methods.html#yandexloginsdk-methods-addobserver). Если получать уведомления от LoginSDK больше не нужно, от них можно отписаться через [метод remove(observer:)](sdk-ios-methods.html#yandexloginsdk-methods-removeobserver). Observer должен соответствовать протоколу [LoginSDKObserver](sdk-ios-methods.html#loginsdkobserver).

## [](sdk-ios-use.html#user-info)Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../user-information.html).

## [](sdk-ios-use.html#exit)Выход

Для удаления локально сохраненных токенов используйте [метод logout()](sdk-ios-methods.html#yandexloginsdk-methods-logout) класса YandexLoginSDK.

## [](sdk-ios-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../user-information.html)

- [Справочник методов](sdk-ios-methods.html)

- [Коды ошибок](sdk-ios-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/2.1.0/sdk-ios-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.0)](sdk-ios.html)
- Коды ошибок

# Коды ошибок

Код

Описание

YXLErrorCodeNotActivated

LoginSDK не был активирован.

YXLErrorCodeCancelled

Авторизационный контроллер был закрыт пользователем.

YXLErrorCodeDenied

Пользователь запретил авторизацию.

YXLErrorCodeInvalidClient

Был передан неверный [идентификатор приложения](../../../../register-client.html).

YXLErrorCodeInvalidScope

При регистрации у приложения были указаны неверные [скоупы](../../../../register-client.html#access).

YXLErrorCodeOther

Прочие ошибки.

YXLErrorCodeRequestError

Внутренняя ошибка HTTP-запроса.

YXLErrorCodeRequestConnectionError

Ошибка соединения.

YXLErrorCodeRequestSSLError

Ошибка SSL.

YXLErrorCodeRequestNetworkError

Прочие ошибки HTTP.

YXLErrorCodeRequestResponseError

Получен ответ об ошибке обработки HTTP-запроса (код ответа не в диапазоне 200..299).

YXLErrorCodeRequestEmptyDataError

Был получен пустой HTTP-ответ.

YXLErrorCodeRequestJwtError

Был возвращен некорректный ответ на JWT-запрос.

YXLErrorCodeRequestJwtInternalError

Внутренняя JWT-ошибка.

YXLErrorCodeInvalidState

Неверный параметр состояния.

YXLErrorCodeInvalidCode

Произошла ошибка при получении токена по [авторизационному коду](../../../../codes/code-and-token.html).

YXLActivationErrorCodeNoAppId

Идентификатор приложения nil.

YXLActivationErrorCodeNoQuerySchemeInInfoPList

В Info.plist нет схемы yandexauth.

YXLActivationErrorCodeNoSchemeInInfoPList

В Info.plist нет схемы yx&lt;идентификатор клиентского приложения&gt;.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/2.1.0/sdk-ios-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Подключение
## В этой статье:

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.0)](sdk-ios.html)
- Подключение

# Подключение

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

LoginSDK для iOS подключается из репозитория CocoaPods: [YandexLoginSDK](https://cocoapods.org/pods/yandexloginsdk).

## [](sdk-ios-install.html#podfile)Шаг 1. Настройка Podfile

Для импорта LoginSDK из CocoaPods необходимо настроить [Podfile](http://guides.cocoapods.org/using/the-podfile.html):

-
Перейдите в каталог с Xcode-проектом и создайте текстовый файл Podfile.

-
Откройте Podfile и добавьте зависимость:

pod &#x27;YandexLoginSDK&#x27;

-
Примените изменения командой:

$ pod install

## [](sdk-ios-install.html#info-plist)Шаг 2. Настройка Info.plist

Добавьте в файл Info.plist строки:

&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;yandexauth&lt;/string&gt;
&lt;string&gt;yandexauth2&lt;/string&gt;
&lt;string&gt;yandexauth4&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;CFBundleURLTypes&lt;/key&gt;
&lt;array&gt;
&lt;dict&gt;
&lt;key&gt;CFBundleURLName&lt;/key&gt;
&lt;string&gt;YandexLoginSDK&lt;/string&gt;
&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;yx&lt;идентификатор приложения_clientID&gt;&lt;/string&gt;
&lt;/array&gt;
&lt;/dict&gt;
&lt;/array&gt;

- Идентификатор приложения Client ID доступен в [свойствах приложения](../../../../register-client.html#app-params).

## [](sdk-ios-install.html#entitlements)Шаг 3. Настройка Entitlements

LoginSDK общается с приложениями Яндекса через [Universal Links](https://developer.apple.com/ios/universal-links/). Для их работы добавьте в Capability: Associated Domains строку:

applinks:yx{идентификатор приложения}.oauth.yandex.ru

Например, если [идентификатор приложения (Client ID)](../../../../register-client.html#app-params) ABCD2e, добавляемая строка  выглядит так:

applinks:yxABCD2e.oauth.yandex.ru

## [](sdk-ios-install.html#lib-import)Шаг 4. Импорт заголовочных файлов

В файлы проекта, где задействован LoginSDK, добавьте заголовок:

Swift
Objective-C

import &lt;YandexLoginSDK&gt;

#import &lt;YandexLoginSDK/YandexLoginSDK.h&gt;

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/2.1.0/sdk-ios-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник методов | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Справочник методов
## В этой статье:

- [Класс YXLSdk](sdk-ios-methods.html#yxlsdk)
- [Методы](sdk-ios-methods.html#yxlsdk-methods)
- [Свойства](sdk-ios-methods.html#yxlsdk-props)
- [Класс YXLObserver](sdk-ios-methods.html#yxlobserver)
- [Методы](sdk-ios-methods.html#yxlobserver-methods)
- [Класс YXLLoginResult](sdk-ios-methods.html#yxlloginresult)
- [Свойства](sdk-ios-methods.html#yxlloginresult-props)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.0)](sdk-ios.html)
- Справочник методов

# Справочник методов

- [Класс YXLSdk](sdk-ios-methods.html#yxlsdk)
[Методы](sdk-ios-methods.html#yxlsdk-methods)
- [Свойства](sdk-ios-methods.html#yxlsdk-props)

- [Класс YXLObserver](sdk-ios-methods.html#yxlobserver)
[Методы](sdk-ios-methods.html#yxlobserver-methods)

- [Класс YXLLoginResult](sdk-ios-methods.html#yxlloginresult)
[Свойства](sdk-ios-methods.html#yxlloginresult-props)

## [](sdk-ios-methods.html#yxlsdk)Класс YXLSdk

Класс авторизации. Все методы класса YXLSdk можно использовать только после активации LoginSDK.

### [](sdk-ios-methods.html#yxlsdk-methods)Методы

-
Активация LoginSDK:

- (BOOL)activateWithAppId:(NSString *)appId error:(NSError *__autoreleasing *)error

-
Проверка объекта NSUserActivity на наличие токена:

- (BOOL)processUserActivity:(NSUserActivity *)userActivity

-
Проверка объекта NSURL на наличие информации об авторизации:

- (BOOL)handleOpenURL:(NSURL *)url sourceApplication:(nullable NSString
*)sourceApplication

-
Добавление observer'а:

- (void)addObserver:(id&lt;YXLObserver&gt;)observer NS_SWIFT_NAME(add(observer:))

-
Удаление observer'а:

- (void)removeObserver:(id&lt;YXLObserver&gt;)observer NS_SWIFT_NAME(remove(observer:))

-
Начало процесса авторизации. Откроется одно из приложений Яндекса или браузер:

- (void)authorize

-
Удаление всех сохраненных токенов. Метод используется, если нужно запросить новый набор токенов:

- (void)logout

### [](sdk-ios-methods.html#yxlsdk-props)Свойства

-
Возвращение строки с версией LoginSDK:

@property (class, readonly) NSString *sdkVersion

## [](sdk-ios-methods.html#yxlobserver)Класс YXLObserver

Класс событий авторизации.

### [](sdk-ios-methods.html#yxlobserver-methods)Методы

-
Метод, который вызывается при успешной авторизации. Параметр result содержит поля с токенами:

- (void)loginDidFinishWithResult:(id&lt;YXLLoginResult&gt;)result

-
Метод, который вызывается авторизации с ошибкой. Параметр error содержит [код ошибки](sdk-ios-errors.html):

- (void)loginDidFinishWithError:(NSError *)error

## [](sdk-ios-methods.html#yxlloginresult)Класс YXLLoginResult

Класс, который возвращается от LoginSDK после успешной авторизации.

### [](sdk-ios-methods.html#yxlloginresult-props)Свойства

-
Токен для использования в параметрах запроса к сервисам Яндекса:

(nonatomic, copy, readonly) NSString *token

-
[JSON Web Token](../../../../tokens/jwt.html).

(nonatomic, copy, readonly) NSString *jwt

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/2.1.0/sdk-ios-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Использование
## В этой статье:

- [Шаг 1. Инициализация](sdk-ios-use.html#initialization)
- [Шаг 2. Авторизация](sdk-ios-use.html#authorization)
- [Шаг 3. Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Шаг 4. Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.0)](sdk-ios.html)
- Использование

# Использование

- [Шаг 1. Инициализация](sdk-ios-use.html#initialization)
- [Шаг 2. Авторизация](sdk-ios-use.html#authorization)
- [Шаг 3. Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Шаг 4. Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

Для получения токенов выполните действия:

## [](sdk-ios-use.html#initialization)Шаг 1. Инициализация

-
Для инициализации LoginSDK добавьте в AppDelegate код:

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
// some code
do {
try YXLSdk.shared.activate(withAppId: &quot;идентификатор приложения_clientID&quot;)
} catch {
// process error
}
// some other code
}

@available(iOS 8.0, *)
func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([Any]?) -&gt; Void) -&gt; Bool {
YXLSdk.shared.processUserActivity(userActivity)
return true
}

func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: Any) -&gt; Bool {
return YXLSdk.shared.handleOpen(url, sourceApplication: sourceApplication)
}

@available(iOS 9.0, *)
func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -&gt; Bool {
return YXLSdk.shared.handleOpen(url, sourceApplication: options[UIApplicationOpenURLOptionsKey.sourceApplication] as? String)
}

-
Если вы используете [UIScene](https://developer.apple.com/documentation/uikit/uiscene), то методы для открытия URL работают через протокол [UISceneDelegate](https://developer.apple.com/documentation/uikit/uiscenedelegate).

Для передачи URL в YXLSdk используйте соответствующий метод SceneDelegate:

func scene(_ scene: UIScene, openURLContexts URLContexts: Set&lt;UIOpenURLContext&gt;)
{
URLContexts.forEach({ context in
if YXLSdk.shared.isUrlRelated(toSdk: context.url) {
YXLSdk.shared.handleOpen(context.url, sourceApplication: nil)
}
})
}

-
Внутри YandexLoginSDK можно передавать скоупы (права доступа для приложения). Для этого у объекта YXLSdk настраиваются параметры прав доступа:

scopes — обязательные;

- optionalScopes — опциональные.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../../../../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Если пользователь уже авторизован и запрашиваются дополнительные права доступа, для которых пользователь еще не давал разрешения, то будет отображен экран запроса для новых доступов.

## [](sdk-ios-use.html#authorization)Шаг 2. Авторизация

-
Для запуска авторизации пользователя используйте метод:

YXLSdk.shared.authorize()

По умолчанию пользователь будет перенаправлен для авторизации в браузер (внешнее приложении).

Для версий iOS 13 и выше существует возможность авторизации при помощи ASWebAuthenticationSession. Для этого необходимо передать параметр parentController, в котором будет показан контроллер для авторизации:

YXLSdk.shared.authorize(withUid: 0, login: nil, phone: nil, firstName: nil, lastName: nil, customValues: nil, parentController: viewController)

-
Чтобы получать события с результатами авторизации, необходимо добавиться observer-ом:

YXLSdk.shared.add(observer: self)

-
При получении успешного результата авторизации будет вызван метод с параметром result, содержащим токены:

func loginDidFinish(with result: YXLLoginResult) {
// use result.token and result.jwt
}

result.token — OAuth-токен для использования в запросах к [API сервисов Яндекса](../../../../concepts/ya-oauth-intro.html).

-
result.jwt — [JSON Web Token](../../../../tokens/jwt.html).

-
В случае ошибки будет вызван:

func loginDidFinishWithError(_ error: Error) {
// process error
}

error — [ошибка](sdk-ios-errors.html) с доменом kYXLErrorDomain и кодом YXLErrorCode.

## [](sdk-ios-use.html#user-info)Шаг 3. Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../../user-information.html).

## [](sdk-ios-use.html#exit)Шаг 4. Выход

Для удаления локально сохраненных токенов используйте метод:

YXLSdk.shared.logout()

## [](sdk-ios-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../../user-information.html)

- [Справочник методов](sdk-ios-methods.html)

- [Коды ошибок](sdk-ios-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/2.1.0/sdk-ios.html

--------------------------------------------------------------------------------

**Заголовок:** Схема работы | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
- iOS (версия SDK 2.1.0)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Схема работы- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- iOS (версия SDK 2.1.0)
- Схема работы

# Схема работы
Чтобы настроить в вашем сервисе авторизацию при помощи LoginSDK, выполните шаги:

-
[Зарегистрируйте](../../../../register-client.html) приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

В разделе Платформы выберите iOS-приложение и укажите параметры вашего сервиса:

iOS Appid. Точный идентификатор iOS-приложения, например A1B2C3D4E5.com.domain.application. Состоит из Prefix и Bundle ID. Подробнее про идентификаторы iOS-приложений читайте в [документации Apple](https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/AppID.html).

-
iOS AppStore URL. Ссылка на приложение в AppStore.

Для настройки LoginSDK вам понадобится [параметр Client ID](../../../../register-client.html#app-params) приложения.

-
[Подключите](sdk-ios-install.html) библиотеку YandexLoginSDK и настройте конфигурационные файлы.

-
[Настройте](sdk-ios-use.html) ваш сервис для работы с токенами.

-
Получите [информацию о пользователе](../../../../user-information.html).

Примечание

LoginSDK для iOS позволяет сохранять токены в хранилище устройства. При вызове LoginSDK проверяет наличие сохраненных токенов и отправляет запрос авторизации только в том случае, если токенов нет.

Схема работы LoginSDK для iOS:

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios-delegate.html

--------------------------------------------------------------------------------

**Заголовок:** Настройка делегатов | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Настройка делегатов
## В этой статье:

- [Методы UIApplicationDelegate](sdk-ios-delegate.html#metody-uiapplicationdelegate)
- [Методы UISceneDelegate](sdk-ios-delegate.html#metody-uiscenedelegate)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.1)](sdk-ios.html)
- Настройка делегатов

# Настройка делегатов

- [Методы UIApplicationDelegate](sdk-ios-delegate.html#metody-uiapplicationdelegate)
- [Методы UISceneDelegate](sdk-ios-delegate.html#metody-uiscenedelegate)

Для нормальной работы LoginSDK в [методах](sdk-ios-use.html#initialization) типов, которые реализуют протоколы UIApplicationDelegate и UISceneDelegate, необходимо добавить вызов функций, описанных ниже.

## [](sdk-ios-delegate.html#metody-uiapplicationdelegate)Методы UIApplicationDelegate

- В методе application(_:didFinishLaunchingWithOptions:) необходимо вызвать метод activate(with:authorizationStrategy:) экземпляра класса YandexLoginSDK, активирующий LoginSDK. Если были выполнены не все настройки приложения, вызов метода закончится ошибкой.

- В методе application(_:open:options:) необходимо вызвать метод handleOpenURL(_:) экземпляра класса YandexLoginSDK, получающий токены. Если результат не будет получен, вызов метода закончится ошибкой. Чтобы избежать обработки ошибок, используйте метод tryHandleOpenURL(_:).

- В методе application(_:continue:restorationHandler:) необходимо вызвать метод handleUserActivity(_:) экземпляра класса YandexLoginSDK, получающий код авторизации. Если результат не будет получен, вызов метода закончится ошибкой. Чтобы избежать обработки ошибок, используйте метод tryHandleUserActivity(_:).

@main
class AppDelegate: UIResponder, UIApplicationDelegate {

func application(
_ application: UIApplication,
didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
) -&gt; Bool {

do {
let clientID = &quot;[client id]&quot;
try YandexLoginSDK.shared.activate(with: clientID)
} catch {
// handle error
}

return true
}

func application(
_ app: UIApplication,
open url: URL,
options: [UIApplication.OpenURLOptionsKey : Any] = [:]
) -&gt; Bool {

do {
try YandexLoginSDK.shared.handleOpenURL(url)
} catch {
// handle error
}

return true
}

func application(
_ application: UIApplication,
continue userActivity: NSUserActivity,
restorationHandler: @escaping ([UIUserActivityRestoring]?) -&gt; Void
) -&gt; Bool {

do {
try YandexLoginSDK.shared.handleUserActivity(userActivity)
} catch {
// handle error
}

return true
}

}

## [](sdk-ios-delegate.html#metody-uiscenedelegate)Методы UISceneDelegate

Если приложение использует сцены, то методы для открытия URL работают через протокол [UISceneDelegate](https://developer.apple.com/documentation/uikit/uiscenedelegate).

В методе scene(_:openURLContexts:) необходимо вызвать метод handleOpenURL(_:) экземпляра класса YandexLoginSDK, получающий токены. Если результат не будет получен, вызов метода закончится ошибкой. Чтобы избежать обработки ошибок, используйте метод tryHandleOpenURL(_:).

@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate {

func scene(
_ scene: UIScene,
openURLContexts URLContexts: Set&lt;UIOpenURLContext&gt;
) {
for urlContext in URLContexts {
let url = urlContext.url

do {
try YandexLoginSDK.shared.handleOpenURL(url)
} catch {
// handle error
}
}
}

}

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios-errors.html

--------------------------------------------------------------------------------

**Заголовок:** Коды ошибок | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Коды ошибок- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.1)](sdk-ios.html)
- Коды ошибок

# Коды ошибок

Код

Описание

YXLErrorCodeNotActivated

LoginSDK не был активирован.

YXLErrorCodeCancelled

Авторизационный контроллер был закрыт пользователем.

YXLErrorCodeDenied

Пользователь запретил авторизацию.

YXLErrorCodeInvalidClient

Был передан неверный [идентификатор приложения](../../../../register-client.html).

YXLErrorCodeInvalidScope

При регистрации у приложения были указаны неверные [скоупы](../../../../register-client.html#access).

YXLErrorCodeOther

Прочие ошибки.

YXLErrorCodeRequestError

Внутренняя ошибка HTTP-запроса.

YXLErrorCodeRequestConnectionError

Ошибка соединения.

YXLErrorCodeRequestSSLError

Ошибка SSL.

YXLErrorCodeRequestNetworkError

Прочие ошибки HTTP.

YXLErrorCodeRequestResponseError

Получен ответ об ошибке обработки HTTP-запроса (код ответа не в диапазоне 200..299).

YXLErrorCodeRequestEmptyDataError

Был получен пустой HTTP-ответ.

YXLErrorCodeRequestJwtError

Был возвращен некорректный ответ на JWT-запрос.

YXLErrorCodeRequestJwtInternalError

Внутренняя JWT-ошибка.

YXLErrorCodeInvalidState

Неверный параметр состояния.

YXLErrorCodeInvalidCode

Произошла ошибка при получении токена по [авторизационному коду](../../../../codes/code-and-token.html).

YXLActivationErrorCodeNoAppId

Идентификатор приложения nil.

YXLActivationErrorCodeNoQuerySchemeInInfoPList

В Info.plist нет схемы yandexauth.

YXLActivationErrorCodeNoSchemeInInfoPList

В Info.plist нет схемы yx&lt;идентификатор клиентского приложения&gt;.

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios-install.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Подключение
## В этой статье:

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.1)](sdk-ios.html)
- Подключение

# Подключение

- [Шаг 1. Настройка Podfile](sdk-ios-install.html#podfile)
- [Шаг 2. Настройка Info.plist](sdk-ios-install.html#info-plist)
- [Шаг 3. Настройка Entitlements](sdk-ios-install.html#entitlements)
- [Шаг 4. Импорт заголовочных файлов](sdk-ios-install.html#lib-import)

LoginSDK для iOS подключается из репозитория CocoaPods: [YandexLoginSDK](https://cocoapods.org/pods/yandexloginsdk).

## [](sdk-ios-install.html#podfile)Шаг 1. Настройка Podfile

Для импорта LoginSDK из CocoaPods необходимо настроить [Podfile](http://guides.cocoapods.org/using/the-podfile.html):

-
Перейдите в каталог с Xcode-проектом и создайте текстовый файл Podfile.

-
Откройте Podfile и добавьте зависимость:

pod &#x27;YandexLoginSDK&#x27;

-
Примените изменения командой:

$ pod install

## [](sdk-ios-install.html#info-plist)Шаг 2. Настройка Info.plist

Добавьте в файл Info.plist строки:

&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;yandexauth&lt;/string&gt;
&lt;string&gt;yandexauth2&lt;/string&gt;
&lt;string&gt;yandexauth4&lt;/string&gt;
&lt;/array&gt;
&lt;key&gt;CFBundleURLTypes&lt;/key&gt;
&lt;array&gt;
&lt;dict&gt;
&lt;key&gt;CFBundleURLName&lt;/key&gt;
&lt;string&gt;YandexLoginSDK&lt;/string&gt;
&lt;key&gt;CFBundleURLSchemes&lt;/key&gt;
&lt;array&gt;
&lt;string&gt;yx&lt;идентификатор приложения_clientID&gt;&lt;/string&gt;
&lt;/array&gt;
&lt;/dict&gt;
&lt;/array&gt;

- Идентификатор приложения Client ID доступен в [свойствах приложения](../../../../register-client.html#app-params).

## [](sdk-ios-install.html#entitlements)Шаг 3. Настройка Entitlements

LoginSDK общается с приложениями Яндекса через [Universal Links](https://developer.apple.com/ios/universal-links/). Для их работы добавьте в Capability: Associated Domains строку:

applinks:yx{идентификатор приложения}.oauth.yandex.ru

Например, если [идентификатор приложения (Client ID)](../../../../register-client.html#app-params) ABCD2e, добавляемая строка  выглядит так:

applinks:yxABCD2e.oauth.yandex.ru

## [](sdk-ios-install.html#lib-import)Шаг 4. Импорт заголовочных файлов

В файлы проекта, где задействован LoginSDK, добавьте заголовок:

Swift
Objective-C

import &lt;YandexLoginSDK&gt;

#import &lt;YandexLoginSDK/YandexLoginSDK.h&gt;

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios-methods.html

--------------------------------------------------------------------------------

**Заголовок:** Справочник методов | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Справочник методов
## В этой статье:

- [Класс YXLSdk](sdk-ios-methods.html#yxlsdk)
- [Методы](sdk-ios-methods.html#yxlsdk-methods)
- [Свойства](sdk-ios-methods.html#yxlsdk-props)
- [Класс YXLObserver](sdk-ios-methods.html#yxlobserver)
- [Методы](sdk-ios-methods.html#yxlobserver-methods)
- [Класс YXLLoginResult](sdk-ios-methods.html#yxlloginresult)
- [Свойства](sdk-ios-methods.html#yxlloginresult-props)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.1)](sdk-ios.html)
- Справочник методов

# Справочник методов

- [Класс YXLSdk](sdk-ios-methods.html#yxlsdk)
[Методы](sdk-ios-methods.html#yxlsdk-methods)
- [Свойства](sdk-ios-methods.html#yxlsdk-props)

- [Класс YXLObserver](sdk-ios-methods.html#yxlobserver)
[Методы](sdk-ios-methods.html#yxlobserver-methods)

- [Класс YXLLoginResult](sdk-ios-methods.html#yxlloginresult)
[Свойства](sdk-ios-methods.html#yxlloginresult-props)

## [](sdk-ios-methods.html#yxlsdk)Класс YXLSdk

Класс авторизации. Все методы класса YXLSdk можно использовать только после активации LoginSDK.

### [](sdk-ios-methods.html#yxlsdk-methods)Методы

-
Активация LoginSDK:

- (BOOL)activateWithAppId:(NSString *)appId error:(NSError *__autoreleasing *)error

-
Проверка объекта NSUserActivity на наличие токена:

- (BOOL)processUserActivity:(NSUserActivity *)userActivity

-
Проверка объекта NSURL на наличие информации об авторизации:

- (BOOL)handleOpenURL:(NSURL *)url sourceApplication:(nullable NSString
*)sourceApplication

-
Добавление observer'а:

- (void)addObserver:(id&lt;YXLObserver&gt;)observer NS_SWIFT_NAME(add(observer:))

-
Удаление observer'а:

- (void)removeObserver:(id&lt;YXLObserver&gt;)observer NS_SWIFT_NAME(remove(observer:))

-
Начало процесса авторизации. Откроется одно из приложений Яндекса или браузер:

- (void)authorize

-
Удаление всех сохраненных токенов. Метод используется, если нужно запросить новый набор токенов:

- (void)logout

### [](sdk-ios-methods.html#yxlsdk-props)Свойства

-
Возвращение строки с версией LoginSDK:

@property (class, readonly) NSString *sdkVersion

## [](sdk-ios-methods.html#yxlobserver)Класс YXLObserver

Класс событий авторизации.

### [](sdk-ios-methods.html#yxlobserver-methods)Методы

-
Метод, который вызывается при успешной авторизации. Параметр result содержит поля с токенами:

- (void)loginDidFinishWithResult:(id&lt;YXLLoginResult&gt;)result

-
Метод, который вызывается авторизации с ошибкой. Параметр error содержит [код ошибки](sdk-ios-errors.html):

- (void)loginDidFinishWithError:(NSError *)error

## [](sdk-ios-methods.html#yxlloginresult)Класс YXLLoginResult

Класс, который возвращается от LoginSDK после успешной авторизации.

### [](sdk-ios-methods.html#yxlloginresult-props)Свойства

-
Токен для использования в параметрах запроса к сервисам Яндекса:

(nonatomic, copy, readonly) NSString *token

-
[JSON Web Token](../../../../tokens/jwt.html).

(nonatomic, copy, readonly) NSString *jwt

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios-use.html

--------------------------------------------------------------------------------

**Заголовок:** Использование | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

Использование
## В этой статье:

- [Шаг 1. Инициализация](sdk-ios-use.html#initialization)
- [Шаг 2. Авторизация](sdk-ios-use.html#authorization)
- [Шаг 3. Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Шаг 4. Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- [iOS (версия SDK 2.1.1)](sdk-ios.html)
- Использование

# Использование

- [Шаг 1. Инициализация](sdk-ios-use.html#initialization)
- [Шаг 2. Авторизация](sdk-ios-use.html#authorization)
- [Шаг 3. Получение информации о пользователе](sdk-ios-use.html#user-info)
- [Шаг 4. Выход](sdk-ios-use.html#exit)
- [Полезные ссылки](sdk-ios-use.html#useful-links)

Для получения токенов выполните действия:

## [](sdk-ios-use.html#initialization)Шаг 1. Инициализация

-
Для инициализации LoginSDK добавьте в AppDelegate код:

func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool {
// some code
do {
try YXLSdk.shared.activate(withAppId: &quot;идентификатор приложения_clientID&quot;)
} catch {
// process error
}
// some other code
}

@available(iOS 8.0, *)
func application(_ application: UIApplication, continue userActivity: NSUserActivity, restorationHandler: @escaping ([Any]?) -&gt; Void) -&gt; Bool {
YXLSdk.shared.processUserActivity(userActivity)
return true
}

func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: Any) -&gt; Bool {
return YXLSdk.shared.handleOpen(url, sourceApplication: sourceApplication)
}

@available(iOS 9.0, *)
func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -&gt; Bool {
return YXLSdk.shared.handleOpen(url, sourceApplication: options[UIApplicationOpenURLOptionsKey.sourceApplication] as? String)
}

-
Если вы используете [UIScene](https://developer.apple.com/documentation/uikit/uiscene), то методы для открытия URL работают через протокол [UISceneDelegate](https://developer.apple.com/documentation/uikit/uiscenedelegate).

Для передачи URL в YXLSdk используйте соответствующий метод SceneDelegate:

func scene(_ scene: UIScene, openURLContexts URLContexts: Set&lt;UIOpenURLContext&gt;)
{
URLContexts.forEach({ context in
if YXLSdk.shared.isUrlRelated(toSdk: context.url) {
YXLSdk.shared.handleOpen(context.url, sourceApplication: nil)
}
})
}

-
Внутри YandexLoginSDK можно передавать скоупы (права доступа для приложения). Для этого у объекта YXLSdk настраиваются параметры прав доступа:

scopes — обязательные;

- optionalScopes — опциональные.

Права должны запрашиваться из перечня, определенного при [регистрации приложения](../../../../register-client.html#access). Узнать допустимые права можно по ссылке [https://oauth.yandex.ru/client/&lt;client_id&gt;/info](https://oauth.yandex.ru/client/%3Cclient_id%3E/info), указав вместо &lt;client_id&gt; идентификатор приложения.

Если пользователь уже авторизован и запрашиваются дополнительные права доступа, для которых пользователь еще не давал разрешения, то будет отображен экран запроса для новых доступов.

## [](sdk-ios-use.html#authorization)Шаг 2. Авторизация

-
Для запуска авторизации пользователя используйте метод:

YXLSdk.shared.authorize()

По умолчанию пользователь будет перенаправлен для авторизации в браузер (внешнее приложении).

Для версий iOS 13 и выше существует возможность авторизации при помощи ASWebAuthenticationSession. Для этого необходимо передать параметр parentController, в котором будет показан контроллер для авторизации:

YXLSdk.shared.authorize(withUid: 0, login: nil, phone: nil, firstName: nil, lastName: nil, customValues: nil, parentController: viewController)

Для того чтобы процесс авторизации проходил через приложение, до начала авторизации выставьте специальный флаг:

Swift
Objective-C

UserDefaults.standard.setValue(true, forKey:&quot;blockBrowser&quot;)

[[NSUserDefaults standardUserDefaults] setObject:@(YES) forKey:@&quot;blockBrowser&quot;];

-
Чтобы получать события с результатами авторизации, необходимо добавиться observer-ом:

YXLSdk.shared.add(observer: self)

-
При получении успешного результата авторизации будет вызван метод с параметром result, содержащим токены:

func loginDidFinish(with result: YXLLoginResult) {
// use result.token and result.jwt
}

result.token — OAuth-токен для использования в запросах к [API сервисов Яндекса](../../../../concepts/ya-oauth-intro.html).

-
result.jwt — [JSON Web Token](../../../../tokens/jwt.html).

-
В случае ошибки будет вызван:

func loginDidFinishWithError(_ error: Error) {
// process error
}

error — [ошибка](sdk-ios-errors.html) с доменом kYXLErrorDomain и кодом YXLErrorCode.

## [](sdk-ios-use.html#user-info)Шаг 3. Получение информации о пользователе

Полученный токен можно обменять на [информацию о пользователе](../../../../user-information.html).

## [](sdk-ios-use.html#exit)Шаг 4. Выход

Для удаления локально сохраненных токенов используйте метод:

YXLSdk.shared.logout()

## [](sdk-ios-use.html#useful-links)Полезные ссылки

- [Обмен токена на информацию о пользователе](../../../../user-information.html)

- [Справочник методов](sdk-ios-methods.html)

- [Коды ошибок](sdk-ios-errors.html)

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/archive/3.0.0/sdk-ios.html

--------------------------------------------------------------------------------

**Заголовок:** LoginSDK для iOS | OAuth для Яндекс ID


- [О сервисе ](../../../../index.html)
- [Важные советы ](../../../../tips.html)
- [Верификация сервиса ](../../../../confirm-account.html)
- [Требования к Программам ](../../../../requirements.html)
- [Подключение к API Яндекс ID ](../../../../how-to.html)
[Этап 1. Регистрация приложения ](../../../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../../../access.html)
[Веб-платформы — мгновенная авторизация ](../../../../suggest-description.html)
[Подключение ](../../../../suggest-connection.html)
- [Конструктор кнопок ](../../../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../../../about.html)
[iOS (версия SDK 3.0.0) ](../../sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив
iOS (версия SDK 2.1.1)
[Схема работы ](sdk-ios.html)
- [Подключение ](sdk-ios-install.html)
- [Настройка делегатов ](sdk-ios-delegate.html)
- [Использование ](sdk-ios-use.html)
- [Справочник методов ](sdk-ios-methods.html)
- [Коды ошибок ](sdk-ios-errors.html)

- iOS (версия SDK 2.1.0)
- Android (версия SDK 3.1.0)
- Android (версия SDK 2.5.1)

- [Альтернативный способ с кодом подтверждения ](../../../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../../../user-information.html)

- [Токены ](../../../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../../../concepts/glossary.html)
- [Обратная связь ](../../../../feedback.html)

LoginSDK для iOS- [Подключение к API Яндекс ID](../../../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../../../access.html)
- [Мобильные приложения — LoginSDK](../../../about.html)
- Архив
- iOS (версия SDK 2.1.1)
- Схема работы

# LoginSDK для iOS
На данный момент последняя версия LoginSDK для iOS — 3.0.2. К сожалению, эта версия позволяет проходить авторизацию только через веб-интерфейс и не предусматривает вход через приложения Яндекса. Мы уже работаем над исправлением этой ситуации.

Если вам необходимо проходить авторизацию через приложения Яндекса, используйте версию LoginSDK [2.1.1.](../../sdk-ios-main.html) Она доступна как через Cocoapods, так и через Swift Package Manager с указанием конекретной версии или коммита.
Чтобы процесс авторизации в версии 2.1.1 проходил через приложение, до начала авторизации выставьте специальный флаг:

Swift
Objective-C

UserDefaults.standard.setValue(true, forKey:&quot;blockBrowser&quot;)

[[NSUserDefaults standardUserDefaults] setObject:@(YES) forKey:@&quot;blockBrowser&quot;];

### Была ли статья полезна?
ДаНет

## mobileauthsdk/ios/sdk-ios-main.html

--------------------------------------------------------------------------------

**Заголовок:** LoginSDK для iOS | OAuth для Яндекс ID


- [О сервисе ](../../index.html)
- [Важные советы ](../../tips.html)
- [Верификация сервиса ](../../confirm-account.html)
- [Требования к Программам ](../../requirements.html)
- [Подключение к API Яндекс ID ](../../how-to.html)
[Этап 1. Регистрация приложения ](../../register-client.html)
- [Этап 2. Получение OAuth-токена ](../../access.html)
[Веб-платформы — мгновенная авторизация ](../../suggest-description.html)
[Подключение ](../../suggest-connection.html)
- [Конструктор кнопок ](../../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../about.html)
[iOS (версия SDK 3.0.0) ](sdk-ios-main.html)
[Подключение ](2.1.1/sdk-ios-install.html)
- [Использование ](2.1.1/sdk-ios-use.html)
- [Справочник методов ](2.1.1/sdk-ios-methods.html)
- [Коды ошибок ](2.1.1/sdk-ios-errors.html)

- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../../user-information.html)

- [Токены ](../../concepts/ya-oauth-intro.html)
- [Глоссарий ](../../concepts/glossary.html)
- [Обратная связь ](../../feedback.html)

LoginSDK для iOS- [Подключение к API Яндекс ID](../../how-to.html)
- [Этап 2. Получение OAuth-токена](../../access.html)
- [Мобильные приложения — LoginSDK](../about.html)
- iOS (версия SDK 3.0.0)

# LoginSDK для iOS
Чтобы настроить в вашем сервисе авторизацию при помощи LoginSDK, выполните шаги:

-
[Зарегистрируйте](../../register-client.html) приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/).

В разделе Платформы выберите iOS-приложение и укажите параметры вашего сервиса:

iOS App ID. Точный идентификатор iOS-приложения, например A1B2C3D4E5.com.domain.application. Состоит из Prefix и Bundle ID. Подробнее про идентификаторы iOS-приложений читайте в [документации Apple](https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/AppID.html).

-
iOS AppStore URL. Ссылка на приложение в AppStore.

Для настройки LoginSDK вам понадобится [параметр Client ID](../../register-client.html#app-params) приложения.

-
[Подключите](archive/3.0.0/sdk-ios-install.html) библиотеку YandexLoginSDK и настройте конфигурационные файлы.

-
[Настройте](archive/3.0.0/sdk-ios-use.html) ваш сервис для работы с токенами.

-
Получите [информацию о пользователе](../../user-information.html).

Примечание

LoginSDK для iOS позволяет сохранять токены в хранилище устройства. При вызове LoginSDK проверяет наличие сохраненных токенов и отправляет запрос авторизации только в том случае, если токенов нет.

Схема работы LoginSDK для iOS:

### Была ли статья полезна?
ДаНет

## register-api.html

--------------------------------------------------------------------------------

**Заголовок:** Регистрация приложения для доступа к API | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
[Приложение для авторизации ](register-auth.html)
- [Приложение для доступа к API ](register-api.html)

- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Регистрация приложения для доступа к API- [Подключение к API Яндекс ID](how-to.html)
- [Этап 1. Регистрация приложения](register-client.html)
- Приложение для доступа к API

# Регистрация приложения для доступа к API

-
Авторизуйтесь в сервисе [Яндекс OAuth](https://oauth.yandex.ru/) через ваш аккаунт на Яндексе, с помощью которого вы планируете продолжать разработку.

Важно

Чтобы не потерять доступ к приложению, используйте аккаунт, в который вы всегда сможете войти. Убедитесь, что вы сможете пройти процедуру верификации на этом аккаунте.

-
Создайте приложение одним из способов:

Нажмите Создать приложение. Во всплывающем окне выберите Для доступа к API или отладки.

-
Перейдите по ссылке: [https://oauth.yandex.ru/client/new/](https://oauth.yandex.ru/client/new/).

-
Укажите сведения о приложении:

Заполните поле Название вашего сервиса.

-
Заполните поле Контактная почта. Убедитесь, что она актуальна, чтобы не пропустить важную информацию об изменениях в продукте.

-
Укажите, какие доступы вам необходимы. Названия разрешений можно найти в документации сервиса, к которому вы получаете доступ.

Важно

Изменить значение redirect_uri для приложений для доступа к API нельзя. Для получения токенов используйте значение: [https://oauth.yandex.ru/verification_code](https://oauth.yandex.ru/verification_code).

-
Нажмите Создать приложение.

Для настройки подключения к API используйте параметры, которые указаны на странице приложения в личном кабинете Яндекс OAuth, и документацию сервисов, API которых вы используете.

### Была ли статья полезна?
ДаНет

## register-auth.html

--------------------------------------------------------------------------------

**Заголовок:** Приложение для авторизации - Этап 1. Регистрация приложения | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
[Приложение для авторизации ](register-auth.html)
- [Приложение для доступа к API ](register-api.html)

- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

## В этой статье:

- [Регистрация приложения для авторизации](register-auth.html#registraciya-prilozheniya-dlya-avtorizacii)
- [Шаг 1. Создание приложения](register-auth.html#create)
- [Шаг 2. Платформы приложения](register-auth.html#shag-2-platformy-prilozheniya)
- [Шаг 3. Доступ к данным](register-auth.html#shag-3-dostup-k-dannym)
- [Завершение регистрации](register-auth.html#finish)

- [Подключение к API Яндекс ID](how-to.html)
- [Этап 1. Регистрация приложения](register-client.html)
- Приложение для авторизации

- [Регистрация приложения для авторизации](register-auth.html#registraciya-prilozheniya-dlya-avtorizacii)
[Шаг 1. Создание приложения](register-auth.html#create)
- [Шаг 2. Платформы приложения](register-auth.html#shag-2-platformy-prilozheniya)
- [Шаг 3. Доступ к данным](register-auth.html#shag-3-dostup-k-dannym)
- [Завершение регистрации](register-auth.html#finish)

## [](register-auth.html#registraciya-prilozheniya-dlya-avtorizacii)Регистрация приложения для авторизации

### [](register-auth.html#create)Шаг 1. Создание приложения

-
Авторизуйтесь в сервисе [Яндекс OAuth](https://oauth.yandex.ru/) через ваш аккаунт на Яндексе, с помощью которого вы планируете продолжать разработку.

Важно

Чтобы не потерять доступ к приложению, используйте аккаунт, в который вы всегда сможете войти. Убедитесь, что вы сможете пройти процедуру верификации на этом аккаунте.

-
Если ваш сервис не верифицирован, пройдите [верификацию](confirm-account.html). Иначе ваши пользователи будут видеть предупреждение перед тем, как разрешить вам доступ к их данным. Это значительно снижает конверсию успешных авторизаций в вашем приложении.

Совет

Верификация особенно важна для этого типа приложений.

-
Создайте приложение одним из способов:

Нажмите Создать приложение. Во всплывающем окне выберите Для авторизации пользователей.

-
Перейдите по ссылке: [https://oauth.yandex.ru/client/new/id/](https://oauth.yandex.ru/client/new/id/).

-
Укажите сведения о приложении:

Заполните поле Название вашего сервиса и прикрепите иконку.

Размер файла с иконкой не может превышать 1 Мб.

Пользователь увидит название и иконку на странице авторизации и в списке приложений, которые получили доступ к его аккаунту.

-
Заполните поле Контактная почта. Убедитесь, что она актуальна, чтобы не пропустить важную информацию об изменениях в продукте.

-
Нажмите Продолжить.

### [](register-auth.html#shag-2-platformy-prilozheniya)Шаг 2. Платформы приложения

-
Выберите, для каких платформах вы настраиваете авторизацию:

Веб-сервисы

- iOS-приложение

- Android-приложение

-
Укажите параметры платформ, на которых работает ваше приложение:

Веб-сервисы
iOS-приложение
Android-приложение

Redirect URI. Адрес URL, на который пользователь перенаправляется после того, как он разрешил приложению доступ к своим данным.

При использовании [технологии мгновенной авторизации](suggest-description.html) (рекомендуется для веб-сервисов) укажите в поле URL, по которому вы создаете вспомогательную страницу для приема токена.

Если у вас экосистема приложений или вы используете разные окружения, добавьте дополнительные Redirect URI. Нужный адрес можно будет выбрать при получении OAuth-токена.

iOS AppId. Точный идентификатор iOS-приложения, например A1B2C3D4E5.com.domain.application. Состоит из Prefix и Bundle ID. Подробнее про идентификаторы iOS-приложений читайте в [документации Apple](https://www.google.com/url?q=https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/AppID.html&amp;sa=D&amp;source=docs&amp;ust=1747637795082304&amp;usg=AOvVaw1WD8iSfwTtgbDQDFbb-5WT).

-
iOS AppStore URL. Ссылка на приложение в AppStore.

-
Android package name. Название пакета приложения — поле applicationId в файле build.gradle вашего модуля. Подробнее про идентификаторы Android-приложений читайте в [документации Android](https://developer.android.com/studio/build/application-id.html).

-
Android Google Play URL. Ссылка на приложение в Google Play.

-
SHA256 Fingerprints. Отпечаток сертификата вашего приложения. О том, как сгенерировать такой отпечаток, читайте в [документации Android](https://developers.google.com/android/guides/client-auth#using_gradles_signing_report).

Примечание

Если вы разрабатываете приложение для iOS или Android, используйте [LoginSDK](mobileauthsdk/about.html) для получения OAuth-токена.

### [](register-auth.html#shag-3-dostup-k-dannym)Шаг 3. Доступ к данным

-
Выберите данные пользователя, доступ к которым нужно получить приложению. Обычно требуются:

Логин, имя и фамилия, пол;

- Портрет пользователя;

- Адрес электронной почты;

- Номер телефона;

- Дата рождения.

Вы можете выбрать другие необходимые разрешения.

Список необходимых данных отобразится на странице авторизации пользователя и в списке приложений, которые получили доступ к его аккаунту.

Совет

Выбирайте только те данные, которые будут использованы в вашем приложении.

-
Нажмите Продолжить.

### [](register-auth.html#finish)Завершение регистрации

После настройки всех параметров приложения в Яндекс OAuth отобразится окно, которое увидят пользователи, когда войдут в ваше приложение с помощью Яндекс ID. Чтобы подтвердить сохранение, нажмите Всё верно.

Дальнейшая настройка подключения к API Яндекс ID состоит из:

- запроса [OAuth-токена](access.html);

- ввода [информации о пользователе](user-information.html).

Для настройки используйте параметры, указанные на странице приложения в личном кабинете Яндекс OAuth.

### Была ли статья полезна?
ДаНет

## register-client.html

--------------------------------------------------------------------------------

**Заголовок:** Регистрация приложения | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
[Приложение для авторизации ](register-auth.html)
- [Приложение для доступа к API ](register-api.html)

- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Регистрация приложения- [Подключение к API Яндекс ID](how-to.html)
- Этап 1. Регистрация приложения

# Регистрация приложения
Чтобы получать OAuth-токены для работы с данными пользователей Яндекса, разработчик должен зарегистрировать приложение в сервисе [Яндекс OAuth](https://oauth.yandex.ru/). После регистрации приложение будет доступно для редактирования в личном кабинете Яндекс OAuth.

Примечание

После получения доступа к данным пользователя приложение отобразится в его [Яндекс ID](https://yandex.ru/support/id/ru/) в [списке приложений](https://id.yandex.ru/personal/data-access), которые имеют доступ к его аккаунту.

Указывайте полные данные о вашем приложении, чтобы пользователь знал, кому он дает разрешение на использование данных.

Пользователь всегда может посмотреть разрешения, которые выданы на его аккаунт, и отозвать их. В таком случае токен, который выдан на этот аккаунт, станет недействительным.

## [](register-client.html#tipy-prilozhenij)Типы приложений

Приложения в [Яндекс OAuth](https://oauth.yandex.ru/) делятся на два типа:

-
[Для авторизации пользователей](register-auth.html) на стороннем сервисе. Такие приложения передают данные пользователя.

Приложения для авторизации могут получить не более 3 групп разрешений от API сервисов Яндекса. Название группы разрешений указывается перед : в названии доступа. Например, доступ login:info относится к группе login.

О регистрации приложения для авторизации читайте в [разделе](register-auth.html).

-
[Для доступа к API](register-api.html). Такие приложения не предназначены для пользователя. Они работают только с данными разработчика и используются для получения токенов и доступов к API сервисов Яндекса.

Приложения для доступа к API не могут получить разрешения из группы login, но не имеют ограничения по числу доступов.

О регистрации приложения для доступа к API читайте в [разделе](register-api.html).

Во время регистрации приложения выберите нужный тип приложения во всплывающем окне.

Как выглядит

Важно

Определите тип вашего приложения перед регистрацией. Поменять тип после регистрации невозможно.

Если ваше приложение создано до того, как появилось разделение на типы, то оно продолжит работать в прежнем режиме.

### Была ли статья полезна?
ДаНет

## requirements.html

--------------------------------------------------------------------------------

**Заголовок:** Юридические требования к Программам | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Юридические требования к Программам
# Юридические требования к Программам
В соответствии с а. 2 п. 2.8 [Условий использования сервиса «API авторизации через Яндекс ID»](https://yandex.ru/legal/authid_api/), Пользователю запрещается встраивать программный интерфейс для авторизации Конечных пользователей через Яндекс ID в Программе Пользователя в случае, если Программа не соответствует законодательству Российской Федерации, нарушает права и законные интересы Яндекса или третьих лиц, условия сервисов Яндекса или способна, по мнению Яндекса, причинить вред репутации Яндекса.

К примерам таких Программ относятся (включая, но не ограничиваясь):

- Программы, имеющие оскорбительное, и (или) насильственное, и (или) порнографическое содержание или любой иной неподобающий или неэтичный контент по усмотрению Яндекса.

- Программы, содержание которых направлено на разжигание ненависти, дискриминацию, продвижение или пропаганду алкоголя, табака, табакосодержащей или никотиносодержащей продукции, наркотических средств и (или) психотропных веществ или растений, содержащих наркотические средства или психотропные вещества, а также распространение, производство или продвижение оружия, взрывчатых веществ и (или) принадлежностей к ним.

- Программы, представляющие собой онлайн-казино, букмекерские конторы, тотализаторы и (или) любые иные программы, являющиеся организаторами азартных игр онлайн или их имитации.

- Программы, обещающие пользователям заработок реальных денег, и (или) цифровой валюты, и (или) внутриигровой валюты (которую можно вывести на другие ресурсы, передать другому пользователю, обменять на реальные деньги и (или) цифровую валюту, а также на товары и (или) услуги) каким-либо образом.

- Программы, направленные на автоматизированные сбор и структурирование пользовательских данных (парсинг) копирование и (или) имитацию сервисов Яндекса.

- Программы, созданные с целью обмануть пользователей, например фишинговые, которые выглядят идентично другому (настоящему) ПО.

- Программы, содержащие потенциально вредоносное ПО.

- Программы, являющиеся дорвеями — страницами в сети Интернет, основная цель которых состоит в том, чтобы перенаправлять пользователя на иные сайты, отличные от страницы, переход на которую предполагался пользователем.

- Программы, которые используют имя и (или) бренд Яндекса в рекламных целях, при этом не являются прямыми партнерами Яндекса.

- Программы, предлагающие сделку в отношении товаров, работ и услуг, свободная реализация и (или) оборот которых ограничены или запрещены в соответствии с действующим законодательством Российской Федерации и (или) способных оказать негативное влияние на деловую репутацию Яндекса.

### Была ли статья полезна?
ДаНет

## suggest/but-const.html

--------------------------------------------------------------------------------

**Заголовок:** Конструктор кнопок | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Конструктор кнопок- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Веб-платформы — мгновенная авторизация](../suggest-description.html)
- Конструктор кнопок

# Конструктор кнопок
Интерактивный конструктор кнопок позволяет настроить кнопку авторизации под внешний вид вашего сайта. Выберите нужные значения параметров, и конструктор отрисует кнопку и выведет код скрипта с этими параметрами.

[

](https://autofill.yandex.ru/suggest/button/constructor)

Скопируйте готовый код из конструктора и вставьте его на [страницу авторизации](script-sdk-suggest.html). Во вставленном коде замените:

-
oauthQueryParams — на блок

{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
}

В блоке подставьте нужные значения параметров:

в параметр client_id — идентификатор зарегистрированного на [Этапе 1](../register-client.html) OAuth-приложения;

- в параметр redirect_uri — URL вспомогательной страницы, который вы указали в поле Redirect URI OAuth-приложения с данным client_id (если параметр не указан, то будет использовано первое из значений поля Redirect URI).

-
tokenPageOrigin — на origin [вспомогательной страницы](script-sdk-suggest-token.html), которая принимает токен.

### Была ли статья полезна?
ДаНет

## suggest/script-sdk-suggest-token.html

--------------------------------------------------------------------------------

**Заголовок:** Настройка скрипта sdk-suggest-token.js для вспомогательной страницы | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
[Скрипт sdk-suggest.js для страницы авторизации ](script-sdk-suggest.html)
- [Скрипт sdk-suggest-token.js для вспомогательной страницы ](script-sdk-suggest-token.html)

- [Конструктор кнопок ](but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Настройка скрипта sdk-suggest-token.js для вспомогательной страницы
## В этой статье:

- [Синтаксис и параметры](script-sdk-suggest-token.html#sdk-suggest-token-syntax)
- [Возвращаемое значение](script-sdk-suggest-token.html#sdk-suggest-token-return-value)
- [Пример использования на странице HTML](script-sdk-suggest-token.html#example)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Веб-платформы — мгновенная авторизация](../suggest-description.html)
- [Подключение](../suggest-connection.html)
- Скрипт sdk-suggest-token.js для вспомогательной страницы

# Настройка скрипта sdk-suggest-token.js для вспомогательной страницы

- [Синтаксис и параметры](script-sdk-suggest-token.html#sdk-suggest-token-syntax)
- [Возвращаемое значение](script-sdk-suggest-token.html#sdk-suggest-token-return-value)
- [Пример использования на странице HTML](script-sdk-suggest-token.html#example)

На странице, которая будет принимать OAuth-токен, подключите одну из версий скрипта sdk-suggest-token.js:

Версия с полифилами (рекомендовано)
Базовая версия

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-token-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

См. также:

- [Полифилы](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BB%D0%B8%D1%84%D0%B8%D0%BB)

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-token-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

## [](script-sdk-suggest-token.html#sdk-suggest-token-syntax)Синтаксис и параметры

YaSendSuggestToken(origin, extraData)

Пример вызова для виджета или кнопки авторизации:

YaSendSuggestToken(
&#x27;https://examplesite.com&#x27;,
{
flag: true
}
)

См. также [Пример использования скрипта на странице HTML](script-sdk-suggest-token.html#example)

Описание параметров:

Параметр

Описание

origin

Origin страницы с кнопкой или виджетом, на которую будет отправлен postMessage с токеном. Значение параметра должно быть всегда заполнено и не должно содержать символ *.

extraData

Дополнительные данные, отправляемые на страницу с кнопкой. Должен быть валидным JSON-объектом.

## [](script-sdk-suggest-token.html#sdk-suggest-token-return-value)Возвращаемое значение

Ничего не возвращает.

## [](script-sdk-suggest-token.html#example)Пример использования на странице HTML

Для настройки вспомогательной страницы, которая принимает токен, используйте код:

&lt;!doctype html&gt;
&lt;html lang=&quot;ru&quot;&gt;

&lt;head&gt;
&lt;meta charSet=&quot;utf-8&quot; /&gt;
&lt;meta name=&#x27;viewport&#x27; content=&#x27;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, shrink-to-fit=no, viewport-fit=cover&#x27;&gt;
&lt;meta http-equiv=&#x27;X-UA-Compatible&#x27; content=&#x27;ie=edge&#x27;&gt;
&lt;style&gt;
html,
body {
background: #eee;
}
&lt;/style&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-token-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;script&gt;
window.onload = function() {
window.YaSendSuggestToken(&quot;https://examplesite.com&quot;, {
&quot;kek&quot;: true
});
};
&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;

### Была ли статья полезна?
ДаНет

## suggest/script-sdk-suggest.html

--------------------------------------------------------------------------------

**Заголовок:** Настройка скрипта sdk-suggest.js для страницы авторизации | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
[Скрипт sdk-suggest.js для страницы авторизации ](script-sdk-suggest.html)
- [Скрипт sdk-suggest-token.js для вспомогательной страницы ](script-sdk-suggest-token.html)

- [Конструктор кнопок ](but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Настройка скрипта sdk-suggest.js для страницы авторизации
## В этой статье:

- [Синтаксис и параметры](script-sdk-suggest.html#sdk-suggest-syntax)
- [Конструктор кнопок](script-sdk-suggest.html#buttons-constructor)
- [Возвращаемое значение](script-sdk-suggest.html#sdk-suggest-return-value)
- [Пример использования на странице HTML](script-sdk-suggest.html#example)

- [Подключение к API Яндекс ID](../how-to.html)
- [Этап 2. Получение OAuth-токена](../access.html)
- [Веб-платформы — мгновенная авторизация](../suggest-description.html)
- [Подключение](../suggest-connection.html)
- Скрипт sdk-suggest.js для страницы авторизации

# Настройка скрипта sdk-suggest.js для страницы авторизации

- [Синтаксис и параметры](script-sdk-suggest.html#sdk-suggest-syntax)
[Конструктор кнопок](script-sdk-suggest.html#buttons-constructor)

- [Возвращаемое значение](script-sdk-suggest.html#sdk-suggest-return-value)
- [Пример использования на странице HTML](script-sdk-suggest.html#example)

На странице, где пользователь будет осуществлять авторизацию, подключите одну из версий скрипта:

Версия с полифилами (рекомендовано)
Базовая версия

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

См. также:

- [Полифилы](https://ru.wikipedia.org/wiki/%D0%9F%D0%BE%D0%BB%D0%B8%D1%84%D0%B8%D0%BB)

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

## [](script-sdk-suggest.html#sdk-suggest-syntax)Синтаксис и параметры

YaAuthSuggest.init(oauthQueryParams, tokenPageOrigin, [suggestParams])

Важно

Группа параметров suggestParams применяется только для кнопки. Если вы используете виджет, не указывайте эти параметры.

Пример вызова:

Для виджета &quot;Мгновенный вход&quot;
Для кнопки авторизации

YaAuthSuggest.init(
{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
},
&#x27;https://examplesite.com&#x27;
)
.then(({
handler
}) =&gt; handler())
.then(data =&gt; console.log(&#x27;Сообщение с токеном&#x27;, data))
.catch(error =&gt; console.log(&#x27;Обработка ошибки&#x27;, error));

YaAuthSuggest.init(
{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
},
&#x27;https://examplesite.com&#x27;,
{
view: &#x27;button&#x27;,
parentId: &#x27;container&#x27;,
buttonView: &#x27;main&#x27;,
buttonTheme: &#x27;light&#x27;,
buttonSize: &#x27;m&#x27;,
buttonBorderRadius: 0
}
)
.then(({
handler
}) =&gt; handler())
.then(data =&gt; console.log(&#x27;Сообщение с токеном&#x27;, data))
.catch(error =&gt; console.log(&#x27;Обработка ошибки&#x27;, error));

См. также [Пример использования скрипта на странице HTML](script-sdk-suggest.html#example)

Описание параметров:

Параметр

Обязательный

Тип

Описание oauthQueryParams — содержит query-параметры, с которыми будет открыта страница OAuth-авторизации (см. список всех [query-параметров](../codes/code-url.html#code))

client_id

Да

string

Идентификатор OAuth-приложения, который был получен после [регистрации](../register-client.html)

response_type

Да

string

Тип запроса

redirect_uri

Нет

string

URL вспомогательной страницы, принимающей токен. Должен совпадать с адресом, который вы указали в поле Redirect URI OAuth-приложения с данным client_id. Используется для передачи результата авторизации. Если параметр не указан, то будет использовано первое из значений поля Redirect URI tokenPageOrigin — параметр для взаимодействия страницы авторизации со вспомогательной страницей посредством postMessage

Указывается только значение параметра

Да

string

Origin вспомогательной страницы, которая принимает токен. Значение параметра должно быть всегда заполнено и не должно содержать символ * suggestParams — параметры для выбора внешнего вида кнопки. Указываются, только если в качестве блока авторизации используется кнопка, для виджета эта группа параметров не используется. Подобрать нужные значения параметров можно с помощью [конструктора кнопок](script-sdk-suggest.html#buttons-constructor)

view

Да

string

Параметр для отображения кнопки со значением button

parentId

Нет

string

Значение атрибута id контейнера, в который нужно встроить кнопку. Если id не найден, кнопка будет встроена в body

buttonView

Нет

string

Тип кнопки. По умолчанию — main. Возможные значения:

- main — основная версия: черная кнопка с фирменным знаком Яндекса и текстом. Кнопка становится белой при смене темы кнопки (buttonTheme) на темную

- additional — дополнительная версия: кнопка с обводкой по периметру. Отличается от основной тем, что контрастным к теме является не фон кнопки, а обводка

- icon — квадратная кнопка-иконка с фирменным знаком Яндекса на красном фоне. Границы кнопки можно скруглять

- iconBG — квадратная кнопка-иконка с фирменным знаком Яндекса (буква &quot;Я&quot; в красном круге) на сером фоне с серой обводкой по периметру. Цвет фона, цвет и ширину обводки можно изменять, а границы кнопки скруглять

buttonTheme

Нет

string

Тема кнопки. Параметр необходимо изменять при смене темы страницы вашего сайта или приложения, чтобы кнопка не сливалась с цветом фона. По умолчанию — light. Возможные значения:

- light — светлая тема

- dark — темная тема

buttonSize

Нет

string

Размер кнопки, указывающий на базовую высоту, минимальную ширину и переключение на сокращенный вид. По умолчанию — m. Возможные значения:

- xs | s | m | l | xl | xxl

buttonBorderRadius

Нет

number

Радиус скругления границ кнопки (значение border-radius css-свойства в px). По умолчанию — 0

buttonIcon

Нет

string

Языковой вариант логотипа на кнопке. По умолчанию — ya. Возможные значения:

- ya — русскоязычный вариант

- yaEng — англоязычный вариант

customBgColor

Нет

string

Цвет фона подложки кнопки-иконки. Задается в любом из форматов, поддерживаемых в CSS. Актуально только для кнопки с типом iconBG

customBgHoveredColor

Нет

string

Цвет фона подложки кнопки-иконки под курсором. Задается в любом из форматов, поддерживаемых в CSS. Актуально только для кнопки с типом iconBG

customBorderColor

Нет

string

Цвет обводки кнопки-иконки. Задается в любом из форматов, поддерживаемых в CSS. Актуально только для кнопки с типом iconBG

customBorderHoveredColor

Нет

string

Цвет обводки кнопки-иконки под курсором. Задается в любом из форматов, поддерживаемых в CSS. Актуально только для кнопки с типом iconBG

customBorderWidth

Нет

number

Толщина обводки кнопки-иконки. Актуально только для кнопки с типом iconBG

### [](script-sdk-suggest.html#buttons-constructor)Конструктор кнопок

Выберите нужные значения параметров, и конструктор отрисует внешний вид кнопки и выведет код скрипта с этими параметрами.

[

](https://autofill.yandex.ru/suggest/button/constructor)

Скопируйте готовый код из конструктора и вставьте его на страницу. Во вставленном коде замените:

-
oauthQueryParams — на блок

{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
}

В блоке подставьте нужные значения параметров:

в параметр client_id — идентификатор зарегистрированного на [Этапе 1](../register-client.html) OAuth-приложения;

- в параметр redirect_uri — URL вспомогательной страницы, который вы указали в поле Redirect URI OAuth-приложения с данным client_id (если параметр не указан, то будет использовано первое из значений поля Redirect URI).

-
tokenPageOrigin — на origin вспомогательной страницы, которая принимает токен.

## [](script-sdk-suggest.html#sdk-suggest-return-value)Возвращаемое значение

Успешный ответ
Ошибка

{
status: &#x27;ok&#x27;,
handler: handler,
}

{
status: &#x27;error&#x27;,
code: &#x27;...&#x27;
}

Параметры ответа:

Параметр

Описание

status

Статус ответа:

- ok — успешен;

- error — завершен ошибкой.

handler

Функция, которая возвращает Promise в виде iframe с кнопкой или виджетом, если status=ok.

code

Код ошибки, если status=error.

## [](script-sdk-suggest.html#example)Пример использования на странице HTML

На страницу подключается виджет &quot;Мгновенный вход&quot; или кнопка авторизации:

- Чтобы подключить кнопку авторизации, используйте представленный ниже код целиком.

- Для подключения виджета используйте представленный код без дополнительных параметров suggestParams, определяющих внешний вид кнопки.

&lt;!doctype html&gt;
&lt;html lang=&quot;ru&quot;&gt;

&lt;head&gt;
&lt;meta charSet=&quot;utf-8&quot; /&gt;
&lt;meta name=&#x27;viewport&#x27; content=&#x27;width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, shrink-to-fit=no, viewport-fit=cover&#x27;&gt;
&lt;meta http-equiv=&#x27;X-UA-Compatible&#x27; content=&#x27;ie=edge&#x27;&gt;
&lt;style&gt;
html,
body {
background: #eee;
}
&lt;/style&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;script&gt;
window.onload = function() {
window.YaAuthSuggest.init({
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
},
&#x27;https://examplesite.com&#x27;, {
view: &#x27;button&#x27;,
parentId: &#x27;container&#x27;,
buttonView: &#x27;main&#x27;,
buttonTheme: &#x27;light&#x27;,
buttonSize: &#x27;m&#x27;,
buttonBorderRadius: 0
}
)
.then(function(result) {
return result.handler()
})
.then(function(data) {
console.log(&#x27;Сообщение с токеном: &#x27;, data);
document.body.innerHTML += `Сообщение с токеном: ${JSON.stringify(data)}`;
})
.catch(function(error) {
console.log(&#x27;Что-то пошло не так: &#x27;, error);
document.body.innerHTML += `Что-то пошло не так: ${JSON.stringify(error)}`;
});
};
&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;

### Была ли статья полезна?
ДаНет

## suggest-connection.html

--------------------------------------------------------------------------------

**Заголовок:** Подключение мгновенной авторизации | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
[Скрипт sdk-suggest.js для страницы авторизации ](suggest/script-sdk-suggest.html)
- [Скрипт sdk-suggest-token.js для вспомогательной страницы ](suggest/script-sdk-suggest-token.html)

- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Подключение мгновенной авторизации- [Подключение к API Яндекс ID](how-to.html)
- [Этап 2. Получение OAuth-токена](access.html)
- [Веб-платформы — мгновенная авторизация](suggest-description.html)
- Подключение

# Подключение мгновенной авторизации

-
Настройте страницу вашего сайта, на которой будет осуществляться авторизация пользователя с помощью кнопки или виджета.

Подключите на страницу скрипт sdk-suggest.js:

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

-
Добавьте вызов скрипта. Вариант кода зависит от вида блока авторизации, который вы будете использовать для входа: для виджета не указывается группа параметров, которая отвечает за внешний вид кнопки.

Виджет &quot;Мгновенный вход&quot;
Кнопка авторизации

Скопируйте код:

YaAuthSuggest.init(
{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
},
&#x27;https://examplesite.com&#x27;
)
.then(({
handler
}) =&gt; handler())
.then(data =&gt; console.log(&#x27;Сообщение с токеном&#x27;, data))
.catch(error =&gt; console.log(&#x27;Обработка ошибки&#x27;, error));

-
Подставьте в код:

в параметр client_id — идентификатор  OAuth-приложения, зарегистрированного на [Этапе 1](register-client.html);

- в параметр redirect_uri — URL вспомогательной страницы, который вы указали в [поле Redirect URI](register-client.html#platforms) для OAuth-приложения с данным client_id (если параметр не указан, то будет использовано первое из значений поля Redirect URI);

- вместо 'https://examplesite.com' — origin вспомогательной страницы, которая принимает токен.

-
Настройте внешний вид кнопки с помощью конструктора кнопок.

[

](https://autofill.yandex.ru/suggest/button/constructor)

-
Скопируйте готовый код из конструктора и вставьте его на страницу.

-
Замените в коде:

oauthQueryParams — на блок

{
client_id: &#x27;c46f0c53093440c39f12eff95a9f2f93&#x27;,
response_type: &#x27;token&#x27;,
redirect_uri: &#x27;https://examplesite.com/suggest/token&#x27;
}

В блоке подставьте нужные значения параметров:

в параметр client_id — идентификатор OAuth-приложения, зарегистрированного на [Этапе 1](register-client.html);

- в параметр redirect_uri — URL вспомогательной страницы, который вы указали в [поле Redirect URI](register-client.html#platforms) для OAuth-приложения с данным client_id (если параметр не указан, то будет использовано первое из значений поля Redirect URI).

-
tokenPageOrigin — на origin вспомогательной страницы, которая принимает токен.

Подробнее о скрипте sdk-suggest.js читайте в разделе [Настройка скрипта sdk-suggest.js для страницы авторизации](suggest/script-sdk-suggest.html).

-
Подготовьте вспомогательную страницу, которая будет принимать OAuth-токен.

Создайте пустую страницу по адресу, который вы указали в поле Redirect URI OAuth-приложения, зарегистрированного на [Этапе 1](register-client.html). Внешний вид вспомогательной страницы настраивать не обязательно. Она будет отображаться несколько миллисекунд, поэтому можно оставить белый экран.

-
Подключите на страницу скрипт sdk-suggest-token.js:

&lt;head&gt;
&lt;script src=&quot;https://yastatic.net/s3/passport-sdk/autofill/v1/sdk-suggest-token-with-polyfills-latest.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;

-
Добавьте вызов скрипта.

Скопируйте код:

YaSendSuggestToken(
&#x27;https://examplesite.com&#x27;,
{
flag: true
}
)

-
Замените в коде 'https://examplesite.com' на origin страницы вашего сайта, на которой будет осуществляться авторизация пользователя при помощи кнопки или виджета.

Подробнее о скрипте sdk-suggest-token.js читайте в разделе [Настройка скрипта sdk-suggest-token.js для вспомогательной страницы](suggest/script-sdk-suggest-token.html).

### Была ли статья полезна?
ДаНет

## suggest-description.html

--------------------------------------------------------------------------------

**Заголовок:** Технология мгновенной авторизации | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Технология мгновенной авторизации
## В этой статье:

- [Внешний вид блока авторизации](suggest-description.html#view)
- [Ограничения](suggest-description.html#restrictions)

- [Подключение к API Яндекс ID](how-to.html)
- [Этап 2. Получение OAuth-токена](access.html)
- Веб-платформы — мгновенная авторизация

# Технология мгновенной авторизации

- [Внешний вид блока авторизации](suggest-description.html#view)
- [Ограничения](suggest-description.html#restrictions)

Пользователи могут входить на ваш сайт, используя свой аккаунт на Яндексе. Для этого подключите на вашу страницу один из [вариантов блока авторизации](suggest-description.html#view): виджет &quot;Мгновенный вход&quot; или кнопку.

- Если пользователь уже выполнил вход в аккаунт на Яндексе на текущем устройстве, виджет или кнопка отобразит его портрет и имя, чтобы продолжить авторизацию на вашем сайте.

- Если пользователь еще не выполнил вход в аккаунт на Яндексе, он сможет авторизоваться при помощи виджета или кнопки.

Когда пользователь подтвердит вход, он будет переадресован на экран OAuth-авторизации с перечнем данных, к которым он предоставляет доступ для вашего приложения.

## [](suggest-description.html#view)Внешний вид блока авторизации

Для предоставления доступа пользователей к вашему сервису вы можете использовать виджет &quot;Мгновенный вход&quot; или кнопку авторизации.

Совет

Используйте виджет, чтобы улучшить конверсию на вашем сайте.

Виджет &quot;Мгновенный вход&quot;
Кнопка авторизации

Виджет &quot;Мгновенный вход&quot; — это всплывающее окно на вашем сайте, в котором пользователь сможет выполнить вход со своей учетной записью на Яндексе.

-
Если пользователь авторизован:

-
Если пользователь не авторизован:

Кнопка авторизации — это элемент для быстрого входа в Яндекс ID в виде кнопки.

Вы можете разместить разные варианты кнопки на странице вашего сайта:

-
Персональная кнопка.
Внешний вид персональной кнопки зависит от того, выполнил ли пользователь вход в аккаунт на Яндексе на текущем устройстве.

Если пользователь авторизован:

-
Если пользователь не авторизован:

-
Кнопка-иконка с логотипом Яндекса.
Используется, если для обычной кнопки нет места. Блок, в котором будет размещена кнопка-иконка, подпишите &quot;Войти с помощью&quot;.

## [](suggest-description.html#restrictions)Ограничения

Мгновенная авторизация не будет работать, если в браузере пользователя:

-
Запрещено открытие iframe.

-
Отключена поддержка JavaScript.

Кроме того, вы не сможете подключить виджет, если в браузере:

-
Включена блокировка сторонних cookie.

-
Полностью отключено использование cookie. В этом случае при вызове [YaAuthSuggest.init](suggest/script-sdk-suggest.html) вернется ошибка.

Без cookie можно подключить только кнопку авторизации.

### Была ли статья полезна?
ДаНет

## tips.html

--------------------------------------------------------------------------------

**Заголовок:** Советы по использованию API Яндекс ID | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Советы по использованию API Яндекс ID
# Советы по использованию API Яндекс ID
Приложения, разрабатываемые с помощью API Яндекс ID, должны быть не только полезными, но и безопасными. Чтобы сохранить конфиденциальность и безопасность пользователей, следуйте этим рекомендациям:

-
Перед интеграцией убедитесь, что приложение соответствует [Требованиям к программам Яндекс OAuth](requirements.html).

-
Используйте отдельные проекты для тестирования и производства. Не включайте в одно приложение redirect_uri тестового и продового приложения. Тестовые приложения должны соответствовать условиям использования сервиса, как и продовые.

-
Убедитесь, что указанная вами контактная почта актуальна. Мы отправляем электронные письма на этот адрес, чтобы сообщить информацию о вашем приложении или об обновлениях в API Яндекс ID. Чтобы поменять контактные данные, перейдите на страницу редактирования приложения в личном кабинете [OAuth](https://oauth.yandex.ru/). Убедитесь, что вы указали верное название приложения и добавили иконку, потому что это будет видеть пользователь на экране разрешений.

-
Запрашивайте только те разрешения, которые необходимы для работы вашего приложения.

-
[Верифицируйте](confirm-account.html) свой аккаунт, чтобы создавать приложения без ограничений.

### Была ли статья полезна?
ДаНет

## tokens/debug-token.html

--------------------------------------------------------------------------------

**Заголовок:** Получение токена вручную | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
[Стандарт JSON Web Token ](jwt.html)
- [Получение токена вручную ](debug-token.html)
- [Отзыв токенов ](token-invalidate.html)
- [Обновление токена ](refresh-client.html)

- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Получение токена вручную- [Токены](../concepts/ya-oauth-intro.html)
- Получение токена вручную

# Получение токена вручную
OAuth-токен нужно получать вручную для того, чтобы:

-
получить доступа к API;

-
проверить работу приложения.

Чтобы получить токен вручную, нужно открыть [Яндекс OAuth](https://oauth.yandex.ru/) в браузере с нужными параметрами. Для этого:

-
При регистрации или редактировании приложения перейдите на шаг [Платформы приложения](../register-client.html#platforms).В поле Redirect URI введите значение https://oauth.yandex.ru/verification_code.

-
Войдите в Яндекс с аккаунтом пользователя, к которому приложение должно запросить доступ.

-
Перейдите по ссылке вида:

https://oauth.yandex.ru/authorize?response_type=token&amp;client_id=&lt;идентификатор приложения&gt;

Идентификатор Client_ID доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название вашего приложения в списке.

-
Если вы еще не разрешали доступ для этого приложения или срок жизни токена истек, откроется страница подтверждения доступа. Чтобы подтвердить выдачу токена, нажмите Разрешить.

Токены, которые вы получили вручную, можно [отозвать](token-invalidate.html) (как и любые другие).

Внимание

Сохраняйте полученные токены. Сервис [Яндекс OAuth](https://oauth.yandex.ru/) не хранит выдаваемые токены в публичном доступе. Вы не сможете найти их в личном кабинете.

Если вы не сохранили токен, вы можете получить его вручную еще раз.

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth перенаправит вас на страницу с токеном и добавит данные токена после символа #:

https://oauth.yandex.ru/verification_code#access_token=&lt;новый OAuth-токен&gt;&amp;expires_in=&lt;время жизни токена в секундах&gt;

Параметр

Описание

access_token

OAuth-токен с правами, которые вы запросили или указали при [регистрации приложения](../register-client.html#access).

expires_in

[Время жизни](../concepts/ya-oauth-intro.html#ttl) токена в секундах.

Если токен выдать не удалось, OAuth-сервер добавит к адресу код ошибки:

https://oauth.yandex.ru/verification_code#error=&lt;код ошибки&gt;

Возможные коды ошибок:

- unauthorized_client — возвращается, если приложение заблокировано.

### Была ли статья полезна?
ДаНет

## tokens/jwt.html

--------------------------------------------------------------------------------

**Заголовок:** JSON Web Token | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
[Стандарт JSON Web Token ](jwt.html)
- [Получение токена вручную ](debug-token.html)
- [Отзыв токенов ](token-invalidate.html)
- [Обновление токена ](refresh-client.html)

- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

JSON Web Token
## В этой статье:

- [Формат запроса](jwt.html#jwt-request)
- [Формат ответа](jwt.html#jwt-response)

- [Токены](../concepts/ya-oauth-intro.html)
- Стандарт JSON Web Token

# JSON Web Token

- [Формат запроса](jwt.html#jwt-request)
- [Формат ответа](jwt.html#jwt-response)

JSON Web Token (JWT) — это открытый стандарт для создания токенов доступа, основанный на формате JSON.

Токены создаются сервером Яндекса, подписываются секретным ключом и передаются клиенту, который в дальнейшем использует токен для подтверждения своей личности перед своим сервером.

## [](jwt.html#jwt-request)Формат запроса

Основной целью JSON Web Token является создание подписанного сообщения, с помощью которого пользователь обращается к сервису для доступа к ресурсам.

curl -H 'Authorization: OAuth &lt;OAuth-токен&gt; 'https://login.yandex.ru/info?format=jwt'

Описание параметров запроса можно посмотреть в разделе [Обмен токена на информацию о пользователе](../user-information.html).

## [](jwt.html#jwt-response)Формат ответа

После обработки запроса пользователь получает JWT, который закодирован в base64 и подписан.

Пример подписанного сообщения:

eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.
eyJpYXQiOjE2MTgyMDQ1NDMsImp0aSI6ImY1YzhlMjhiLTljMzYtMTFlYi1hZDUwLTAwMjU5MDkyODk4YSIsImV0OTgzODAzNywiaXNzIjoibGueWFuZGV4LnJ1IiwidWlkIjoxMTQyMzQ1MTU4LCJsb2dpbiI6InluZHgtZWxlbmJhc2tha292YSIsInBzdWlkIjoiMS5BQWNPX2cuaDh6eFQxNGVRSFRMSURYd2s1d203dy50Uks4cIczJiVEp3IiwibmFtZSI6Ilx1MDQxNVx1MDQzYlx2MDQzNVx1MDQzZFx1MDQzMCBcdTA0MTFcdTA0MzBcdTA0NDFcdTA0M2FcdTA0MzBcdTA0M2FcdTA0M2VcdTA0MzJcdTA0MzAiLCJlbWFpbCI6InluZHgtZWxlbmJhc2tha292YUB5YW5kZXgucnUiLCJiaXJ0aGRheSI6IiIsImdlbmRlciI6bnVsbCwiZGlzcGxheV9uYW1lIjoieW5keC1lbGVuYmFza2Frb3ZhIiwiYXZhdGFyX2lkIjoiMC7wLTAifQ.
O8NEvhJ0dI0OOnZSc7Bl-TvxZ1_JDrIpb7zYRW9Nzn

Чтобы извлечь информацию о пользователе из base64, используйте специальную библиотеку (например, [библиотеку Python](https://pypi.org/project/PyJWT/1.4.0/)), которой в качестве параметров передается подписанное сообщение, ключ и алгоритм подписи JWT HS256.

Пример декодированного сообщения:

{
u'avatar_id': u'1824/mnL6oLbL5fhaAiY42uizvUCLJI-1',
u'birthday': u'',
u'display_name': u'user',
u'email': u'usere@yandex.ru',
u'exp': 16458707859,
u'gender': None,
u'iat': 1618313760,
u'iss': u'login.yandex.ru',
u'jti': u'6ba15884-9c4c-11eb-a478-5254005dbe7b',
u'login': u'user',
u'name': u'&lt;i&gt;user\u0418\u0432\u0430\u043D&lt;/u&gt;',
u'psuid': u'1.AAAAfQ.Y6L7rKzy_w8aWJJu74tF9g.vAFTNxqI15bPA4A_35Dfiw',
u'uid': 3000250009
}

JWT содержит набор [стандартных полей](https://tools.ietf.org/html/rfc7519):

Поле

Описание

iat

Unixtime выдачи JWT.

jti

Уникальный идентификатор токена.

exp

Срок действия токена.

iss

Хост, который выдал этот токен (например, login.yandex.ru).

Набор дополнительных полей зависит от прав приложения, выбранных при [регистрации приложения](../register-client.html#access) в Яндекс OAuth. Подробнее см. раздел [Формат ответа](../user-information.html#response-format).

### Была ли статья полезна?
ДаНет

## tokens/refresh-client.html

--------------------------------------------------------------------------------

**Заголовок:** Обновление токена | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
[Стандарт JSON Web Token ](jwt.html)
- [Получение токена вручную ](debug-token.html)
- [Отзыв токенов ](token-invalidate.html)
- [Обновление токена ](refresh-client.html)

- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Обновление токена
## В этой статье:

- [Обмен refresh-токена на OAuth-токен](refresh-client.html#get-token)
- [Формат запроса](refresh-client.html#refresh-request)
- [Формат ответа](refresh-client.html#refresh-response)

- [Токены](../concepts/ya-oauth-intro.html)
- Обновление токена

# Обновление токена

- [Обмен refresh-токена на OAuth-токен](refresh-client.html#get-token)
[Формат запроса](refresh-client.html#refresh-request)
- [Формат ответа](refresh-client.html#refresh-response)

Получение токена в обмен на refresh-токен:

-
Приложение отправляет [POST-запрос с refresh-токеном](refresh-client.html#get-token).

-
Яндекс OAuth возвращает токен и новый refresh-токен в [теле ответа](refresh-client.html#refresh-response).

Внимание

При обновлении основной токен может не измениться. Так происходит, если оставшийся срок его жизни достаточно длительный и выдавать новый токен нет необходимости. Рекомендуем обновлять долгоживущие токены раз в три месяца.

Полученный токен можно сохранить в приложении и использовать для запросов к API до истечения [времени его жизни](../concepts/ya-oauth-intro.html#ttl). Токен должен быть доступен только вашему приложению, поэтому не рекомендуется сохранять его в браузере или открытых конфигурационных файлах.

## [](refresh-client.html#get-token)Обмен refresh-токена на OAuth-токен

### [](refresh-client.html#refresh-request)Формат запроса

Приложение отправляет refresh-токен, а также свой идентификатор и пароль в POST-запросе.

POST /token HTTP/1.1
Host: https://oauth.yandex.ru/
Content-type: application/x-www-form-urlencoded
Content-Length: &lt;длина тела запроса&gt;
[Authorization: Basic &lt;закодированная строка client_id:client_secret&gt;]

grant_type=refresh_token
&amp; refresh_token=&lt;refresh_token&gt;
[&amp; client_id=&lt;идентификатор приложения&gt;]
[&amp; client_secret=&lt;секретный ключ&gt;]

#### [](refresh-client.html#obyazatelnye-parametry)Обязательные параметры

Параметр

Описание

grant_type

Способ запроса OAuth-токена.

Если вы используете refresh-токен, укажите значение refresh_token.

refresh_token

Refresh-токен, полученный от Яндекс OAuth вместе с OAuth-токеном. [Время жизни](../concepts/ya-oauth-intro.html#ttl) токенов совпадает.

#### [](refresh-client.html#dopolnitelnye-parametry)Дополнительные параметры

Параметр

Описание

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](refresh-client.html#auth-header).

client_secret

Секретный ключ. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Секретный ключ и идентификатор приложения также можно передать в [заголовке Authorization](refresh-client.html#auth-header).

Параметры запроса должны передаваться в теле запроса и должны быть закодированы в urlencode.

Примечание

Чтобы передать идентификатор и секретный ключ в заголовке Authorization, закодируйте строку &lt;client_id&gt;:&lt;client_secret&gt; методом base64.

Если Яндекс OAuth получает заголовок Authorization, параметры client_id и client_secret в теле запроса игнорируются.

### [](refresh-client.html#refresh-response)Формат ответа

Запрос выполнен успешно
Запрос выполнен с ошибкой

Яндекс OAuth возвращает OAuth-токен, refresh-токен и время их жизни в JSON-формате:

200 OK
Content-type: application/json

{
&quot;access_token&quot;: &quot;AQAAAACy1C6ZAAAAfa6vDLuItEy8pg-iIpnDxIs&quot;,
&quot;refresh_token&quot;: &quot;1:GN686QVt0mmakDd9:A4pYuW9LGk0_UnlrMIWklkAuJkUWbq27loFekJVmSYrdfzdePBy7:A-2dHOmBxiXgajnD-kYOwQ&quot;,
&quot;token_type&quot;: &quot;bearer&quot;,
&quot;expires_in&quot;: 124234123534
}

Параметр

Описание

access_token

OAuth-токен с правами, которые вы запросили или указали при [регистрации приложения](../register-client.html#access).

refresh_token

Токен, который можно использовать для [продления срока жизни](refresh-client.html) соответствующего OAuth-токена.

token_type

Тип выданного токена. Всегда принимает значение bearer.

expires_in

[Время жизни](../concepts/ya-oauth-intro.html#ttl) токена в секундах.

Если выдать токен не удалось, ответ содержит описание ошибки:

{
&quot;error_description&quot;: &quot;&lt;описание ошибки&gt;&quot;,
&quot;error&quot;: &quot;&lt;код ошибки&gt;&quot;
}

Возможные коды ошибок:

-
invalid_client ― приложение с указанным идентификатором (параметр client_id) не найдено или заблокировано. Этот код также возвращается, если в параметре client_secret передан неверный секретный ключ.

-
invalid_grant — неверный или просроченный refresh-токен. Этот код также возвращается, если в refresh-токен принадлежит другому приложению (не соответствует переданному client_id).

-
invalid_request ― неверный формат запроса (один из параметров не указан, указан дважды, или передан не в теле запроса).

-
unauthorized_client — приложение было отклонено при модерации или только ожидает ее. Также возвращается, если приложение заблокировано.

-
unsupported_grant_type ― недопустимое значение параметра grant_type.

-
Basic auth required — тип авторизации, указанный в заголовке Authorization, отличен от Basic.

-
Malformed Authorization header — заголовок Authorization не соответствует формату &lt;client_id&gt;:&lt;client_secret&gt;, или эта строка не закодирована методом base64.

### Была ли статья полезна?
ДаНет

## tokens/token-invalidate.html

--------------------------------------------------------------------------------

**Заголовок:** Отзыв токенов | OAuth для Яндекс ID


- [О сервисе ](../index.html)
- [Важные советы ](../tips.html)
- [Верификация сервиса ](../confirm-account.html)
- [Требования к Программам ](../requirements.html)
- [Подключение к API Яндекс ID ](../how-to.html)
[Этап 1. Регистрация приложения ](../register-client.html)
- [Этап 2. Получение OAuth-токена ](../access.html)
[Веб-платформы — мгновенная авторизация ](../suggest-description.html)
[Подключение ](../suggest-connection.html)
- [Конструктор кнопок ](../suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](../mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](../mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](../codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](../user-information.html)

- [Токены ](../concepts/ya-oauth-intro.html)
[Стандарт JSON Web Token ](jwt.html)
- [Получение токена вручную ](debug-token.html)
- [Отзыв токенов ](token-invalidate.html)
- [Обновление токена ](refresh-client.html)

- [Глоссарий ](../concepts/glossary.html)
- [Обратная связь ](../feedback.html)

Отзыв токенов
## В этой статье:

- [Отзыв токенов в приложении](token-invalidate.html#token-revocation)
- [Отзыв токена для устройства](token-invalidate.html#device-token)
- [Аутентификация приложения](token-invalidate.html#app-auth)
- [Формат запроса](token-invalidate.html#cleartext)
- [Формат ответа](token-invalidate.html#response)

- [Токены](../concepts/ya-oauth-intro.html)
- Отзыв токенов

# Отзыв токенов

- [Отзыв токенов в приложении](token-invalidate.html#token-revocation)
- [Отзыв токена для устройства](token-invalidate.html#device-token)
[Аутентификация приложения](token-invalidate.html#app-auth)
- [Формат запроса](token-invalidate.html#cleartext)
- [Формат ответа](token-invalidate.html#response)

Яндекс OAuth отзывает токены в следующих случаях:

-
Доступ был отозван пользователем на странице [Доступы к данным](https://id.yandex.ru/personal/data-access). При отзыве OAuth-токена соответствующий refresh-токен отзывается автоматически.

-
Срок жизни токена истек.

-
Владелец приложения изменил запрашиваемые права либо удалил приложение. В этом случае отзываются все токены, когда-либо выданные этому приложению.

-
Пользователь совершил действие, при котором отзываются все OAuth-токены и refresh-токены, когда-либо выданные для учетной записи:

изменил пароль;

-
включил или выключил [двухфакторную аутентификацию](https://yandex.ru/support/id/authorization/twofa.html);

-
успешно восстановил доступ к аккаунту;

-
перешел по ссылке Выйти везде в [Яндекс ID](https://id.yandex.ru/security/devices) или на каком-то другом сервисе.

## [](token-invalidate.html#token-revocation)Отзыв токенов в приложении

Приложение может отзывать OAuth-токены, которые были [выданы для определенного устройства](token-invalidate.html#device-token), с помощью специального запроса к Яндекс OAuth.

Чтобы реализовать выход из учетной записи для обычных токенов, можно удалять соответствующие ей токены из локального хранилища — восстановить удаленный токен через Яндекс OAuth невозможно, приложение должно будет запросить доступ заново.

При этом для пользователя на странице [Доступы к данным](https://id.yandex.ru/personal/data-access) ничего не изменится. Токен, выданный приложению, будет считаться активным, пока не будет отозван каким-либо из перечисленных выше способом.

## [](token-invalidate.html#device-token)Отзыв токена для устройства

Яндекс OAuth позволяет запросить токен для приложения на конкретном устройстве. Для этого в запросе токена или кода подтверждения следует указать идентификатор устройства и его имя (параметры device_id и device_name описаны в форматах запросов на страницах этого документа). Это имя пользователь сможет увидеть на [странице управления доступом](https://id.yandex.ru/personal/data-access) в API Яндекс ID. Если указать только идентификатор, без имени, токен будет помечен как выданный для неизвестного устройства.

Внимание

У приложения не может быть больше 30 токенов, привязанных к устройствам определенного пользователя. Если Яндекс OAuth успешно выдает приложению новый токен для устройства, самый старый из таких токенов перестает работать.

Токен, выданный для определенного устройства, можно отозвать запросом к Яндекс OAuth, например, чтобы гарантировать выход из аккаунта.

Чтобы отозвать токен, нужно передать его в Яндекс OAuth с идентификатором и паролем приложения.

### [](token-invalidate.html#app-auth)Аутентификация приложения

В запросах к Яндекс OAuth следует указывать идентификатор и пароль, которые были сгенерированы при [регистрации приложения](../register-client.html).

В запросе их можно передать разными способами:

-
В заголовке Authorization, в строке &lt;client_id&gt;:&lt;client_secret&gt;, закодированной методом base64. При этом следует указывать базовый (Basic) метод авторизации.

Пример заголовка:

Authorization: Basic &lt;закодированная строка client_id:client_secret&gt;

-
В теле POST-запроса, в параметрах client_id и client_secret. Эти параметры обязательно должны передаваться одновременно.

Если Яндекс OAuth получает заголовок Authorization, параметры client_id и client_secret в теле запроса игнорируются.

### [](token-invalidate.html#cleartext)Формат запроса

Запрос следует отправлять по протоколу HTTPS c помощью метода POST.

POST /revoke_token HTTP/1.1
Host: https://oauth.yandex.ru/
Content-type: application/x-www-form-urlencoded
Content-Length: &lt;длина тела запроса&gt;
[Authorization: Basic &lt;закодированная строка client_id:client_secret&gt;]

&amp; access_token=&lt;отзываемый токен&gt;
[&amp; client_id=&lt;идентификатор приложения&gt;]
[&amp; client_secret=&lt;секретный ключ&gt;]

Параметр

Описание

Обязательный параметр

access_token

OAuth-токен, который нужно отозвать.

Дополнительные параметры

client_id

Идентификатор приложения. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Параметр обязателен, если в запросе не был указан [заголовок Authorization](token-invalidate.html#app-auth).

client_secret

Секретный ключ. Доступен в [свойствах приложения](../register-client.html#app-params). Чтобы открыть свойства, перейдите в [Яндекс OAuth](https://oauth.yandex.ru/) и нажмите на название приложения.

Параметр обязателен, если в запросе не был указан [заголовок Authorization](token-invalidate.html#app-auth).

### [](token-invalidate.html#response)Формат ответа

Яндекс OAuth возвращает ответ в JSON-документе.

Запрос выполнен успешно
Запрос выполнен с ошибкой

Если токен успешно отозван или уже был недействителен, возвращается ответ с HTTP-кодом 200 и телом:

{
&quot;status&quot;: &quot;ok&quot;
}

Если запрос выполнить не удалось, то ответ возвращается с HTTP-кодом ошибки и ее описанием:

{
&quot;error_description&quot;: &quot;Client not found&quot;,
&quot;error&quot;: &quot;invalid_client&quot;
}

Параметр

Описание

error_description

Описание ошибки на естественном языке.

error

[Код ошибки](token-invalidate.html#error-table).

#### [](token-invalidate.html#error-table)Поддерживаемые коды ошибок

HTTP-код ответа

Код ошибки

Описание

400

invalid_request

Неверный формат запроса (например, не указан обязательный параметр).

400

invalid_grant

Переданный токен не принадлежит указанному приложению.

400 или 401

invalid_client

Возвращается в следующих случаях:

- Приложение с указанным идентификатором не найдено или заблокировано.

- Передан неверный пароль для заданного идентификатора приложения.

HTTP-код ответа 401 возвращается, если идентификатор и секретный ключ были переданы в заголовке Authorization. В противном случае возвращается HTTP-код 400.

400

unsupported_token_type

Токен не может быть отозван, так как при запросе этого токена не был указан идентификатор устройства (параметр device_id).

Если токен нельзя отозвать, его можно просто удалить из локального хранилища, чтобы приложение потеряло доступ к данным пользователя.

### Была ли статья полезна?
ДаНет

## user-information.html

--------------------------------------------------------------------------------

**Заголовок:** Обмен токена на информацию о пользователе | OAuth для Яндекс ID


- [О сервисе ](index.html)
- [Важные советы ](tips.html)
- [Верификация сервиса ](confirm-account.html)
- [Требования к Программам ](requirements.html)
- [Подключение к API Яндекс ID ](how-to.html)
[Этап 1. Регистрация приложения ](register-client.html)
- [Этап 2. Получение OAuth-токена ](access.html)
[Веб-платформы — мгновенная авторизация ](suggest-description.html)
[Подключение ](suggest-connection.html)
- [Конструктор кнопок ](suggest/but-const.html)

- [Мобильные приложения — LoginSDK ](mobileauthsdk/about.html)
[iOS (версия SDK 3.0.0) ](mobileauthsdk/ios/sdk-ios-main.html)
- Android (версия SDK 3.1.3)
- Архив

- [Альтернативный способ с кодом подтверждения ](codes/code-and-token.html)

- [Этап 3. Получение информации о пользователе ](user-information.html)

- [Токены ](concepts/ya-oauth-intro.html)
- [Глоссарий ](concepts/glossary.html)
- [Обратная связь ](feedback.html)

Обмен токена на информацию о пользователе
## В этой статье:

- [Формат запроса](user-information.html#request-format)
- [Параметры запроса](user-information.html#request-params)
- [Формат ответа](user-information.html#response-format)
- [Стандартные параметры ответа](user-information.html#common)
- [Дополнительные параметры ответа](user-information.html#optional)
- [Пример](user-information.html#all-rights)

- [Подключение к API Яндекс ID](how-to.html)
- Этап 3. Получение информации о пользователе

# Обмен токена на информацию о пользователе

- [Формат запроса](user-information.html#request-format)
[Параметры запроса](user-information.html#request-params)

- [Формат ответа](user-information.html#response-format)
[Стандартные параметры ответа](user-information.html#common)
- [Дополнительные параметры ответа](user-information.html#optional)
- [Пример](user-information.html#all-rights)

По запросу информации о пользователе API Яндекс ID возвращает все данные, права на которые дает указанный в запросе OAuth-токен.

Состав ответа сервиса зависит от прав приложения, выбранных при [регистрации](register-client.html) на Яндекс OAuth. Если выбрано несколько прав, ответ составляется из элементов, специфических для каждого из прав.

Примечание

Для запроса к API Яндекс ID можно использовать OAuth-токен с правами доступа к любому из сервисов Яндекса. Однако расширенный доступ к данным пользователя дают только токены с правами доступа из секции API Яндекс ID, настроенные при регистрации приложения.

## [](user-information.html#request-format)Формат запроса

Запрос информации о пользователе Яндекса формируется следующим образом:

Рекомендуемый способ
Небезопасный способ

GET https://login.yandex.ru/info?
[&amp; format=json | xml | jwt]
[&amp; jwt_secret=&lt;секретный ключ&gt;]

Authorization: OAuth &lt;OAuth-токен&gt;

GET https://login.yandex.ru/info?
&amp; oauth_token=&lt;OAuth-токен&gt;
[&amp; format=json | xml | jwt]
[&amp; jwt_secret=&lt;секретный ключ&gt;]

Внимание

При использовании этого способа OAuth-токен передается в параметре GET-запроса и может сохраниться в открытом виде в истории браузера или в access-логах любого промежуточного хоста. Сохраненным OAuth-токеном может воспользоваться злоумышленник.

### [](user-information.html#request-params)Параметры запроса

Параметр

Значение

Описание

oauth_token

&lt;OAuth-токен&gt;

OAuth-токен, который разрешает доступ к данным учетной записи пользователя через API Яндекс ID. От прав, которые дает указанный в запросе OAuth-токен, зависит содержание [ответа](user-information.html#response-format).

OAuth-токен должен быть указан в запросе одним из двух способов:

-
В HTTP-заголовке Authorization при каждом вызове API Яндекс ID с указанием типа токена перед его значением (рекомендуемый способ):

Authorization: OAuth &lt;OAuth-токен&gt;

-
В значении параметра oauth_token (небезопасный способ):

oauth_token=&lt;OAuth-токен&gt;

format

xml | json | jwt

Формат возвращаемых данных. Возможные значения:

- json — JSON-документ. Это значение используется по умолчанию, если параметр не указан в запросе.

- xml — XML-документ.

- jwt — [JSON Web Token](tokens/jwt.html).

jwt_secret

&lt;секретный ключ&gt;

Секрет, которым будет подписан JWT. Если параметр не передан, вместо него будет использован client_secret OAuth-приложения.
Рекомендуется этот параметр не передавать.

## [](user-information.html#response-format)Формат ответа

В ответе сервиса возвращается набор [стандартных](user-information.html#common) и [дополнительных](user-information.html#optional) полей в зависимости от прав приложения.

Формат тела ответа по умолчанию — JSON. Вы также можете получить ответ в формате XML или JWT: для этого укажите в запросе параметр format со значением xml или jwt:

- Ответ в формате XML имеет такую же структуру, как и JSON. При этом данные обрамляются корневым тегом &lt;user&gt;.

- Ответ в формате JWT всегда имеет [стандартный набор полей](tokens/jwt.html). В зависимости от выбранных прав, помимо стандартных полей, возвращаются и специальные поля.

### [](user-information.html#common)Стандартные параметры ответа

Ответ на запрос информации о пользователе содержит набор полей, перечисленных ниже:

Свойство

Описание

login

Логин пользователя на Яндексе.

id

Уникальный идентификатор пользователя Яндекса.

client_id

Идентификатор приложения, для которого был выдан переданный в [запросе](user-information.html#request-format) OAuth-токен. Доступен в [свойствах приложения](https://oauth.yandex.ru/). Чтобы открыть свойства, нажмите на название приложения.

uid

Аналог id. Поле доступно только в формате JWT.

psuid

Идентификатор авторизованного пользователя в Яндексе. Формируется на стороне Яндекса на основе пары client_id и user_id.

### [](user-information.html#optional)Дополнительные параметры ответа

Дополнительные поля ответа зависят от прав, выбранных при [регистрации приложения](register-client.html#access) на Яндекс OAuth и предоставленных OAuth-токеном:

-
[Отсутствие прав из секции API Яндекс ID](user-information.html#norights)

-
[Доступ к адресу электронной почты](user-information.html#email-access)

-
[Доступ к портрету пользователя](user-information.html#avatar-access)

-
[Доступ к дате рождения](user-information.html#birthday-access)

-
[Доступ к логину, имени и фамилии, полу](user-information.html#name-access)

-
[Доступ к номеру телефона](user-information.html#phone-access)

Если выбрано несколько прав, ответ составляется из элементов, специфических для каждого из прав.

#### [](user-information.html#norights)Отсутствие прав из секции API Яндекс ID

Запрос к API Яндекс ID можно составить, используя OAuth-токен, выданный для другого сервиса Яндекса. Если токен валиден, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;login&quot;: &quot;ivan&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common).

#### [](user-information.html#email-access)Доступ к адресу электронной почты

При запросе с OAuth-токеном, дающим право Адрес электронной почты, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;login&quot;: &quot;ivan&quot;,
&quot;old_social_login&quot;: &quot;uid-mmzxrnry&quot;,
&quot;default_email&quot;: &quot;test@yandex.ru&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;emails&quot;: [
&quot;test@yandex.ru&quot;,
&quot;other-test@yandex.ru&quot;
],
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;old_social_login&gt;uid-mmzxrnry&lt;/old_social_login&gt;
&lt;default_email&gt;test@yandex.ru&lt;/default_email&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;emails&gt;
&lt;address&gt;test@yandex.ru&lt;/address&gt;
&lt;address&gt;other-test@yandex.ru&lt;/address&gt;
&lt;/emails&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;email&quot;: &quot;test@yandex.ru&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common), а также дополнительные параметры:

Свойство

Описание

emails

Массив электронных адресов пользователя. В настоящее время включает единственный e-mail — e-mail по умолчанию.

default_email

E-mail по умолчанию, предназначенный для связи с пользователем.

email

Аналог default_email. Поле доступно только в формате JWT.

#### [](user-information.html#avatar-access)Доступ к портрету пользователя

При запросе с OAuth-токеном, дающим право Портрет пользователя, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;login&quot;: &quot;ivan&quot;,
&quot;old_social_login&quot;: &quot;uid-mmzxrnry&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;is_avatar_empty&quot;: false,
&quot;default_avatar_id&quot;: &quot;131652443&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;login&gt;zamulla.aleksey&lt;/login&gt;
&lt;old_social_login&gt;uid-mmzxrnry&lt;/old_social_login&gt;
&lt;id&gt;31652443&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;is_avatar_empty&gt;False&lt;/is_avatar_empty&gt;
&lt;default_avatar_id&gt;31652443&lt;/default_avatar_id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;avatar_id&quot;: &quot;131652443&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common), а также дополнительные параметры:

Свойство

Описание

is_avatar_empty

Признак того, что в поле default_avatar_id указан идентификатор заглушки (портрета, который автоматически назначается при регистрации на Яндексе).

default_avatar_id

Идентификатор портрета пользователя Яндекса.
Портрет с данным идентификатором можно скачать по ссылке следующего формата:

https://avatars.yandex.net/get-yapic/&lt;идентификатор портрета&gt;/&lt;размер&gt;

Если портрета с переданным идентификатором нет, по ссылке будет заглушка указанного размера.

Доступные размерыЧтобы получить изображение нужного размера, Яндекс пытается найти на портрете лицо и вырезает изображение из этой области.

Значения, которые можно задать в URL портрета:

- islands-small — 28×28 пикселей.

- islands-34 — 34×34 пикселей.

- islands-middle — 42×42 пикселей.

- islands-50 — 50×50 пикселей.

- islands-retina-small — 56×56 пикселей.

- islands-68 — 68×68 пикселей.

- islands-75 — 75×75 пикселей.

- islands-retina-middle — 84×84 пикселей.

- islands-retina-50 — 100×100 пикселей.

- islands-200 — 200×200 пикселей.

avatar_id

Аналог default_avatar_id. Поле доступно только в формате JWT.

#### [](user-information.html#birthday-access)Доступ к дате рождения

При запросе с OAuth-токеном, дающим право Дата рождения, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;login&quot;: &quot;ivan&quot;,
&quot;old_social_login&quot;: &quot;uid-mmzxrnry&quot;,
&quot;birthday&quot;: &quot;1987-03-12&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;old_social_login&gt;uid-mmzxrnry&lt;/old_social_login&gt;
&lt;birthday&gt;1987-03-12&lt;/birthday&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;birthday&quot;: &quot;1987-03-12&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common), а также дополнительный параметр:

Свойство

Описание

birthday

Дата рождения пользователя в формате ГГГГ-ММ-ДД.

Неизвестные части даты заполняются нулями, например: 0000-12-23.

Если дата рождения пользователя неизвестна:

- в JSON-документе возвращается ключ &quot;birthday&quot;: null;

- в XML-документе возвращается пустой тег &lt;birthday/&gt;.

#### [](user-information.html#name-access)Доступ к логину, имени и фамилии, полу

При запросе с OAuth-токеном, дающим право Логин, имя и фамилия, пол, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;first_name&quot;: &quot;Иван&quot;,
&quot;last_name&quot;: &quot;Иванов&quot;,
&quot;display_name&quot;: &quot;Ivan&quot;,
&quot;real_name&quot;: &quot;Иван Иванов&quot;,
&quot;login&quot;: &quot;ivan&quot;,
&quot;old_social_login&quot;: &quot;uid-mmzxrnry&quot;,
&quot;sex&quot;: &quot;male&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;first_name&gt;Иван&lt;/first_name&gt;
&lt;last_name&gt;&lt;/last_name&gt;
&lt;display_name&gt;Ivan&lt;/display_name&gt;
&lt;real_name&gt;Иван Иванов&lt;/real_name&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;old_social_login&gt;uid-mmzxrnry&lt;/old_social_login&gt;
&lt;sex&gt;male&lt;/sex&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;login&quot;: &quot;ivan&quot;,
&quot;uid&quot;: 1000034426,
&quot;display_name&quot;: &quot;Ivan&quot;,
&quot;name&quot;: &quot;Иван Иванов&quot;,
&quot;gender&quot;: &quot;male&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common), а также дополнительные параметры:

Свойство

Описание

first_name

Имя пользователя, указанное им в Яндекс ID.

last_name

Фамилия пользователя, указанная им в Яндекс ID.

display_name

Имя, которое отображается для данной учетной записи в интерфейсе Яндекса.

real_name

Имя и фамилия пользователя, указанные им в Яндекс ID.
В формате JSON нелатинские символы имени и фамилии представлены в формате Unicode.

sex

Пол пользователя. Возможные значения:

- male — мужской;

- female — женский;

- неизвестный пол:

в JSON-документе обозначается ключом &quot;sex&quot;: null;

- в XML-документе обозначается пустым тегом &lt;sex/&gt;.

gender

Аналог sex. Поле доступно только в формате JWT.

#### [](user-information.html#phone-access)Доступ к номеру телефона

При запросе с OAuth-токеном, дающим право Номер телефона, API возвращает следующий ответ:

В формате JSON
В формате XML
В формате JWT

{
&quot;login&quot;: &quot;ivan&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;default_phone&quot;: {
&quot;id&quot;: 12345678,
&quot;number&quot;: &quot;+79037659418&quot;
},
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;default_phone&gt;
&lt;id&gt;12345678&lt;/id&gt;
&lt;number&gt;+79037659418&lt;/number&gt;
&lt;/default_phone&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;number&quot;: &quot;+79037659418&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

Ответ содержит [стандартный набор полей](user-information.html#common), а также дополнительные параметры:

Свойство

Описание

default_phone

Телефон по умолчанию, предназначенный для связи с пользователем. Поле содержит параметры:

- id — идентификатор номера телефона;

- number — номер телефона пользователя.

### [](user-information.html#all-rights)Пример

Если приложение имеет OAuth-токен, который дает приложению все права API Яндекс ID, ответ содержит все [стандартные](user-information.html#common) и [дополнительные](user-information.html#optional) параметры:

В формате JSON
В формате XML
В формате JWT

{
&quot;first_name&quot;: &quot;Иван&quot;,
&quot;last_name&quot;: &quot;Иванов&quot;,
&quot;display_name&quot;: &quot;ivan&quot;,
&quot;emails&quot;: [
&quot;test@yandex.ru&quot;,
&quot;other-test@yandex.ru&quot;
],
&quot;default_email&quot;: &quot;test@yandex.ru&quot;,
&quot;default_phone&quot;: {
&quot;id&quot;: 12345678,
&quot;number&quot;: &quot;+79037659418&quot;
},
&quot;real_name&quot;: &quot;Иван Иванов&quot;,
&quot;is_avatar_empty&quot;: false,
&quot;birthday&quot;: &quot;1987-03-12&quot;,
&quot;default_avatar_id&quot;: &quot;131652443&quot;,
&quot;login&quot;: &quot;ivan&quot;,
&quot;old_social_login&quot;: &quot;uid-mmzxrnry&quot;,
&quot;sex&quot;: &quot;male&quot;,
&quot;id&quot;: &quot;1000034426&quot;,
&quot;client_id&quot;: &quot;4760187d81bc4b7799476b42b5103713&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;user&gt;
&lt;first_name&gt;Иван&lt;/first_name&gt;
&lt;last_name&gt;Иванов&lt;/last_name&gt;
&lt;display_name&gt;ivan&lt;/display_name&gt;
&lt;emails&gt;
&lt;address&gt;test@yandex.ru&lt;/address&gt;
&lt;address&gt;other-test@yandex.ru&lt;/address&gt;
&lt;/emails&gt;
&lt;default_email&gt;test@yandex.ru&lt;/default_email&gt;
&lt;default_phone&gt;
&lt;id&gt;12345678&lt;/id&gt;
&lt;number&gt;+79037659418&lt;/number&gt;
&lt;/default_phone&gt;
&lt;real_name&gt;Иван Иванов&lt;/real_name&gt;
&lt;is_avatar_empty&gt;False&lt;/is_avatar_empty&gt;
&lt;birthday&gt;1987-03-12&lt;/birthday&gt;
&lt;default_avatar_id&gt;131652443&lt;/default_avatar_id&gt;
&lt;login&gt;ivan&lt;/login&gt;
&lt;old_social_login&gt;uid-mmzxrnry&lt;/old_social_login&gt;
&lt;sex&gt;male&lt;/sex&gt;
&lt;id&gt;1000034426&lt;/id&gt;
&lt;client_id&gt;4760187d81bc4b7799476b42b5103713&lt;/client_id&gt;
&lt;psuid&gt;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&lt;/psuid&gt;
&lt;/user&gt;

{
&quot;iat&quot;: 1620915565,
&quot;jti&quot;: &quot;384b6169-b3f6-11eb-a7cd-0c42a10aa38c&quot;,
&quot;exp&quot;: 1652451414,
&quot;iss&quot;: &quot;login.yandex.ru&quot;,
&quot;uid&quot;: 1000034426,
&quot;login&quot;: &quot;ivan&quot;,
&quot;avatar_id&quot;: &quot;131652443&quot;,
&quot;email&quot;: &quot;test@yandex.ru&quot;,
&quot;number&quot;: &quot;+79037659418&quot;,
&quot;display_name&quot;: &quot;ivan&quot;,
&quot;name&quot;: &quot;Иван Иванов&quot;,
&quot;gender&quot;: &quot;male&quot;,
&quot;psuid&quot;: &quot;1.AAceCw.tbHgw5DtJ9_zeqPrk-Ba2w.qPWSRC5v2t2IaksPJgnge&quot;
}

### Была ли статья полезна?
ДаНет