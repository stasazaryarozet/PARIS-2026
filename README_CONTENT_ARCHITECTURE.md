# Архитектура контента parisinjanuary.ru

## Принцип: Единый источник истины

Весь сайт генерируется из одного файла: **`content.md`**

```
content.md
    ↓
build.py
    ↓
├── index.html (посадочная)
└── support/index.html (плоская страница со всеми разделами)
```

---

## Структура content.md

```markdown
---
version: 1.0
site: parisinjanuary.ru
---

# Париж в Январе 2026
## Дизайн-путешествие
## Программа
### Лувр и Орсе
### Современное искусство
...
## Детали
## Консультация
## Группа участников

# Support
## Поддержка участников
### Отели
#### Совет
#### 17 отелей на карте
#### География
#### Что важно
#### Помощь
### Транспорт
### Практическая информация
```

---

## Workflow

### 1. Редактирование

Изменяешь **только** `content.md`

### 2. Генерация

```bash
python3 build.py
```

Генерирует обе страницы с единым дизайном и автоматическим версионированием.

### 3. Публикация

```bash
git add content.md index.html support/
git commit -m "обновление контента"
git push
```

GitHub Pages автоматически обновит сайт.

---

## Преимущества

✅ **Единый источник истины** — нет рассинхронизации  
✅ **Плоская структура** — все разделы support на одной странице  
✅ **Версионирование** — изменения отслеживаются в Git  
✅ **Автоматическое кеш-бастинг** — JavaScript добавляет `?v=timestamp`  
✅ **Лапидарность** — весь контент в одном месте, легко редактировать  
✅ **МОЖНО ЛИ БЕЗ ЭТОГО ОБОЙТИСЬ?** — убрали избыточную вложенность

---

## Интеграция support/ в посадочную

Посадочная **перестала быть только посадочной**:

- На `index.html` есть секция "Поддержка участников" со ссылкой на `/support/`
- `/support/` — это не отдельный сайт, а естественное продолжение
- Единый дизайн, единый источник контента
- Участник плавно переходит от "что это" к "как подготовиться"
- Все разделы (Отели, Транспорт, Практическая информация) на одной странице

---

## Добавление новых секций

1. Добавь секцию в `content.md`:

```markdown
### Транспорт

**Аэропорт → Париж:** RER B до Châtelet (€11, 35 минут).

**Метро:** Купите Navigo Easy (€2 карта + €2 за поездку).
```

2. Запусти `python3 build.py`

3. Готово — новая секция автоматически появится на `/support/`

---

## Техническая реализация

- **Парсинг:** Python `re` для разбора Markdown на секции
- **Рендеринг:** `markdown` библиотека для HTML
- **Стили:** Inline CSS в каждой странице (автономность)
- **Кеш-бастинг:** JavaScript добавляет query string при загрузке
- **Плоская структура:** Все разделы support рендерятся на одной странице

---

## Файлы

- `content.md` — единственный файл для редактирования
- `build.py` — генератор всех страниц
- `index.html` — генерируется автоматически
- `support/index.html` — генерируется автоматически (плоская страница)
- `style.css` — используется только для `index.html` (посадочная)

**Не редактируй HTML вручную** — все изменения через `content.md`
